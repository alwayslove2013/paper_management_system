(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{224:function(t,e,n){},225:function(t,e,n){},229:function(t,e,n){},230:function(t,e,n){},231:function(t,e,n){},232:function(t,e,n){},234:function(t,e,n){},235:function(t,e,n){},236:function(t,e,n){},237:function(t,e,n){},238:function(t,e,n){},239:function(t,e,n){},240:function(t,e,n){},241:function(t,e,n){},242:function(t,e,n){},243:function(t,e,n){},248:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(0),a=n.n(i),c=n(33),o=n.n(c),s=(n(224),n(225),n(17)),l=n(30),u=n(15),h=n.n(u),d=n(35),f=n(7),g=n(23),j=n(123),p=n.n(j),b="http://127.0.0.1:12357/",v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b+t+(t.includes("?")?"&":"?")+p.a.stringify(e);return new Promise((function(t,e){fetch(n).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},m=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("get_papers");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("get_public_tags");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,t.next=3,v("get_private_tags",{uid:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(t){var e=t.uid,n=t.pid,r=t.paper,i=r.privateTags,a=r.read;return e&&v("set_private_tags",{uid:e,pid:n,tags:[].concat(Object(l.a)(i),[a&&"read"]).filter((function(t){return t})).join(",")}),"OK"},C=n(24),T={left:15,right:35,top:8,bottom:45},w=15,S=35,P=8,N=25,k=function(t,e,n){return t=t.slice(0,n),e.forEach((function(n){if(!t.includes(n)){for(var r=t.length-1;e.includes(t[r]);)r-=1;t[r]=n}})),t},A=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};t.forEach((function(t){t.forEach((function(t){t&&(t in n?n[t]+=1:n[t]=1)}))}));var r=[];for(var i in n)r.push({item:i,count:n[i]});return r.sort((function(t,e){return e.count-t.count})),r.slice(0,e).map((function(t){return t.item}))},I={publicTags:function(t){var e=t.pid,n=t.paper.publicTags;return v("set_public_tags",{pid:e,tags:n.join(",")}),"OK"},privateTags:y,read:y},L=function(){return{currentPage:"Management",setCurrentPage:function(){this.currentPage="/analysis"===window.location.pathname?"Analysis":"Management"},tooltipX:500,tooltipY:500,setTooltipPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.tooltipX=t,this.tooltipY=e},titleSearch:"",setTitleSearch:function(t){this.titleSearch=t.toLocaleLowerCase()},get searchPaperDoiSet(){var t=this,e=this.titleSearch?this.papers.filter((function(e){return e.title.toLocaleLowerCase().indexOf(t.titleSearch)>-1})).map((function(t){return t.doi})):[];return new Set(e)},papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],initPapers:function(){var t=this;return Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.papers.length){e.next=5;break}return e.next=3,m();case 3:n=e.sent,t.setPapers(n);case 5:case"end":return e.stop()}}),e)})))()},setPapers:function(t){var e=arguments,n=this;return Object(d.a)(h.a.mark((function r(){var i,a;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:"citationCount",console.log("==> \u521d\u59cb\u5316Papers"),a={},t.forEach((function(t){t.privateTags=[],t.read=!1,t.publicTags=[],t.colors=[],t.innerColors=[],t.outerColors=[],t.internalRefList=[],t.internalCitedList=[],t.refList=t.refList.toLowerCase().split(/[,;]/).map((function(t){return t.trim()})),a[t.doi]=t,t.authors=t.authors.split(";").map((function(t){return t.trim().replace(/\{(.*)\}/,"$1")})),t.countries=t.countries.split(";").map((function(t){var e=t.trim().split(" ").map((function(t){return t.trim()})).filter((function(t){return t}));return 0===e.length?"":e[e.length-1].toLowerCase().replace(/^\w/,(function(t){return t.toUpperCase()}))})).filter((function(t){return t}))})),t.forEach((function(t){t.refList.forEach((function(e){e in a&&(a[e].internalCitedList.push(t.doi),t.internalRefList.push(e))}))})),n.commonAuthors=A(t.map((function(t){return t.authors})),30),n.commonCountries=A(t.map((function(t){return t.countries})),30),t.sort((function(t,e){return e[i]-t[i]})),n.computedPosition(t),r.next=11,n.initPublicTags(t);case 11:Object(g.d)((function(){n.papers=t}));case 12:case"end":return r.stop()}}),r)})))()},setPaper:function(t,e,n){var r=this.papers.find((function(e){return e.doi===t}));r[e]=n,console.log("==> \u66f4\u65b0paper\u6570\u636e by doi:",t,e,n),I[e]({uid:this.userId,pid:t,paper:Object(g.e)(r)}),this.doiUpdateColors(t)},unitXAttr:"year",get unitXAttrList(){var t=this,e=new Set;this.papers.forEach((function(n){e.add(n[t.unitXAttr])}));var n=Array.from(e);return n.sort((function(t,e){return e-t})),n},unitYAttr:"conferenceName",get unitYAttrList(){return["SciVis","InfoVis","EuroVis","VAST","PacificVis"]},maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(t){var e=this,n={};t.forEach((function(t){var r=t[e.unitXAttr],i=t[e.unitYAttr];r in n||(n[r]={}),i in n[r]||(n[r][i]=0),t.unitIndex=n[r][i],n[r][i]+=1})),this.maxUnitBlockPaperCount=.6*Math.max.apply(Math,Object(l.a)(t.map((function(t){return t.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(t){var e=this;return Object(d.a)(h.a.mark((function n(){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x();case 2:r=n.sent,t.forEach((function(t){t.doi in r&&(t.publicTags=r[t.doi].filter((function(t){return t})))})),Object(g.d)((function(){e.commonPublicTags=A(Object.values(r),30)}));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var t=this;return Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({uid:t.userId});case 2:n=e.sent,Object(g.d)((function(){t.papers.forEach((function(t){if(t.doi in n){var e=n[t.doi].indexOf("read");e>-1&&(t.read=!0,n[t.doi].splice(e,1)),t.privateTags=n[t.doi].filter((function(t){return t}))}})),t.commonPrivateTags=A(Object.values(n),30)})),t.batchUpdateColors();case 5:case"end":return e.stop()}}),e)})))()},userId:"",setUserId:function(t){t!==this.userId&&(this.userId=t,console.log("==> change userId:",this.userId),localStorage.setItem("paper-management-system-userId",t),t&&this.initPrivateTags())},initUserId:function(){if(0===this.userId.length){var t=localStorage.getItem("paper-management-system-userId");t&&this.setUserId(t)}},get controlTagNameList(){return this.generateCategory(12)},get anaCategories(){return this.generateCategory(18,!0)},generateCategory:function(t){var e=k(this.commonCountries,["Japan","Korea"],t),n=k(this.commonAuthors,["Xiaoru Yuan"],t),r=k(this.commonPrivateTags,["read"],t),i=this.commonPublicTags;return[{label:"Country",value:"countries",list:e,highlightType:"outer"},{label:"Author",value:"authors",list:n,highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:r,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:i,highlightType:"inner"}]},get category2highlightType(){var t={};return this.controlTagNameList.forEach((function(e){t[e.value]=e.highlightType})),t},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[]},get controlIsActive(){var t=!1;for(var e in this.activeTags)this.activeTags[e].length>0&&(t=!0);return t},get isUnitOuterHighlight(){var t=this,e=this.controlTagNameList.filter((function(t){return"outer"===t.highlightType})).map((function(t){return t.value})),n=!1;return e.forEach((function(e){t.activeTags[e].length>0&&(n=!0)})),n},tag2color:{},colorUse:{},setTagColor:function(t,e){console.log("==> \u8bbe\u7f6etag\u989c\u8272:",e,t);var n="".concat(e,"---").concat(t);if(n in this.tag2color)this.colorUse[this.tag2color[n]]=!1,delete this.tag2color[n],this.activeTags[e]=Object(l.a)(this.activeTags[e]).filter((function(e){return e!==t}));else{this.activeTags[e].push(t);for(var r=0,i=f.k[r];this.colorUse[i];){if(10===(r+=1)){i="black";break}i=f.k[r]}this.tag2color[n]=i,this.colorUse[i]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var t=this;this.papers.forEach((function(e){e.colors=[],e.innerColors=[],e.outerColors=[],t.updateColor(e)}))},doiUpdateColors:function(t){var e=this.papers.find((function(e){return e.doi===t}));e.colors=[],e.innerColors=[],e.outerColors=[],this.updateColor(e)},updateColor:function(t){var e=this;this.activeTags.privateTags.indexOf("read")>-1&&t.read&&(t.colors.push(this.tag2color["privateTags---read"]),t.innerColors.push(this.tag2color["privateTags---read"]));var n=function(n){var r=e.activeTags[n];"inner"===e.category2highlightType[n]?r.forEach((function(r){if(t[n].indexOf(r)>-1){var i="".concat(n,"---").concat(r);t.innerColors.push(e.tag2color[i])}})):r.forEach((function(r){if(t[n].indexOf(r)>-1){var i="".concat(n,"---").concat(r);t.outerColors.push(e.tag2color[i])}})),r.forEach((function(r){if(t[n].indexOf(r)>-1){var i="".concat(n,"---").concat(r);t.colors.push(e.tag2color[i])}}))};for(var r in this.activeTags)n(r)},maxCitationCount:200,currentSelected:"",currentSelectedRefSet:new Set,currentSelectedCitedSet:new Set,isSelected:!1,setCurrentSelected:function(t){console.log("==> \u9009\u4e2d\u6587\u7ae0:",t),this.currentSelected=t,this.isSelected=!!t;var e=this.papers.find((function(e){return e.doi===t}));this.currentSelectedRefSet=new Set(e.internalRefList),this.currentSelectedCitedSet=new Set(e.internalCitedList)},cancelSelect:function(){console.log("==> \u70b9\u51fb\u80cc\u666f\uff0c\u53d6\u6d88\u8bba\u6587\u9009\u4e2d\u72b6\u6001"),this.isSelected=!1},get currentSelectedPaper(){var t=this;return this.papers.find((function(e){return e.doi===t.currentSelected}))},get analysisPapers(){return this.controlIsActive?this.papers.filter((function(t){return t.innerColors.length>0||t.outerColors.length>0})):this.papers},get anaTimeData(){var t=this;return this.unitXAttrList.map((function(t){return+t})).sort().map((function(e){return{x:e,all:t.analysisPapers.filter((function(t){return+t.year===e})).length,highlight:t.anaHighPapers.filter((function(t){return+t.year===e})).length}}))},get anaTagViewData(){var t=this;return this.anaCategories.map((function(e){return{label:e.label,value:e.value,data:e.list.map((function(n){return"read"===n?{label:"read",all:t.analysisPapers.filter((function(t){return t.read})).length,highlight:t.anaHighPapers.filter((function(t){return t.read})).length}:{label:n,all:t.analysisPapers.filter((function(t){return t[e.value].includes(n)})).length,highlight:t.anaHighPapers.filter((function(t){return t[e.value].includes(n)})).length}}))}}))},anaFilterType:"none",setAnaFilterType:function(t){console.log("setAnaFilterType",t),this.anaFilterType=t},clearBrushTrigger:function(){},setClearBrushTrigger:function(t){this.clearBrushTrigger=t},anaHighCate:"",anaHighTag:"",anaHighPapers:[],setAnaHighPapersByTag:function(t){var e=t.anaHighCate,n=t.anaHighTag;console.log("setAnaHighPapersByTag",e,n),this.clearBrushTrigger(),this.anaHighCate=e,this.anaHighTag=n,this.anaHighPapers=this.analysisPapers.filter((function(t){return Object(C.get)(t,e,[]).includes(n)}))},setAnaHighPapersByYear:function(t){console.log("setAnaHighPapersByYear",t);var e=Object(s.a)(t,2),n=e[0],r=e[1];this.anaHighPapers=this.analysisPapers.filter((function(t){return+t.year>=n&&+t.year<=r}))}}},B=n(250),H=a.a.createContext(null),Y=function(t){var e=t.children,n=Object(B.a)(L);return Object(r.jsx)(H.Provider,{value:n,children:e})},X=function(){var t=a.a.useContext(H);if(!t)throw new Error("no Provider");return t},E=n(70),M=n(16),U=(n(229),n(254)),F=(n(230),n(73)),D=function(){var t=X(),e=Object(C.debounce)((function(e){t.setTitleSearch(e.target.value)}),200);return Object(r.jsxs)("div",{className:"search-view",children:[Object(r.jsx)("div",{className:"search-view-input",children:Object(r.jsx)("input",{onInput:e})}),Object(r.jsx)("div",{className:"search-view-icon",children:Object(r.jsx)(F.a,{})})]})},V=Object(U.a)((function(){var t=X().controlTagNameList;return Object(r.jsxs)("div",{className:"control-view",children:[Object(r.jsxs)("div",{className:"control-item",children:[Object(r.jsx)("div",{className:"control-item-title",children:"Title Search"}),Object(r.jsx)("div",{className:"control-item-options",children:Object(r.jsx)(D,{searchAttr:"title"})})]}),t.map((function(t){return Object(r.jsx)(_,{tagData:t},t.label)}))]})})),_=Object(U.a)((function(t){var e=t.tagData,n=X(),a=n.tag2color,c=Object(i.useState)([]),o=Object(s.a)(c,2),u=o[0],h=o[1];Object(i.useEffect)((function(){var t=Object.keys(a).filter((function(t){return t.split("---")[0]===e.value})).map((function(t){return t.split("---")[1]})).filter((function(t){return e.list.indexOf(t)>-1}));h(t)}),[]);var d=function(t){var r=Object(l.a)(u),i=r.indexOf(t);i>-1?(r.splice(i,1),h(r)):(r.push(t),h(r)),n.setTagColor(t,e.value)};return Object(r.jsxs)("div",{className:"control-item",children:[Object(r.jsx)("div",{className:"control-item-title",children:e.label}),Object(r.jsx)("div",{className:"control-item-options",children:e.list.map((function(t){return Object(r.jsx)(z,{value:t,clickOption:d,isSelect:u.indexOf(t)>-1&&a["".concat(e.value,"---").concat(t)]},t)}))})]})})),z=function(t){var e=t.value,n=t.clickOption,i=t.isSelect,a=["control-item-option",i&&"option-active"].filter((function(t){return t})).join(" "),c=i?{background:i,border:"1px solid ".concat(i)}:{},o="Usa"===e?"USA":e;return Object(r.jsx)("div",{className:a,onClick:function(){return n(e)},style:c,children:o})},R=(n(231),a.a.memo((function(t){var e=t.cx,n=t.cy,i=t.r,a=t.opacity,c=t.doi,o=t.handleClick,s=t.title,l=t.innerColors,u=t.outerColors,h=t.isBackgroundActive,d=t.handleHover,f=t.handleHoverOut,g=function(t){return e+Math.sin(t)*i},j=function(t){return n+Math.cos(t)*i},p=2*Math.PI/l.length,b=l.map((function(t,e){return{startX:g(p*e),startY:j(p*e),endX:g(p*(e+1)),endY:j(p*(e+1))}})),v=1.5*i,m=function(t){return e+Math.sin(t)*v},x=function(t){return n+Math.cos(t)*v},O=2*Math.PI/u.length,y=u.map((function(t,e){return{startX:m(O*e),startY:x(O*e),endX:m(O*(e+1)),endY:x(O*(e+1))}}));return Object(r.jsxs)("g",{id:"unit-g",onClick:function(t){return o(t,c)},cursor:"pointer",onMouseEnter:function(){return d(c)},onMouseLeave:function(){return f()},children:[Object(r.jsx)("title",{children:s}),h&&Object(r.jsxs)("g",{id:"unit-background-g",children:[Object(r.jsx)("rect",{x:e-1.6*i,y:n-1.6*i,width:3.2*i,height:3.2*i,fill:"#fc8d62",rx:.4*i,ry:.4*i}),Object(r.jsx)("circle",{cx:e,cy:n,r:1.3*i,fill:"#eee"})]}),Object(r.jsxs)("g",{id:"unit-border-g",children:[y.length>1?y.map((function(t,i){return Object(r.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(v," ").concat(v," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),fill:u[i]},i)})):Object(r.jsx)("circle",{cx:e,cy:n,r:v,fill:u.length>0?u[0]:"none"}),Object(r.jsx)("circle",{cx:e,cy:n,r:1.1*i,fill:"white",opacity:y.length>0?1:0})]}),Object(r.jsx)("g",{id:"unit-sector-g",opacity:a,children:b.length>1?b.map((function(t,a){return Object(r.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(i," ").concat(i," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),stroke:"white",fill:l[a],strokeWidth:.1*i},a)})):Object(r.jsx)("circle",{cx:e,cy:n,r:i,fill:l[0]})})]})}))),W=function(t){var e=t.isShow,n=t.paper,i=t.paperCircle,a=t.containerWidth,c=t.containerHeight,o=i.cx/a,s=.25*a,l=i.cx-s*o,u=i.cy+15,h=i.cy+200>c?"translateY(-150%)":"",d={transform:"translate(".concat(l,"px,").concat(u,"px) ").concat(h),opacity:e?1:0};return Object(r.jsxs)("div",{className:"unit-tooltip",style:d,children:[Object(r.jsx)("div",{className:"unit-tooltip-title",children:Object(C.get)(n,"title","")}),Object(r.jsxs)("div",{className:"unit-tooltip-authors",children:[Object(C.get)(n,"authors",[]).join("; ")," (",n.year,")"]})]})},J=30,K=40,Z=15,q=1,G=2,$=3,Q=3,tt=1,et=Object(U.a)((function(){var t=X(),e=t.papers,n=t.unitXAttr,a=t.unitYAttr,c=t.unitXAttrList,o=t.unitYAttrList,u=t.unitBlockCount,h=t.maxUnitBlockPaperCount,d=t.controlIsActive,j=t.isUnitOuterHighlight,p=t.currentSelected,b=t.setCurrentSelected,v=t.isSelected,m=t.cancelSelect,x=t.currentSelectedRefSet,O=t.currentSelectedCitedSet,y=t.searchPaperDoiSet,T=Object(i.useState)(0),w=Object(s.a)(T,2),S=w[0],P=w[1],N=Object(i.useState)(0),k=Object(s.a)(N,2),A=k[0],I=k[1];Object(i.useEffect)((function(){var t=document.querySelector("#unit-svg");P(t.clientWidth-K-Z),I(t.clientHeight-J-q)}),[]);for(var L,B=c.length>0?S/c.length-$-Q:0,H=o.length>0?A/o.length-G-tt:0,Y=Math.floor(B>0?H/B:1),E=Math.ceil(Math.sqrt(h/Y)),M=c.map((function(t,e){var n=Math.max.apply(Math,Object(l.a)(o.map((function(e,n){return Object(C.get)(u,[t,e],0)})))),r=Math.ceil(Math.sqrt(h/Y));return n>h&&(r+=1),r})),U=[0],F=[0],D=1;D<c.length;D++)U.push(U[D-1]+M[D-1]);L=(S-($+Q)*c.length)/(U[U.length-1]+M[M.length-1]);for(var V=1;V<c.length;V++)F.push(U[V]*L+($+Q)*V);var _=f.j().domain([0,100]).range([.25,.8]),z=e.map((function(t){var e={};e.oriData=Object(g.e)(t),e.BlockIndexX=c.indexOf(t[n]),e.BlockIndexY=o.indexOf(t[a]);var r,i=t.doi;return e.doi=i,e.circleIndexX=t.unitIndex%M[e.BlockIndexX],e.circleIndexY=Math.floor(t.unitIndex/M[e.BlockIndexX]),e.cx=K+e.BlockIndexX*(B+$+Q)+(e.circleIndexX+.5)*L,e.cy=J+e.BlockIndexY*(H+G+tt)+(e.circleIndexY+.5)*L,"2004"===t.year&&e.BlockIndexY>0&&(e.cy+=50-10*e.BlockIndexY),e.cx=K+F[e.BlockIndexX]+(e.circleIndexX+.5)*L,e.citationGrey=(r=t.citationCount,f.e(_(r))),e.activeColors=t.innerColors,e.innerColors=e.activeColors.length>0?e.activeColors:[e.citationGrey],e.outerColors=["none"],j?e.outerColors=t.outerColors:v?(p===t.doi&&(e.outerColors=["#d95f02"]),x.has(t.doi)&&(e.outerColors=["#1b9e77"]),O.has(t.doi)&&(e.outerColors=["#7570b3"])):e.outerColors=["none"],e.opacity=d?t.innerColors.length+t.outerColors.length>0?.8:.4:.8,e.title=t.Title,v?(p===t.doi&&(e.borderColor="#d95f02"),x.has(t.doi)&&(e.borderColor="#1b9e77"),O.has(t.doi)&&(e.borderColor="#7570b3")):e.borderColor="none",e.isBackgroundActive=y.has(t.doi),e})),et=c.map((function(t,e){return{value:t,x:K+F[e]+M[e]*L/2,y:.8*J}})),nt=o.map((function(t,e){return{value:t,x:.35*K,y:J+(H+G+tt)*e}})),rt=function(t,e){t.stopPropagation(),b(e)},it=Object(i.useState)(""),at=Object(s.a)(it,2),ct=at[0],ot=at[1],st=ct.length>0?e.find((function(t){return t.doi===ct})):{},lt=ct.length>0?z.find((function(t){return t.doi===ct})):{},ut=function(t){console.log("===> hover",t),ot(t)},ht=function(){console.log("===> mouse leave"),ot("")};return Object(r.jsxs)("div",{className:"unit-view",children:[Object(r.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",onClick:function(){m()},children:[Object(r.jsx)("g",{id:"units",children:L>0&&z.map((function(t,e){return Object(r.jsx)(R,{cx:t.cx,cy:t.cy,r:L/2.4,doi:t.doi,colors:t.colors,opacity:t.opacity,innerColors:t.innerColors,outerColors:t.outerColors,handleClick:rt,borderOpacity:t.borderOpacity,borderColor:t.borderColor,title:t.title,isBackgroundActive:t.isBackgroundActive,handleHover:ut,handleHoverOut:ht},e)}))}),Object(r.jsx)("g",{id:"x-label",children:L>0&&et.map((function(t){return Object(r.jsx)("text",{x:t.x,y:t.y,textAnchor:"middle",fontSize:1.6*L,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))}),Object(r.jsx)("g",{id:"y-label",children:L>0&&nt.map((function(t){return Object(r.jsx)("text",{transform:"translate(".concat(t.x,", ").concat(t.y,") rotate(90)"),fontSize:1.6*L,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))})]}),Object(r.jsx)(W,{isShow:ct.length>0,paper:st,containerWidth:S,containerHeight:A,paperCircle:lt})]})})),nt=(n(232),n(257)),rt=n(138),it=n(72),at=n(251),ct=n(255),ot=n(256),st=Object(U.a)((function(){var t=X(),e=t.currentSelectedPaper,n=t.setPaper,i=e;if(console.log("currentSelectedPaper",Object(g.e)(e)),!e)return Object(r.jsx)("div",{});var a=Object(C.get)(i,"doi",""),c=[{title:"Private Tags",value:"privateTags",initTags:Object(C.get)(i,"privateTags",[])},{title:"Public Tags",value:"publicTags",initTags:Object(C.get)(i,"publicTags",[])}];return Object(r.jsx)("div",{className:"detail-view",children:i&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"detail-title",children:i.title}),Object(r.jsxs)("div",{className:"detail-authors",children:[Object(C.get)(i,"authors",[]).join("; ")," (",i.year,")"]}),Object(r.jsxs)("div",{className:"detail-edit-tags",children:[Object(r.jsxs)("div",{className:"detail-edit-read",children:[Object(r.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(r.jsx)(nt.a,{size:"small",checkedChildren:Object(r.jsx)(rt.a,{}),unCheckedChildren:Object(r.jsx)(it.a,{}),defaultChecked:Object(C.get)(i,"read",!1),onChange:function(t){n(a,"read",t)}})]}),c.map((function(t){return Object(r.jsx)(ut,{title:t.title,initTags:t.initTags,handleChangeTags:function(e){return function(t,e){a&&n(a,t,e)}(t.value,e)}},t.value)}))]}),Object(r.jsxs)("div",{className:"detail-attrs",children:[Object(r.jsx)(lt,{paper:i,label:"keywords"}),Object(r.jsx)(lt,{paper:i,label:"doi"}),Object(r.jsx)(lt,{paper:i,label:"affiliation"}),Object(r.jsx)(lt,{paper:i,label:"abstract"})]})]})},a)})),lt=function(t){var e=t.paper,n=t.label;return Object(r.jsxs)("div",{className:"detail-attr",children:[Object(r.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(r.jsx)("div",{className:"detail-content",children:Object(C.get)(e,n,"")})]})},ut=function(t){var e=t.title,n=t.initTags,a=t.handleChangeTags,c=Object(i.useState)(n),o=Object(s.a)(c,2),u=o[0],h=o[1],d=function(t){a(t),h(t)},f=Object(i.useState)(-1),g=Object(s.a)(f,2),j=g[0],p=g[1],b=Object(i.useRef)(),v=Object(i.useState)(""),m=Object(s.a)(v,2),x=m[0],O=m[1],y=function(){var t=Object(l.a)(u);t[j]=x,d(t),p(-1),O("")},C=Object(i.useState)(""),T=Object(s.a)(C,2),w=T[0],S=T[1],P=function(){w&&u.indexOf(w)<0&&(d([].concat(Object(l.a)(u),[w])),I(!1),S(""))},N=Object(i.useState)(!1),k=Object(s.a)(N,2),A=k[0],I=k[1];return Object(r.jsxs)("div",{className:"detail-edit-tag",children:[Object(r.jsxs)("div",{className:"detail-edit-title",children:[e,":"]}),Object(r.jsx)("div",{className:"detail-edit-tags",children:Object(r.jsxs)(r.Fragment,{children:[u.map((function(t,e){return j===e?Object(r.jsx)(at.a,{size:"small",className:"tag-input",value:x,onchange:function(t){return O(t.target.value)},onBlur:y,onPressEnter:y},t):Object(r.jsx)(ct.a,{className:"edit-tag",closable:!0,onClose:function(){return e=t,void d(u.filter((function(t){return t!==e})));var e},children:Object(r.jsx)("span",{children:t})},t)})),A&&Object(r.jsx)(at.a,{ref:b,type:"text",size:"small",className:"tag-input",value:w,onChange:function(t){return S(t.target.value)},onBlur:P,onPressEnter:P}),!A&&Object(r.jsxs)(ct.a,{className:"site-tag-plus",onClick:function(){I(!0)},children:[Object(r.jsx)(ot.a,{})," New Tag"]})]})})]})},ht=function(){var t=X();return Object(i.useEffect)((function(){t.setCurrentPage(),t.initUserId(),t.initPapers()}),[]),Object(r.jsxs)("div",{className:"main-container",children:[Object(r.jsxs)("div",{className:"control-main-container",children:[Object(r.jsx)("div",{className:"control-view-container",children:Object(r.jsx)(V,{})}),Object(r.jsx)("div",{className:"unit-view-container",children:Object(r.jsx)(et,{})})]}),Object(r.jsx)("div",{className:"detail-view-container",children:Object(r.jsx)(st,{})})]})},dt=(n(234),n(235),n(236),function(t){var e=t.svgId,n=Object(i.useState)({width:0,height:0}),r=Object(s.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){var t=f.l("#".concat(e));t.selectAll("*").remove();var n=t.node().getClientRects()[0];c(n)}),[e]),a}),ft=a.a.memo((function(t){var e=t.label,n=void 0===e?"label":e,a=t.value,c=void 0===a?"":a,o=t.data,s=void 0===o?[]:o,l=t.setAnaHighPapersByTag,u=void 0===l?function(){}:l,h=t.anaFilterType,d=t.setAnaFilterType,g=void 0===d?function(){}:d,j="ana-tag-filter-svg-".concat(n.replaceAll(/\W/g,"")),p=f.l("#".concat(j)),b=dt({svgId:j}),v=b.width,m=b.height,x=T;return Object(i.useEffect)((function(){}),[]),Object(i.useEffect)((function(){if(0!==s.length&&0!==v&&0!==m){p.selectAll("*").remove(),s=s.filter((function(t){return t.all>0})),s=f.m(s,(function(t,e){return t.all-e.all}));var t=f.i().domain(s.map((function(t){return t.label}))).range([x.left,v-x.right]).padding(.2),e=f.j().domain([0,f.f(s,(function(t){return t.all}))]).nice().range([m-x.bottom,x.top]);p.append("g").classed("non-active-bars",!0).selectAll("rect").data(s).join("rect").attr("x",(function(e){return t(e.label)})).attr("y",(function(t){return e(t.all)})).attr("height",(function(t){return e(0)-e(t.all)})).attr("width",t.bandwidth()).style("cursor","pointer").on("click",(function(t,e){g("tag"),u({anaHighCate:c,anaHighTag:e.label})})),"none"!==h&&p.append("g").classed("active-bars",!0).selectAll("rect").data(s).join("rect").attr("x",(function(e){return t(e.label)})).attr("y",(function(t){return e(t.highlight)})).attr("height",(function(t){return e(0)-e(t.highlight)})).attr("width",t.bandwidth()).style("pointer-events","none"),p.append("g").attr("class","x-axis").call((function(e){return e.attr("transform","translate(0, "+(m-x.bottom)+")").call(f.a(t).tickSizeOuter(0)).call((function(t){return t.selectAll("text").attr("transform","rotate(-28)").style("text-anchor","end")}))})),p.append("g").attr("class","y-axis").call((function(t){return t.attr("transform","translate(".concat(v-x.right,",0)")).call(f.b(e).ticks(5)).call((function(t){return t.select(".domain").remove()}))}))}})),Object(r.jsx)("svg",{id:j,width:"100%",height:"100%"})})),gt=(n(237),a.a.memo((function(t){var e=t.data,n=t.onInput,a=void 0===n?function(){}:n,c=t.onChange,o=void 0===c?function(){}:c,s=t.setClearBrushTrigger,l=void 0===s?function(){}:s,u=t.anaFilterType,h=t.setAnaFilterType,d=void 0===h?function(){}:h,g=dt({svgId:"ana-time-line-svg"}),j=g.width,p=g.height,b=[f.g(e,(function(t){return t.x})),f.f(e,(function(t){return t.x}))];return Object(i.useEffect)((function(){a(b)}),[e]),Object(i.useEffect)((function(){if(0!==e.length&&0!==j&&0!==p){var t=f.i().domain(e.map((function(t){return t.x}))).range([w,j-S]).padding(.2),n=f.j().domain([0,f.f(e,(function(t){return t.all}))]).nice().range([p-N,P]),r=f.l("#ana-time-line-svg"),i=r.append("g").classed("non-active-bars",!0).selectAll("rect").data(e).join("rect").attr("x",(function(e){return e.rectX=t(e.x)})).attr("y",(function(t){return n(t.all)})).attr("height",(function(t){return n(0)-n(t.all)})).attr("width",t.bandwidth());r.append("g").classed("active-bars",!0).classed("highlight-bars",!0);r.append("g").attr("class","x-axis").call((function(e){return e.attr("transform","translate(0, "+(p-N)+")").call(f.a(t).tickValues(f.h(b[0],b[1],5)).tickSizeOuter(0))})),r.append("g").attr("class","y-axis").call((function(t){return t.attr("transform","translate(".concat(j-S,",0)")).call(f.b(n).ticks(6)).call((function(t){return t.select(".domain").remove()}))}));var c=f.d().extent([[w,.3*P],[j-S,p-N]]).on("start",(function(){d("year")})).on("brush",(function(n){var r=n.selection;i.classed("active-bars",(function(e){return e.rectX+t.bandwidth()>r[0]&&e.rectX<r[1]}));var c=e.filter((function(e){return e.rectX+t.bandwidth()>r[0]&&e.rectX<r[1]})).map((function(t){return t.x}));c.length>=1?a([c[0],c[c.length-1]]):a(b)})).on("end",(function(n){var r=n.selection;if(r){var c=e.filter((function(e){return e.rectX+t.bandwidth()>r[0]&&e.rectX<r[1]})).map((function(t){return t.x}));c.length>=1?o([c[0],c[c.length-1]]):o(b)}else i.classed("active-bars",!1),a(b),d("none"),o(b)}));r.call(c),l((function(){f.c().move(r),i.classed("active-bars",!1)}))}}),[g]),Object(i.useEffect)((function(){if(0!==j&&0!==p&&"year"!==u&&"none"!==u){var t=f.l("#ana-time-line-svg").select(".highlight-bars"),n=f.i().domain(e.map((function(t){return t.x}))).range([w,j-S]).padding(.2),r=f.j().domain([0,f.f(e,(function(t){return t.all}))]).nice().range([p-N,P]);t.selectAll("rect").data(e).join("rect").attr("x",(function(t){return n(t.x)})).attr("y",(function(t){return r(t.highlight)})).attr("height",(function(t){return r(0)-r(t.highlight)})).attr("width",n.bandwidth())}}),[e,u]),Object(r.jsx)("svg",{id:"ana-time-line-svg",width:"100%",height:"100%"})}))),jt=Object(U.a)((function(){var t=X(),e=t.setClearBrushTrigger,n=t.anaTimeData,a=t.anaTagViewData,c=t.setAnaHighPapersByYear,o=t.setAnaHighPapersByTag,l=t.anaFilterType,u=t.setAnaFilterType,h=Object(i.useState)([0,0]),d=Object(s.a)(h,2),f=d[0],g=d[1];return Object(r.jsx)("div",{className:"tag-view-container",children:Object(r.jsxs)(r.Fragment,{children:[a.map((function(t){return Object(r.jsxs)("div",{className:"tag-filter-container",children:[Object(r.jsx)("div",{className:"tag-filter-label",children:t.label}),Object(r.jsx)("div",{className:"tag-filter-div",children:t.data.length>0&&Object(r.jsx)(ft,{label:t.label,value:t.value,data:t.data,setAnaFilterType:u,setAnaHighPapersByTag:o,anaFilterType:l})})]},t.value)})),Object(r.jsxs)("div",{className:"tag-filter-container",children:[Object(r.jsx)("div",{className:"year-seleted-text",children:f.join("-")}),Object(r.jsx)("div",{className:"time-line-div",children:n.length>0&&Object(r.jsx)(gt,{data:n,onInput:g,onChange:c,setClearBrushTrigger:e,setAnaFilterType:u,anaFilterType:l})})]})]})})})),pt=(n(238),function(){return Object(r.jsx)("div",{children:"ProjectView"})}),bt=(n(239),function(){return Object(r.jsx)("div",{children:"NetworkView"})}),vt=(n(240),function(){return Object(r.jsx)("div",{children:"TopicView"})}),mt=(n(241),function(){return Object(r.jsx)("div",{children:"HighlightListView"})}),xt=(n(242),function(){return Object(r.jsx)("div",{children:"DetaiView"})}),Ot=function(){var t=X();return Object(i.useEffect)((function(){t.initUserId(),t.setCurrentPage(),t.initPapers()}),[]),Object(r.jsxs)("div",{className:"analysis-container",children:[Object(r.jsx)("div",{className:"left-container",children:Object(r.jsx)(jt,{})}),Object(r.jsxs)("div",{className:"middle-container",children:[Object(r.jsx)("div",{className:"middle-top-container",children:Object(r.jsx)(pt,{})}),Object(r.jsx)("div",{className:"middle-bottom-container",children:Object(r.jsx)(bt,{})})]}),Object(r.jsxs)("div",{className:"right-container",children:[Object(r.jsx)("div",{className:"right-top-container",children:Object(r.jsx)(vt,{})}),Object(r.jsx)("div",{className:"right-middle-container",children:Object(r.jsx)(mt,{})}),Object(r.jsx)("div",{className:"right-bottom-container",children:Object(r.jsx)(xt,{})})]})]})},yt=(n(243),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu","KaiChen Nie"]),Ct=n(253),Tt=Ct.a.Option,wt=Object(U.a)((function(){var t=X(),e=t.currentPage,n="Literature ".concat(e," System"),i="Analysis"===e?"management":"analysis",a="Analysis"===e?"Manage":"Analyze",c=function(){return Object(r.jsx)(E.b,{to:i,className:"switch-button",children:a})};return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("div",{className:"title",children:n}),Object(r.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(r.jsx)(Ct.a,{value:t.userId,size:"small",onChange:function(e){t.setUserId(e)},style:{width:130},placeholder:"Set User",children:yt.map((function(t){return Object(r.jsx)(Tt,{value:t,children:t},t)}))}),Object(r.jsx)(c,{})]})]})})),St=function(){return Object(r.jsx)(Y,{children:Object(r.jsx)(E.a,{children:Object(r.jsxs)("div",{className:"view-container",children:[Object(r.jsx)("div",{className:"header-container",children:Object(r.jsx)(wt,{})}),Object(r.jsxs)(M.c,{children:[Object(r.jsx)(M.a,{path:"/management",component:ht}),Object(r.jsx)(M.a,{path:"/analysis",component:Ot}),Object(r.jsx)(M.a,{path:"/",component:ht})]})]})})})},Pt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,258)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),r(t),i(t),a(t),c(t)}))};n(247);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(St,{})}),document.getElementById("root")),Pt()}},[[248,1,2]]]);
//# sourceMappingURL=main.cee41239.chunk.js.map