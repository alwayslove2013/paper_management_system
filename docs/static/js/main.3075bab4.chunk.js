(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{224:function(e,t,n){},225:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),i=n.n(r),c=n(33),s=n.n(c),o=(n(224),n(225),n(17)),l=n(24),u=n(15),d=n.n(u),h=n(35),f=n(7),g=n(22),p=n(123),j=n.n(p),b="http://vis.pku.edu.cn/vis4vis/",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b+e+(e.includes("?")?"&":"?")+j.a.stringify(t);return new Promise((function(e,t){fetch(n).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},m=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("get_papers");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("get_public_tags");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,e.next=3,v("get_private_tags",{uid:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.uid,n=e.pid,a=e.paper,r=a.privateTags,i=a.read;return t&&v("set_private_tags",{uid:t,pid:n,tags:[].concat(Object(l.a)(r),[i&&"read"]).filter((function(e){return e})).join(",")}),"OK"},C=n(25),T={left:15,right:35,top:8,bottom:45},w=15,N=35,S=8,P=25,k=function(e,t,n){return e=e.slice(0,n),t.forEach((function(n){if(!e.includes(n)){for(var a=e.length-1;t.includes(e[a]);)a-=1;e[a]=n}})),e},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};e.forEach((function(e){e.forEach((function(e){e&&(e in n?n[e]+=1:n[e]=1)}))}));var a=[];for(var r in n)a.push({item:r,count:n[r]});return a.sort((function(e,t){return t.count-e.count})),a.slice(0,t).map((function(e){return e.item}))},I={publicTags:function(e){var t=e.pid,n=e.paper.publicTags;return v("set_public_tags",{pid:t,tags:n.join(",")}),"OK"},privateTags:y,read:y},H=function(){return{currentPage:"Management",setCurrentPage:function(){this.currentPage=window.location.pathname.includes("/analysis")?"Analysis":"Management"},tooltipX:500,tooltipY:500,setTooltipPos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.tooltipX=e,this.tooltipY=t},titleSearch:"",setTitleSearch:function(e){this.titleSearch=e.toLocaleLowerCase()},get searchPaperDoiSet(){var e=this,t=this.titleSearch?this.papers.filter((function(t){return t.title.toLocaleLowerCase().indexOf(e.titleSearch)>-1})).map((function(e){return e.doi})):[];return new Set(t)},papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],initPapers:function(){var e=this;return Object(h.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.papers.length){t.next=5;break}return t.next=3,m();case 3:n=t.sent,e.setPapers(n);case 5:case"end":return t.stop()}}),t)})))()},setPapers:function(e){var t=arguments,n=this;return Object(h.a)(d.a.mark((function a(){var r,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"citationCount",console.log("==> \u521d\u59cb\u5316Papers"),i={},e.forEach((function(e){e.privateTags=[],e.read=!1,e.publicTags=[],e.colors=[],e.innerColors=[],e.outerColors=[],e.internalRefList=[],e.internalCitedList=[],e.refList=e.refList.toLowerCase().split(/[,;]/).map((function(e){return e.trim()})),i[e.doi]=e,e.authors=e.authors.split(";").map((function(e){return e.trim().replace(/\{(.*)\}/,"$1")})),e.countries=e.countries.split(";").map((function(e){var t=e.trim().split(" ").map((function(e){return e.trim()})).filter((function(e){return e}));return 0===t.length?"":t[t.length-1].toLowerCase().replace(/^\w/,(function(e){return e.toUpperCase()}))})).filter((function(e){return e})),e.keywords=e.keywords.split(/[;,]/).map((function(e){return e.trim().toLowerCase()}))})),e.forEach((function(e){e.refList.forEach((function(t){t in i&&(i[t].internalCitedList.push(e.doi),e.internalRefList.push(t))}))})),n.commonAuthors=A(e.map((function(e){return e.authors})),30),n.commonCountries=A(e.map((function(e){return e.countries})),30),e.sort((function(e,t){return t[r]-e[r]})),n.computedPosition(e),a.next=11,n.initPublicTags(e);case 11:Object(g.d)((function(){n.papers=e,n.initPrivateTags()}));case 12:case"end":return a.stop()}}),a)})))()},setPaper:function(e,t,n){var a=this.papers.find((function(t){return t.doi===e}));a[t]=n,console.log("==> \u66f4\u65b0paper\u6570\u636e by doi:",e,t,n),I[t]({uid:this.userId,pid:e,paper:Object(g.e)(a)}),this.doiUpdateColors(e)},unitXAttr:"year",get unitXAttrList(){var e=this,t=new Set;this.papers.forEach((function(n){t.add(n[e.unitXAttr])}));var n=Array.from(t);return n.sort((function(e,t){return t-e})),n},unitYAttr:"conferenceName",get unitYAttrList(){return["SciVis","InfoVis","EuroVis","VAST","PacificVis"]},maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(e){var t=this,n={};e.forEach((function(e){var a=e[t.unitXAttr],r=e[t.unitYAttr];a in n||(n[a]={}),r in n[a]||(n[a][r]=0),e.unitIndex=n[a][r],n[a][r]+=1})),this.maxUnitBlockPaperCount=.6*Math.max.apply(Math,Object(l.a)(e.map((function(e){return e.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(e){var t=this;return Object(h.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x();case 2:a=n.sent,e.forEach((function(e){e.doi in a&&(e.publicTags=a[e.doi].filter((function(e){return e})))})),Object(g.d)((function(){t.commonPublicTags=A(Object.values(a),30)}));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var e=this;return Object(h.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O({uid:e.userId});case 2:n=t.sent,Object(g.d)((function(){e.papers.forEach((function(e){if(e.doi in n){var t=n[e.doi].indexOf("read");t>-1&&(e.read=!0,n[e.doi].splice(t,1)),e.privateTags=n[e.doi].filter((function(e){return e}))}})),e.commonPrivateTags=A(Object.values(n),30)})),e.batchUpdateColors();case 5:case"end":return t.stop()}}),t)})))()},userId:"",setUserId:function(e){e!==this.userId&&(this.userId=e,console.log("==> change userId:",this.userId),localStorage.setItem("paper-management-system-userId",e),e&&this.initPrivateTags())},initUserId:function(){if(0===this.userId.length){var e=localStorage.getItem("paper-management-system-userId");e&&this.setUserId(e)}},get controlTagNameList(){return this.generateCategory(10)},get anaCategories(){return this.generateCategory(18,!0)},get commonKeywords(){return A(this.papers.map((function(e){return e.keywords})),30)},generateCategory:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=k(this.commonCountries,["Japan","Korea"],e),a=k(this.commonAuthors,["Xiaoru Yuan"],e),r=k(this.commonPrivateTags,t?["read"]:[],e),i=k(this.commonPublicTags,[],e),c=k(this.commonKeywords,[],e);return[{label:"Country",value:"countries",list:n,highlightType:"outer"},{label:"Author",value:"authors",list:a,highlightType:"inner"},{label:"Keywords",value:"keywords",list:c,highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:r,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:i,highlightType:"inner"}]},get category2highlightType(){var e={};return this.controlTagNameList.forEach((function(t){e[t.value]=t.highlightType})),e},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[],keywords:[]},get controlIsActive(){var e=!1;for(var t in this.activeTags)this.activeTags[t].length>0&&(e=!0);return e},get isUnitOuterHighlight(){var e=this,t=this.controlTagNameList.filter((function(e){return"outer"===e.highlightType})).map((function(e){return e.value})),n=!1;return t.forEach((function(t){e.activeTags[t].length>0&&(n=!0)})),n},tag2color:{},colorUse:{},setTagColor:function(e,t){console.log("==> \u8bbe\u7f6etag\u989c\u8272:",t,e);var n="".concat(t,"---").concat(e);if(n in this.tag2color)this.colorUse[this.tag2color[n]]=!1,delete this.tag2color[n],this.activeTags[t]=Object(l.a)(this.activeTags[t]).filter((function(t){return t!==e}));else{this.activeTags[t].push(e);for(var a=0,r=f.k[a];this.colorUse[r];){if(10===(a+=1)){r="black";break}r=f.k[a]}this.tag2color[n]=r,this.colorUse[r]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var e=this;this.papers.forEach((function(t){t.colors=[],t.innerColors=[],t.outerColors=[],e.updateColor(t)}))},doiUpdateColors:function(e){var t=this.papers.find((function(t){return t.doi===e}));t.colors=[],t.innerColors=[],t.outerColors=[],this.updateColor(t)},updateColor:function(e){var t=this;this.activeTags.privateTags.indexOf("read")>-1&&e.read&&(e.colors.push(this.tag2color["privateTags---read"]),e.innerColors.push(this.tag2color["privateTags---read"]));var n=function(n){var a=t.activeTags[n];"inner"===t.category2highlightType[n]?a.forEach((function(a){if(e[n].indexOf(a)>-1){var r="".concat(n,"---").concat(a);e.innerColors.push(t.tag2color[r])}})):a.forEach((function(a){if(e[n].indexOf(a)>-1){var r="".concat(n,"---").concat(a);e.outerColors.push(t.tag2color[r])}})),a.forEach((function(a){if(e[n].indexOf(a)>-1){var r="".concat(n,"---").concat(a);e.colors.push(t.tag2color[r])}}))};for(var a in this.activeTags)n(a)},maxCitationCount:200,currentSelected:"",currentSelectedRefSet:new Set,currentSelectedCitedSet:new Set,isSelected:!1,setCurrentSelected:function(e){console.log("==> \u9009\u4e2d\u6587\u7ae0:",e),this.currentSelected=e,this.isSelected=!!e;var t=this.papers.find((function(t){return t.doi===e}));this.currentSelectedRefSet=new Set(t.internalRefList),this.currentSelectedCitedSet=new Set(t.internalCitedList)},cancelSelect:function(){console.log("==> \u70b9\u51fb\u80cc\u666f\uff0c\u53d6\u6d88\u8bba\u6587\u9009\u4e2d\u72b6\u6001"),this.isSelected=!1},get currentSelectedPaper(){var e=this;return this.papers.find((function(t){return t.doi===e.currentSelected}))},get analysisPapers(){return this.controlIsActive?this.papers.filter((function(e){return e.innerColors.length>0||e.outerColors.length>0})):this.papers},get anaTimeData(){var e=this;return this.unitXAttrList.map((function(e){return+e})).sort().map((function(t){return{x:t,all:e.analysisPapers.filter((function(e){return+e.year===t})).length,highlight:e.anaHighPapers.filter((function(e){return+e.year===t})).length}}))},get anaTagViewData(){var e=this;return this.anaCategories.map((function(t){return{label:t.label,value:t.value,data:t.list.map((function(n){return"read"===n?{label:"read",all:e.analysisPapers.filter((function(e){return e.read})).length,highlight:e.anaHighPapers.filter((function(e){return e.read})).length}:{label:n,all:e.analysisPapers.filter((function(e){return e[t.value].includes(n)})).length,highlight:e.anaHighPapers.filter((function(e){return e[t.value].includes(n)})).length}}))}}))},anaFilterType:"none",setAnaFilterType:function(e){console.log("setAnaFilterType",e),this.anaFilterType=e},clearBrushTrigger:function(){},setClearBrushTrigger:function(e){this.clearBrushTrigger=e},anaHighCate:"",anaHighTag:"",anaHighPapers:[],setAnaHighPapersByTag:function(e){var t=e.anaHighCate,n=e.anaHighTag;console.log("setAnaHighPapersByTag",t,n),this.clearBrushTrigger(),this.anaHighCate=t,this.anaHighTag=n,this.anaHighPapers=this.analysisPapers.filter((function(e){return Object(C.get)(e,t,[]).includes(n)}))},setAnaHighPapersByYear:function(e){console.log("setAnaHighPapersByYear",e);var t=Object(o.a)(e,2),n=t[0],a=t[1];this.anaHighPapers=this.analysisPapers.filter((function(e){return+e.year>=n&&+e.year<=a}))},anaSelectHighlightPaper:{},setAnaSelectHighlightPaper:function(e){console.log("setAnaSelectHighlightPaper",Object(g.e)(e)),this.anaSelectHighlightPaper=e}}},L=n(250),B=i.a.createContext(null),Y=function(e){var t=e.children,n=Object(L.a)(H);return Object(a.jsx)(B.Provider,{value:n,children:t})},X=function(){var e=i.a.useContext(B);if(!e)throw new Error("no Provider");return e},E=n(70),M=n(16),U=(n(229),n(254)),F=(n(230),n(73)),_=function(){var e=X(),t=Object(C.debounce)((function(t){e.setTitleSearch(t.target.value)}),200);return Object(a.jsxs)("div",{className:"search-view",children:[Object(a.jsx)("div",{className:"search-view-input",children:Object(a.jsx)("input",{onInput:t})}),Object(a.jsx)("div",{className:"search-view-icon",children:Object(a.jsx)(F.a,{})})]})},D=Object(U.a)((function(){var e=X().controlTagNameList;return Object(a.jsxs)("div",{className:"control-view",children:[Object(a.jsxs)("div",{className:"control-item",children:[Object(a.jsx)("div",{className:"control-item-title",children:"Title Search"}),Object(a.jsx)("div",{className:"control-item-options",children:Object(a.jsx)(_,{searchAttr:"title"})})]}),e.map((function(e){return Object(a.jsx)(V,{tagData:e},e.label)}))]})})),V=Object(U.a)((function(e){var t=e.tagData,n=X(),i=n.tag2color,c=Object(r.useState)([]),s=Object(o.a)(c,2),u=s[0],d=s[1];Object(r.useEffect)((function(){var e=Object.keys(i).filter((function(e){return e.split("---")[0]===t.value})).map((function(e){return e.split("---")[1]})).filter((function(e){return t.list.indexOf(e)>-1}));d(e)}),[]);var h=function(e){var a=Object(l.a)(u),r=a.indexOf(e);r>-1?(a.splice(r,1),d(a)):(a.push(e),d(a)),n.setTagColor(e,t.value)};return Object(a.jsxs)("div",{className:"control-item",children:[Object(a.jsx)("div",{className:"control-item-title",children:t.label}),Object(a.jsx)("div",{className:"control-item-options",children:t.list.map((function(e){return Object(a.jsx)(z,{value:e,clickOption:h,isSelect:u.indexOf(e)>-1&&i["".concat(t.value,"---").concat(e)]},e)}))})]})})),z=function(e){var t=e.value,n=e.clickOption,r=e.isSelect,i=["control-item-option",r&&"option-active"].filter((function(e){return e})).join(" "),c=r?{background:r,border:"1px solid ".concat(r)}:{},s="Usa"===t?"USA":t;return Object(a.jsx)("div",{className:i,onClick:function(){return n(t)},style:c,children:s})},R=(n(231),i.a.memo((function(e){var t=e.cx,n=e.cy,r=e.r,i=e.opacity,c=e.doi,s=e.handleClick,o=e.title,l=e.innerColors,u=e.outerColors,d=e.isBackgroundActive,h=e.handleHover,f=e.handleHoverOut,g=function(e){return t+Math.sin(e)*r},p=function(e){return n+Math.cos(e)*r},j=2*Math.PI/l.length,b=l.map((function(e,t){return{startX:g(j*t),startY:p(j*t),endX:g(j*(t+1)),endY:p(j*(t+1))}})),v=1.5*r,m=function(e){return t+Math.sin(e)*v},x=function(e){return n+Math.cos(e)*v},O=2*Math.PI/u.length,y=u.map((function(e,t){return{startX:m(O*t),startY:x(O*t),endX:m(O*(t+1)),endY:x(O*(t+1))}}));return Object(a.jsxs)("g",{id:"unit-g",onClick:function(e){return s(e,c)},cursor:"pointer",onMouseEnter:function(){return h(c)},onMouseLeave:function(){return f()},children:[Object(a.jsx)("title",{children:o}),d&&Object(a.jsxs)("g",{id:"unit-background-g",children:[Object(a.jsx)("rect",{x:t-1.6*r,y:n-1.6*r,width:3.2*r,height:3.2*r,fill:"#fc8d62",rx:.4*r,ry:.4*r}),Object(a.jsx)("circle",{cx:t,cy:n,r:1.3*r,fill:"#eee"})]}),Object(a.jsxs)("g",{id:"unit-border-g",children:[y.length>1?y.map((function(e,r){return Object(a.jsx)("path",{d:"M ".concat(t," ").concat(n,"\n              L ").concat(e.startX," ").concat(e.startY,"\n              A ").concat(v," ").concat(v," 0 0 0 ").concat(e.endX," ").concat(e.endY,"\n              Z\n              "),fill:u[r]},r)})):Object(a.jsx)("circle",{cx:t,cy:n,r:v,fill:u.length>0?u[0]:"none"}),Object(a.jsx)("circle",{cx:t,cy:n,r:1.1*r,fill:"white",opacity:y.length>0?1:0})]}),Object(a.jsx)("g",{id:"unit-sector-g",opacity:i,children:b.length>1?b.map((function(e,i){return Object(a.jsx)("path",{d:"M ".concat(t," ").concat(n,"\n              L ").concat(e.startX," ").concat(e.startY,"\n              A ").concat(r," ").concat(r," 0 0 0 ").concat(e.endX," ").concat(e.endY,"\n              Z\n              "),stroke:"white",fill:l[i],strokeWidth:.1*r},i)})):Object(a.jsx)("circle",{cx:t,cy:n,r:r,fill:l[0]})})]})}))),K=function(e){var t=e.isShow,n=e.paper,r=e.paperCircle,i=e.containerWidth,c=e.containerHeight,s=r.cx/i,o=.25*i,l=r.cx-o*s,u=r.cy+15,d=r.cy+200>c?"translateY(-150%)":"",h={transform:"translate(".concat(l,"px,").concat(u,"px) ").concat(d),opacity:t?1:0};return Object(a.jsxs)("div",{className:"unit-tooltip",style:h,children:[Object(a.jsx)("div",{className:"unit-tooltip-title",children:Object(C.get)(n,"title","")}),Object(a.jsxs)("div",{className:"unit-tooltip-authors",children:[Object(C.get)(n,"authors",[]).join("; ")," (",n.year,")"]})]})},W=30,J=40,Z=15,q=1,G=2,$=3,Q=3,ee=1,te=Object(U.a)((function(){var e=X(),t=e.papers,n=e.unitXAttr,i=e.unitYAttr,c=e.unitXAttrList,s=e.unitYAttrList,u=e.unitBlockCount,d=e.maxUnitBlockPaperCount,h=e.controlIsActive,p=e.isUnitOuterHighlight,j=e.currentSelected,b=e.setCurrentSelected,v=e.isSelected,m=e.cancelSelect,x=e.currentSelectedRefSet,O=e.currentSelectedCitedSet,y=e.searchPaperDoiSet,T=Object(r.useState)(0),w=Object(o.a)(T,2),N=w[0],S=w[1],P=Object(r.useState)(0),k=Object(o.a)(P,2),A=k[0],I=k[1];Object(r.useEffect)((function(){var e=document.querySelector("#unit-svg");S(e.clientWidth-J-Z),I(e.clientHeight-W-q)}),[]);for(var H,L=c.length>0?N/c.length-$-Q:0,B=s.length>0?A/s.length-G-ee:0,Y=Math.floor(L>0?B/L:1),E=Math.ceil(Math.sqrt(d/Y)),M=c.map((function(e,t){var n=Math.max.apply(Math,Object(l.a)(s.map((function(t,n){return Object(C.get)(u,[e,t],0)})))),a=Math.ceil(Math.sqrt(d/Y));return n>d&&(a+=1),a})),U=[0],F=[0],_=1;_<c.length;_++)U.push(U[_-1]+M[_-1]);H=(N-($+Q)*c.length)/(U[U.length-1]+M[M.length-1]);for(var D=1;D<c.length;D++)F.push(U[D]*H+($+Q)*D);var V=f.j().domain([0,100]).range([.25,.8]),z=t.map((function(e){var t={};t.oriData=Object(g.e)(e),t.BlockIndexX=c.indexOf(e[n]),t.BlockIndexY=s.indexOf(e[i]);var a,r=e.doi;return t.doi=r,t.circleIndexX=e.unitIndex%M[t.BlockIndexX],t.circleIndexY=Math.floor(e.unitIndex/M[t.BlockIndexX]),t.cx=J+t.BlockIndexX*(L+$+Q)+(t.circleIndexX+.5)*H,t.cy=W+t.BlockIndexY*(B+G+ee)+(t.circleIndexY+.5)*H,"2004"===e.year&&t.BlockIndexY>0&&(t.cy+=50-10*t.BlockIndexY),t.cx=J+F[t.BlockIndexX]+(t.circleIndexX+.5)*H,t.citationGrey=(a=e.citationCount,f.e(V(a))),t.activeColors=e.innerColors,t.innerColors=t.activeColors.length>0?t.activeColors:[t.citationGrey],t.outerColors=["none"],p?t.outerColors=e.outerColors:v?(j===e.doi&&(t.outerColors=["#d95f02"]),x.has(e.doi)&&(t.outerColors=["#1b9e77"]),O.has(e.doi)&&(t.outerColors=["#7570b3"])):t.outerColors=["none"],t.opacity=h?e.innerColors.length+e.outerColors.length>0?.8:.4:.8,t.title=e.Title,v?(j===e.doi&&(t.borderColor="#d95f02"),x.has(e.doi)&&(t.borderColor="#1b9e77"),O.has(e.doi)&&(t.borderColor="#7570b3")):t.borderColor="none",t.isBackgroundActive=y.has(e.doi),t})),te=c.map((function(e,t){return{value:e,x:J+F[t]+M[t]*H/2,y:.8*W}})),ne=s.map((function(e,t){return{value:e,x:.35*J,y:W+(B+G+ee)*t}})),ae=function(e,t){e.stopPropagation(),b(t)},re=Object(r.useState)(""),ie=Object(o.a)(re,2),ce=ie[0],se=ie[1],oe=ce.length>0?t.find((function(e){return e.doi===ce})):{},le=ce.length>0?z.find((function(e){return e.doi===ce})):{},ue=function(e){console.log("===> hover",e),se(e)},de=function(){console.log("===> mouse leave"),se("")};return Object(a.jsxs)("div",{className:"unit-view",children:[Object(a.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",onClick:function(){m()},children:[Object(a.jsx)("g",{id:"units",children:H>0&&z.map((function(e,t){return Object(a.jsx)(R,{cx:e.cx,cy:e.cy,r:H/2.4,doi:e.doi,colors:e.colors,opacity:e.opacity,innerColors:e.innerColors,outerColors:e.outerColors,handleClick:ae,borderOpacity:e.borderOpacity,borderColor:e.borderColor,title:e.title,isBackgroundActive:e.isBackgroundActive,handleHover:ue,handleHoverOut:de},t)}))}),Object(a.jsx)("g",{id:"x-label",children:H>0&&te.map((function(e){return Object(a.jsx)("text",{x:e.x,y:e.y,textAnchor:"middle",fontSize:1.6*H,fill:"rgb(78, 78, 78)",children:e.value},e.value)}))}),Object(a.jsx)("g",{id:"y-label",children:H>0&&ne.map((function(e){return Object(a.jsx)("text",{transform:"translate(".concat(e.x,", ").concat(e.y,") rotate(90)"),fontSize:1.6*H,fill:"rgb(78, 78, 78)",children:e.value},e.value)}))})]}),Object(a.jsx)(K,{isShow:ce.length>0,paper:oe,containerWidth:N,containerHeight:A,paperCircle:le})]})})),ne=(n(232),n(257)),ae=n(138),re=n(72),ie=n(251),ce=n(255),se=n(256),oe=Object(U.a)((function(){var e=X(),t=e.currentSelectedPaper,n=e.setPaper,r=t;if(console.log("currentSelectedPaper",Object(g.e)(t)),!t)return Object(a.jsx)("div",{});var i=Object(C.get)(r,"doi",""),c=[{title:"Private Tags",value:"privateTags",initTags:Object(C.get)(r,"privateTags",[])},{title:"Public Tags",value:"publicTags",initTags:Object(C.get)(r,"publicTags",[])}];return Object(a.jsx)("div",{className:"detail-view",children:r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"detail-title",children:r.title}),Object(a.jsxs)("div",{className:"detail-authors",children:[Object(C.get)(r,"authors",[]).join("; ")," (",r.year,")"]}),Object(a.jsxs)("div",{className:"detail-edit-tags",children:[Object(a.jsxs)("div",{className:"detail-edit-read",children:[Object(a.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(a.jsx)(ne.a,{size:"small",checkedChildren:Object(a.jsx)(ae.a,{}),unCheckedChildren:Object(a.jsx)(re.a,{}),defaultChecked:Object(C.get)(r,"read",!1),onChange:function(e){n(i,"read",e)}})]}),c.map((function(e){return Object(a.jsx)(ue,{title:e.title,initTags:e.initTags,handleChangeTags:function(t){return function(e,t){i&&n(i,e,t)}(e.value,t)}},e.value)}))]}),Object(a.jsxs)("div",{className:"detail-attrs",children:[Object(a.jsx)(le,{paper:r,label:"keywords"}),Object(a.jsx)(le,{paper:r,label:"doi"}),Object(a.jsx)(le,{paper:r,label:"affiliation"}),Object(a.jsx)(le,{paper:r,label:"abstract"})]})]})},i)})),le=function(e){var t=e.paper,n=e.label;return Object(a.jsxs)("div",{className:"detail-attr",children:[Object(a.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(a.jsx)("div",{className:"detail-content",children:Object(C.get)(t,n,"")})]})},ue=function(e){var t=e.title,n=e.initTags,i=e.handleChangeTags,c=Object(r.useState)(n),s=Object(o.a)(c,2),u=s[0],d=s[1],h=function(e){i(e),d(e)},f=Object(r.useState)(-1),g=Object(o.a)(f,2),p=g[0],j=g[1],b=Object(r.useRef)(),v=Object(r.useState)(""),m=Object(o.a)(v,2),x=m[0],O=m[1],y=function(){var e=Object(l.a)(u);e[p]=x,h(e),j(-1),O("")},C=Object(r.useState)(""),T=Object(o.a)(C,2),w=T[0],N=T[1],S=function(){w&&u.indexOf(w)<0&&(h([].concat(Object(l.a)(u),[w])),I(!1),N(""))},P=Object(r.useState)(!1),k=Object(o.a)(P,2),A=k[0],I=k[1];return Object(a.jsxs)("div",{className:"detail-edit-tag",children:[Object(a.jsxs)("div",{className:"detail-edit-title",children:[t,":"]}),Object(a.jsx)("div",{className:"detail-edit-tags",children:Object(a.jsxs)(a.Fragment,{children:[u.map((function(e,t){return p===t?Object(a.jsx)(ie.a,{size:"small",className:"tag-input",value:x,onchange:function(e){return O(e.target.value)},onBlur:y,onPressEnter:y},e):Object(a.jsx)(ce.a,{className:"edit-tag",closable:!0,onClose:function(){return t=e,void h(u.filter((function(e){return e!==t})));var t},children:Object(a.jsx)("span",{children:e})},e)})),A&&Object(a.jsx)(ie.a,{ref:b,type:"text",size:"small",className:"tag-input",value:w,onChange:function(e){return N(e.target.value)},onBlur:S,onPressEnter:S}),!A&&Object(a.jsxs)(ce.a,{className:"site-tag-plus",onClick:function(){I(!0)},children:[Object(a.jsx)(se.a,{})," New Tag"]})]})})]})},de=function(){var e=X();return Object(r.useEffect)((function(){e.setCurrentPage(),e.initPapers(),e.initUserId()}),[]),Object(a.jsxs)("div",{className:"main-container",children:[Object(a.jsxs)("div",{className:"control-main-container",children:[Object(a.jsx)("div",{className:"control-view-container",children:Object(a.jsx)(D,{})}),Object(a.jsx)("div",{className:"unit-view-container",children:Object(a.jsx)(te,{})})]}),Object(a.jsx)("div",{className:"detail-view-container",children:Object(a.jsx)(oe,{})})]})},he=(n(234),n(235),n(236),function(e){var t=e.svgId,n=Object(r.useState)({width:0,height:0}),a=Object(o.a)(n,2),i=a[0],c=a[1];return Object(r.useEffect)((function(){var e=f.l("#".concat(t));e.selectAll("*").remove();var n=e.node().getClientRects()[0];c(n)}),[t]),i}),fe=i.a.memo((function(e){var t=e.label,n=void 0===t?"label":t,i=e.value,c=void 0===i?"":i,s=e.data,o=void 0===s?[]:s,l=e.setAnaHighPapersByTag,u=void 0===l?function(){}:l,d=e.anaFilterType,h=e.setAnaFilterType,g=void 0===h?function(){}:h,p="ana-tag-filter-svg-".concat(n.replaceAll(/\W/g,"")),j=f.l("#".concat(p)),b=he({svgId:p}),v=b.width,m=b.height,x=T;return Object(r.useEffect)((function(){}),[]),Object(r.useEffect)((function(){if(0!==o.length&&0!==v&&0!==m){j.selectAll("*").remove(),o=o.filter((function(e){return e.all>0})),o=f.m(o,(function(e,t){return e.all-t.all}));var e=f.i().domain(o.map((function(e){return e.label}))).range([x.left,v-x.right]).padding(.2),t=f.j().domain([0,f.f(o,(function(e){return e.all}))]).nice().range([m-x.bottom,x.top]);j.append("g").classed("non-active-bars",!0).selectAll("rect").data(o).join("rect").attr("x",(function(t){return e(t.label)})).attr("y",(function(e){return t(e.all)})).attr("height",(function(e){return t(0)-t(e.all)})).attr("width",e.bandwidth()).style("cursor","pointer").on("click",(function(e,t){g("tag"),u({anaHighCate:c,anaHighTag:t.label})})),"none"!==d&&j.append("g").classed("active-bars",!0).selectAll("rect").data(o).join("rect").attr("x",(function(t){return e(t.label)})).attr("y",(function(e){return t(e.highlight)})).attr("height",(function(e){return t(0)-t(e.highlight)})).attr("width",e.bandwidth()).style("pointer-events","none"),j.append("g").attr("class","x-axis").call((function(t){return t.attr("transform","translate(0, "+(m-x.bottom)+")").call(f.a(e).tickSizeOuter(0)).call((function(e){return e.selectAll("text").attr("transform","rotate(-28)").style("text-anchor","end")}))})),j.append("g").attr("class","y-axis").call((function(e){return e.attr("transform","translate(".concat(v-x.right,",0)")).call(f.b(t).ticks(5)).call((function(e){return e.select(".domain").remove()}))}))}})),Object(a.jsx)("svg",{id:p,width:"100%",height:"100%"})})),ge=(n(237),i.a.memo((function(e){var t=e.data,n=e.onInput,i=void 0===n?function(){}:n,c=e.onChange,s=void 0===c?function(){}:c,o=e.setClearBrushTrigger,l=void 0===o?function(){}:o,u=e.anaFilterType,d=e.setAnaFilterType,h=void 0===d?function(){}:d,g=he({svgId:"ana-time-line-svg"}),p=g.width,j=g.height,b=[f.g(t,(function(e){return e.x})),f.f(t,(function(e){return e.x}))];return Object(r.useEffect)((function(){i(b)}),[t]),Object(r.useEffect)((function(){if(0!==t.length&&0!==p&&0!==j){var e=f.i().domain(t.map((function(e){return e.x}))).range([w,p-N]).padding(.2),n=f.j().domain([0,f.f(t,(function(e){return e.all}))]).nice().range([j-P,S]),a=f.l("#ana-time-line-svg"),r=a.append("g").classed("non-active-bars",!0).selectAll("rect").data(t).join("rect").attr("x",(function(t){return t.rectX=e(t.x)})).attr("y",(function(e){return n(e.all)})).attr("height",(function(e){return n(0)-n(e.all)})).attr("width",e.bandwidth());a.append("g").classed("active-bars",!0).classed("highlight-bars",!0);a.append("g").attr("class","x-axis").call((function(t){return t.attr("transform","translate(0, "+(j-P)+")").call(f.a(e).tickValues(f.h(b[0],b[1],5)).tickSizeOuter(0))})),a.append("g").attr("class","y-axis").call((function(e){return e.attr("transform","translate(".concat(p-N,",0)")).call(f.b(n).ticks(6)).call((function(e){return e.select(".domain").remove()}))}));var c=f.d().extent([[w,.3*S],[p-N,j-P]]).on("start",(function(){h("year")})).on("brush",(function(n){var a=n.selection;r.classed("active-bars",(function(t){return t.rectX+e.bandwidth()>a[0]&&t.rectX<a[1]}));var c=t.filter((function(t){return t.rectX+e.bandwidth()>a[0]&&t.rectX<a[1]})).map((function(e){return e.x}));c.length>=1?i([c[0],c[c.length-1]]):i(b)})).on("end",(function(n){var a=n.selection;if(a){var c=t.filter((function(t){return t.rectX+e.bandwidth()>a[0]&&t.rectX<a[1]})).map((function(e){return e.x}));c.length>=1?s([c[0],c[c.length-1]]):s(b)}else r.classed("active-bars",!1),i(b),h("none"),s(b)}));a.call(c),l((function(){f.c().move(a),r.classed("active-bars",!1)}))}}),[g]),Object(r.useEffect)((function(){if(0!==p&&0!==j&&"year"!==u&&"none"!==u){var e=f.l("#ana-time-line-svg").select(".highlight-bars"),n=f.i().domain(t.map((function(e){return e.x}))).range([w,p-N]).padding(.2),a=f.j().domain([0,f.f(t,(function(e){return e.all}))]).nice().range([j-P,S]);e.selectAll("rect").data(t).join("rect").attr("x",(function(e){return n(e.x)})).attr("y",(function(e){return a(e.highlight)})).attr("height",(function(e){return a(0)-a(e.highlight)})).attr("width",n.bandwidth())}}),[t,u]),Object(a.jsx)("svg",{id:"ana-time-line-svg",width:"100%",height:"100%"})}))),pe=Object(U.a)((function(){var e=X(),t=e.setClearBrushTrigger,n=e.anaTimeData,i=e.anaTagViewData,c=e.setAnaHighPapersByYear,s=e.setAnaHighPapersByTag,l=e.anaFilterType,u=e.setAnaFilterType,d=Object(r.useState)([0,0]),h=Object(o.a)(d,2),f=h[0],g=h[1];return Object(a.jsx)("div",{className:"tag-view-container",children:Object(a.jsxs)(a.Fragment,{children:[i.map((function(e){return Object(a.jsxs)("div",{className:"tag-filter-container",children:[Object(a.jsx)("div",{className:"tag-filter-label",children:e.label}),Object(a.jsx)("div",{className:"tag-filter-div",children:e.data.length>0&&Object(a.jsx)(fe,{label:e.label,value:e.value,data:e.data,setAnaFilterType:u,setAnaHighPapersByTag:s,anaFilterType:l})})]},e.value)})),Object(a.jsxs)("div",{className:"tag-filter-container",children:[Object(a.jsx)("div",{className:"year-seleted-text",children:f.join("-")}),Object(a.jsx)("div",{className:"time-line-div",children:n.length>0&&Object(a.jsx)(ge,{data:n,onInput:g,onChange:c,setClearBrushTrigger:t,setAnaFilterType:u,anaFilterType:l})})]})]})})})),je=(n(238),function(){return Object(a.jsx)("div",{children:"ProjectView"})}),be=(n(239),function(){return Object(a.jsx)("div",{children:"NetworkView"})}),ve=(n(240),function(){return Object(a.jsx)("div",{children:"TopicView"})}),me=(n(241),Object(U.a)((function(){var e=X(),t=e.anaHighPapers,n=e.setAnaSelectHighlightPaper;return Object(a.jsx)("div",{className:"highlight-list-view",children:t.map((function(e,t){return Object(a.jsx)(xe,{paper:e,index:t,handleClick:n},e.doi)}))})}))),xe=function(e){var t=e.paper,n=e.index,r=e.handleClick,i=void 0===r?function(){}:r;return Object(a.jsxs)("div",{className:"paper-item",onClick:function(){return i(t)},children:[Object(a.jsxs)("div",{className:"paper-index",children:[n+1,"."]}),Object(a.jsxs)("div",{className:"paper-content",children:[Object(a.jsxs)("div",{className:"paper-header",children:[Object(a.jsx)("div",{className:"paper-header-conferenceName",children:t.conferenceName}),Object(a.jsx)("div",{className:"paper-header-title",children:t.title})]}),Object(a.jsxs)("div",{className:"paper-details",children:[t.authors.join("; ")," (",t.year,")"]}),Object(a.jsx)("div",{className:"paper-tags",children:[].concat(Object(l.a)(t.keywords),Object(l.a)(t.publicTags),Object(l.a)(t.privateTags)).join("; ")})]})]})},Oe=me,ye=(n(242),Object(U.a)((function(){var e=X().anaSelectHighlightPaper,t=e.conferenceName,n=void 0===t?"":t,r=e.year,i=void 0===r?"":r,c=e.title,s=void 0===c?"":c,o=e.authors,l=void 0===o?[]:o,u=e.keywords,d=void 0===u?[]:u,h=e.abstract,f=void 0===h?"":h;return e.title?Object(a.jsxs)("div",{className:"detail-paper-view",children:[Object(a.jsx)("div",{className:"paper-title",children:s}),Object(a.jsxs)("div",{className:"paper-details",children:[l.join("; "),Object(a.jsx)("span",{className:"paper-header",children:i&&"(".concat(n," ").concat(i,")")})]}),Object(a.jsxs)("div",{className:"paper-info",children:[Object(a.jsx)("span",{className:"paper-info-title",children:"Keywords:"}),Object(a.jsx)("span",{className:"paper-info-content",children:d.join("; ")})]}),Object(a.jsxs)("div",{className:"paper-info",children:[Object(a.jsx)("span",{className:"paper-info-title",children:"Abstract:"}),Object(a.jsx)("span",{className:"paper-info-content",children:f})]})]}):Object(a.jsx)("div",{})}))),Ce=function(){var e=X();return Object(r.useEffect)((function(){e.setCurrentPage(),e.initPapers(),e.initUserId()}),[]),Object(a.jsxs)("div",{className:"analysis-container",children:[Object(a.jsx)("div",{className:"left-container",children:Object(a.jsx)(pe,{})}),Object(a.jsxs)("div",{className:"middle-container",children:[Object(a.jsx)("div",{className:"middle-top-container",children:Object(a.jsx)(je,{})}),Object(a.jsx)("div",{className:"middle-bottom-container",children:Object(a.jsx)(be,{})})]}),Object(a.jsxs)("div",{className:"right-container",children:[Object(a.jsx)("div",{className:"right-top-container",children:Object(a.jsx)(ve,{})}),Object(a.jsx)("div",{className:"right-middle-container",children:Object(a.jsx)(Oe,{})}),Object(a.jsx)("div",{className:"right-bottom-container",children:Object(a.jsx)(ye,{})})]})]})},Te=(n(243),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu","KaiChen Nie"]),we=n(253),Ne=we.a.Option,Se=Object(U.a)((function(){var e=X(),t=e.currentPage,n="Literature ".concat(t," System"),r="Analysis"===t?"management":"analysis",i="Analysis"===t?"Manage":"Analyze",c=function(){return Object(a.jsx)(E.b,{to:r,className:"switch-button",children:i})};return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{className:"title",children:n}),Object(a.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(a.jsx)(we.a,{value:e.userId,size:"small",onChange:function(t){e.setUserId(t)},style:{width:130},placeholder:"Set User",children:Te.map((function(e){return Object(a.jsx)(Ne,{value:e,children:e},e)}))}),Object(a.jsx)(c,{})]})]})})),Pe=function(){return Object(a.jsx)(Y,{children:Object(a.jsx)(E.a,{basename:"/vis_paper_management",children:Object(a.jsxs)("div",{className:"view-container",children:[Object(a.jsx)("div",{className:"header-container",children:Object(a.jsx)(Se,{})}),Object(a.jsxs)(M.c,{children:[Object(a.jsx)(M.a,{exact:!0,path:"/management",component:de}),Object(a.jsx)(M.a,{exact:!0,path:"/analysis",component:Ce}),Object(a.jsx)(M.a,{path:"/",component:de})]})]})})})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,258)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};n(247);s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Pe,{})}),document.getElementById("root")),ke()}},[[248,1,2]]]);
//# sourceMappingURL=main.3075bab4.chunk.js.map