{"version":3,"sources":["Server/index.js","Common/svgPadding.js","Common/mustInclude.js","Common/mostCommon.js","Store/createStoreV0128.js","Store/index.js","Pages/ManagePage/SearchView/index.js","Pages/ManagePage/ControlView/index.js","Pages/ManagePage/UnitView/CircleUnit.js","Pages/ManagePage/UnitView/PaperTooltip.js","Pages/ManagePage/UnitView/index.js","Pages/ManagePage/DetailView/index.js","Pages/ManagePage/index.js","Hooks/useClientRect.js","Components/TimeLine/index.js","Pages/AnalysisPage/TagView-Hor/TagFilter/index.js","Pages/AnalysisPage/TagView-Hor/index.js","Pages/AnalysisPage/ProjectView-New/index.js","Common/find_d.js","Pages/AnalysisPage/NetworkView-New/index.js","Pages/AnalysisPage/TopicView/index.js","Pages/AnalysisPage/HighlightListView/index.js","Pages/AnalysisPage/DetailView/index.js","Pages/AnalysisPage/index.js","Common/userList.js","Components/Header/index.js","App.js","reportWebVitals.js","index.js"],"names":["baseUrl","fetchData","url","params","getUrl","includes","qs","stringify","Promise","resolve","reject","fetch","then","res","json","data","catch","err","getPapers","a","getPublicTags","getPrivateTags","uid","setPrivateTags","pid","paper","privateTags","read","tags","filter","join","getLdaRes","dois","num_topics","body","JSON","headers","method","response","anaTimeSvgPadding","mustInclude","list","mustIncludeList","count","slice","forEach","mustItem","i","length","mostCommon","items","n","item2Count","itemList","item","itemCountList","push","sort","b","map","attr2func","publicTags","createStore","currentPage","setCurrentPage","this","window","location","hash","tooltipX","tooltipY","setTooltipPos","x","y","titleSearch","setTitleSearch","text","toLocaleLowerCase","searchPaperDois","papers","title","indexOf","doi","Set","commonAuthors","commonCountries","commonPublicTags","commonPrivateTags","initPapers","setPapers","compareAttr","console","log","doi2paper","projection","topics","colors","innerColors","outerColors","internalRefList","internalCitedList","isHighlight","indexByYear","refList","toLowerCase","split","trim","authors","replace","countries","s","part","toUpperCase","keywords","word","ref","computedPosition","initPublicTags","runInAction","initPrivateTags","setPaper","attr","value","find","p","userId","toJS","doiUpdateColors","unitXAttr","xAttrSet","add","xAttrList","Array","from","unitYAttr","unitYAttrList","maxUnitBlockPaperCount","unitBlockCount","xAttr","yAttr","unitIndex","Math","max","Object","values","readIndex","splice","batchUpdateColors","setUserId","localStorage","setItem","initUserId","getItem","generateCategory","analysisPapers","label","highlightType","have_read","commonKeywords","category2highlightType","controlTagNameList","category","activeTags","ans","key","outerCategories","isUnitOuterHighlight","outerCategory","tag2color","colorUse","setTagColor","tag","fullTag","_color","d3","updateColor","hightlightAttrs","maxCitationCount","currentSelected","currentSelectedRefSet","currentSelectedCitedSet","isSelected","setCurrentSelected","cancelSelect","controlIsActive","unitXAttrList","year","all","highlight","anaHighPapers","anaCategories","anaFilterType","setAnaFilterType","type","clearBrushTrigger","setClearBrushTrigger","fn","anaHighCate","anaHighTag","anaHighTopic","setAnaHighPapersByTag","get","setAnaHighPapersByTopic","topic","anaHighEntityTopic","setAnaHighPapersByYear","yearRange","yearStart","yearEnd","anaSelectHighlightPaperDoi","setAnaSelectHighlightPaperDoi","paperDoi","topicColorScale","defaultHighColor","drawProjectionFlag","resetProjectionFlag","setNumTopics","num","tryLda","topics_detail","paper_lda_res","code","setAnaHighEntityTopic","topicIndex","anaHighEntityCitePaperDois","anaHighEntityCitedPaperDois","anaHighTopicIndenpentPaperDois","setHighEntityLinkData","citePaperDois","citedPaperDois","centralIndependentPaperDois","storeContext","React","createContext","StoreProvider","children","store","useLocalObservable","Provider","useGlobalStore","useContext","Error","SearchView","handleInput","debounce","e","target","className","onInput","SearchOutlined","ControlView","observer","searchAttr","ControlItem","tagData","useState","setTags","useEffect","initTags","keys","handleClickOption","currentTags","index","clickOption","isSelect","ControlOption","style","background","border","value_format","onClick","CircleUnit","memo","cx","cy","r","opacity","handleClick","isBackgroundActive","handleHover","handleHoverOut","polarX","angle","sin","polarY","cos","innerStepAngle","PI","innerPoints","_","startX","startY","endX","endY","outerR","outerPolarX","outerPolarY","outerStepAngle","outerPoints","id","cursor","onMouseEnter","onMouseLeave","width","height","fill","rx","ry","point","d","stroke","strokeWidth","PaperTooltip","isShow","paperCircle","containerWidth","containerHeight","xRatio","tooltipWidth","bottomStyle","transform","unitLayoutPadding","unitBlockPadding","UnitView","searchPaperDoiSet","svgWidth","setSvgWidth","svgHeight","setSvgHeight","svg","document","querySelector","clientWidth","clientHeight","unitBlockWidth","unitBlockHeight","aspectRatio","floor","blockCountX","ceil","sqrt","xAttr2blockCountX","maxColumnBlockCount","j","xAttr2blockCountX_StartCount","xAttr2blockCountX_StartPos","scale","domain","range","paperCircles","oriData","BlockIndexX","BlockIndexY","circleIndexX","circleIndexY","citationGrey","citationCount","activeColors","has","Title","borderColor","xLabels","yLabels","handleClickPaper","stopPropagation","hoverDoi","setHoverDoi","hoverPaper","hoverPaperCircle","borderOpacity","textAnchor","fontSize","DetailView","currentSelectedPaper","editTags","size","checkedChildren","CheckOutlined","unCheckedChildren","CloseOutlined","defaultChecked","onChange","editTag","handleChangeTags","DetailItem","DetailEditTags","_setTags","newTags","editInputIndex","setEditInputIndex","input","useRef","editInputValue","setEditInputValue","handleEditInputConfirm","inputValue","setInputValue","handleInputConfirm","setInputVisible","inputVisible","onchange","onBlur","onPressEnter","closable","onClose","removeTag","PlusOutlined","ManagePage","useClientRect","svgId","clientRect","setClientRect","node","getClientRects","TimeLine","initYearRange","padding","nice","bars","append","classed","selectAll","rectX","bandwidth","call","g","tickValues","tickSizeOuter","ticks","brush","extent","on","selection","bar","brushYear","move","highlightBarsG","select","TabPane","Tabs","TagFilter","dataSource","tab","HorizontalBar","divId","paddingBottom","TagView","anaTimeData","anaTagViewData","yearSelecting","setYearSelecting","AnaPaperCount","isAll","allCount","highlightCount","ProjectionView","num_topics_ing","set_num_topics_ing","contours","topic_i","thresholds","contourOpacity","paperCircleR","paperCircleColor","mainTopic","paperCircleOpacity","paperCircleStrokeWidth","paperCircleDasharray","paperCircleStroke","generateEntity","allPapers","mainPapers","positionX","reduce","positionY","color","anaHighTopicEntity","anaHighTopicPaperDoiSet","anaOtherEntities","entity","intersectionPapers","entityR","getEntitySectorD","start","end","entityOpacity","topicLinks","source","x0","y0","x1","y1","a0_positive","b0_positive","a0_negative","b0_negative","points_dist","delta_x","delta_y","find_d","citeControlPoints","x_1_3_negative","y_1_3_negative","x_2_3_negative","y_2_3_negative","citedControlPoints","x_1_3_positive","y_1_3_positive","x_2_3_positive","y_2_3_positive","interPapers","interCount","interPapersDoiSet","independentPapers","centralEntityIndependentPapers","citeDoiSet","concat","citePapers","citePapersDoiSet","citeLinkCount","citePaperCount","citeSourcePapers","citedDoiSet","citedPapers","citedPapersDoiSet","citedLinkCount","citedPaperCount","_linkWidth","linkWidth","weight","topicLinkOpacity","topicLink","strokeLinejoin","contour","strokeDasharray","strokeLinecap","link","min","onAfterChange","NetworkView","anaHighPapersDoiSet","paperCountByYear","rectWidth","rectHeight","year2count","doi2indexByYear","rectOpacity","rectStroke","rectStrokeWidth","rectStrokeDashArray","contourFunc","contourColor","internalLinks","refPaperDoi","diagonal","computedPath","x3","y3","x2","y2","linkStroke","linkOpacity","TopicView","TopicItem","topicItemClass","HighlightListView","PaperItem","conferenceName","DetaiView","anaSelectHighlightPaper","abstract","AnalysisPage","userList","Option","Select","Header","switchPage","switchPageShowText","SwitchButton","to","placeholder","user","App","exact","path","component","Analysis","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.beaad3bc.chunk.js","sourcesContent":["import qs from \"qs\";\n\nconst baseUrl = \"http://vis.pku.edu.cn/vis4vis/\";\n// const baseUrl = \"http://127.0.0.1:12357/\";\n\nconst fetchData = (url, params = \"\") => {\n  const getUrl =\n    baseUrl + url + (url.includes(\"?\") ? \"&\" : \"?\") + qs.stringify(params);\n  return new Promise((resolve, reject) => {\n    fetch(getUrl)\n      .then((res) => res.json())\n      .then((data) => resolve(data))\n      .catch((err) => reject(err));\n  });\n};\n\nexport const getPapers = async () => {\n  return await fetchData(\"get_papers\");\n};\n\nexport const getPublicTags = async () => {\n  return await fetchData(\"get_public_tags\");\n};\n\nexport const getPrivateTags = async ({ uid }) => {\n  return await fetchData(\"get_private_tags\", { uid });\n};\n\nexport const setPublicTags = ({ pid, paper }) => {\n  const tags = paper.publicTags;\n  fetchData(\"set_public_tags\", { pid, tags: tags.join(\",\") });\n  return \"OK\";\n};\n\nexport const setPrivateTags = ({ uid, pid, paper }) => {\n  const { privateTags, read } = paper;\n  uid &&\n    fetchData(\"set_private_tags\", {\n      uid,\n      pid,\n      tags: [...privateTags, read && \"read\"].filter((a) => a).join(\",\"),\n    });\n  return \"OK\";\n};\n\nfunction postData(url, data) {\n  return fetch(url, {\n    body: JSON.stringify(data), // must match 'Content-Type' header\n    // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n    // credentials: 'same-origin', // include, same-origin, *omit\n    headers: {\n      'user-agent': 'Mozilla/4.0 MDN Example',\n      'content-type': 'application/json'\n    },\n    method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n    // mode: 'cors', // no-cors, cors, *same-origin\n    // redirect: 'follow', // manual, *follow, error\n    // referrer: 'no-referrer', // *client, no-referrer\n  }).then((response) => response.json()); // parses response to JSON\n}\n\nexport const getLdaRes = ({ dois, uid, num_topics = 3 }) => {\n  return postData(baseUrl + 'get_lda_results', { dois, num_topics, uid });\n};\n","const anaSvgPadding = {\n  left: 15,\n  right: 35,\n  top: 8,\n  bottom: 45,\n};\n\nconst anaTimeSvgPadding = {\n  left: 15,\n  right: 35,\n  top: 8,\n  bottom: 25,\n};\n\nexport { anaSvgPadding, anaTimeSvgPadding };\n","// List A 必须包括 List B, 同时长度限制在count内\n\nconst mustInclude = (list, mustIncludeList, count) => {\n  list = list.slice(0, count);\n  mustIncludeList.forEach((mustItem) => {\n    if (!list.includes(mustItem)) {\n      let i = list.length - 1;\n      while (mustIncludeList.includes(list[i])) i -= 1;\n      list[i] = mustItem;\n    }\n  });\n  return list;\n}\n\nexport default mustInclude","const mostCommon = (items, n = 10) => {\n  const item2Count = {};\n  items.forEach((itemList) => {\n    itemList.forEach((item) => {\n      if (item) {\n        if (item in item2Count) {\n          item2Count[item] += 1;\n        } else {\n          item2Count[item] = 1;\n        }\n      }\n    });\n  });\n  const itemCountList = [];\n  for (let item in item2Count) {\n    itemCountList.push({\n      item,\n      count: item2Count[item],\n    });\n  }\n  itemCountList.sort((a, b) => b.count - a.count);\n  return itemCountList.slice(0, n).map(a => a.item);\n};\n\nexport default mostCommon;\n","import * as d3 from \"d3\";\nimport { toJS, runInAction } from \"mobx\";\nimport {\n  getPapers,\n  setPublicTags,\n  setPrivateTags,\n  getPublicTags,\n  getPrivateTags,\n  getLdaRes,\n} from \"Server\";\nimport { get } from \"lodash\";\nimport { mostCommon, mustInclude, find_d } from \"Common\";\n\nconst debug = true;\n\nconst attr2func = {\n  publicTags: setPublicTags,\n  privateTags: setPrivateTags,\n  read: setPrivateTags,\n};\n\nconst createStore = () => {\n  return {\n    currentPage: \"Management\",\n    setCurrentPage() {\n      this.currentPage = window.location.hash.includes(\"/analysis\")\n        ? \"Analysis\"\n        : \"Management\";\n    },\n    tooltipX: 500,\n    tooltipY: 500,\n    setTooltipPos(x = -1, y = -1) {\n      this.tooltipX = x;\n      this.tooltipY = y;\n    },\n    titleSearch: \"\",\n    setTitleSearch(text) {\n      this.titleSearch = text.toLocaleLowerCase();\n    },\n    get searchPaperDoiSet() {\n      const searchPaperDois = this.titleSearch\n        ? this.papers\n            .filter(\n              (paper) =>\n                paper.title.toLocaleLowerCase().indexOf(this.titleSearch) > -1\n            )\n            .map((paper) => paper.doi)\n        : [];\n      const searchPaperDoiSet = new Set(searchPaperDois);\n      return searchPaperDoiSet;\n    },\n    papers: [],\n    commonAuthors: [],\n    commonCountries: [],\n    commonPublicTags: [],\n    commonPrivateTags: [],\n    async initPapers() {\n      if (this.papers.length === 0) {\n        const papers = await getPapers();\n        this.setPapers(papers);\n      }\n    },\n    async setPapers(papers, compareAttr = \"citationCount\") {\n      debug && console.log(\"==> 初始化Papers\");\n      const doi2paper = {};\n      papers.forEach((paper) => {\n        // 初始化，一些特殊处理，比如如果没有doi或者引用量，就安排一个\n        // if (paper.doi === \"#\") paper.doi = `tmp-${i}`;\n        // if (paper.CitationCount === \"\") paper.CitationCount = 0;\n        // if (paper.Countries === \"#\" || paper.Countries === \"###\")\n        //   paper.Countries = \"\";\n        paper.privateTags = [];\n        paper.projection = [5, 5];\n        paper.topics = [];\n        paper.read = false;\n        paper.publicTags = [];\n        // paper.keywords = [];\n        paper.colors = [];\n        paper.innerColors = [];\n        paper.outerColors = [];\n        paper.internalRefList = [];\n        paper.internalCitedList = [];\n        paper.topics = [[0, 1]];\n        paper.isHighlight = false;\n        paper.indexByYear = 0;\n        paper.refList = paper.refList\n          .toLowerCase()\n          // .split(\";\")\n          .split(/[,;]/)\n          .map((a) => a.trim());\n        doi2paper[paper.doi] = paper;\n\n        // 提取authors\n        paper.authors = paper.authors\n          .split(\";\")\n          .map((a) => a.trim().replace(/\\{(.*)\\}/, \"$1\"));\n\n        // 提取countries\n        paper.countries = paper.countries\n          .split(\";\")\n          .map((s) => {\n            const part = s\n              .trim()\n              .split(\" \")\n              .map((a) => a.trim())\n              .filter((a) => a);\n            if (part.length === 0) return \"\";\n            let country = part[part.length - 1]\n              .toLowerCase()\n              .replace(/^\\w/, (s) => s.toUpperCase());\n            return country;\n          })\n          .filter((a) => a);\n\n        paper.keywords = paper.keywords\n          .split(/[;,]/)\n          .map((word) => word.trim().toLowerCase());\n      });\n\n      papers.forEach((paper) => {\n        paper.refList.forEach((ref) => {\n          if (ref in doi2paper) {\n            const refPaper = doi2paper[ref];\n            refPaper.internalCitedList.push(paper.doi);\n            paper.internalRefList.push(ref);\n          }\n        });\n      });\n\n      this.commonAuthors = mostCommon(\n        papers.map((paper) => paper.authors),\n        30\n      );\n      // console.log(\n      //   \"Authors Tags: \",\n      //   mostCommon(\n      //     papers.map((paper) => paper.authors),\n      //     100\n      //   )\n      // );\n      this.commonCountries = mostCommon(\n        papers.map((paper) => paper.countries),\n        30\n      );\n\n      // 先按引用量排序，再去统计分组的排序，这个时间消耗其实还挺大的。\n      papers.sort((a, b) => b[compareAttr] - a[compareAttr]);\n\n      // 开始计算位置\n      this.computedPosition(papers);\n      await this.initPublicTags(papers);\n\n      runInAction(() => {\n        this.papers = papers;\n        this.initPrivateTags();\n      });\n    },\n    setPaper(doi, attr, value) {\n      const paper = this.papers.find((p) => p.doi === doi);\n      paper[attr] = value;\n      // if (attr === \"read\") {\n      //   if (value) {\n      //     paper.privateTags.push(\"read\");\n      //   } else {\n      //     paper.privateTags = [...paper.privateTags].filter(\n      //       (a) => a !== \"read\"\n      //     );\n      //   }\n      // }\n      debug && console.log(\"==> 更新paper数据 by doi:\", doi, attr, value);\n      // attr === \"publicTags\" && setPublicTags(doi, value);\n      attr2func[attr]({\n        uid: this.userId,\n        pid: doi,\n        paper: toJS(paper),\n      });\n      this.doiUpdateColors(doi);\n    },\n    unitXAttr: \"year\",\n    get unitXAttrList() {\n      const xAttrSet = new Set();\n      this.papers.forEach((paper) => {\n        xAttrSet.add(paper[this.unitXAttr]);\n      });\n      const xAttrList = Array.from(xAttrSet);\n      xAttrList.sort((a, b) => b - a);\n      return xAttrList;\n    },\n    unitYAttr: \"conferenceName\",\n    unitYAttrList: [\n      \"SciVis\",\n      \"InfoVis\",\n      \"EuroVis\",\n      \"VAST\",\n      \"PacificVis\",\n      \"Others\",\n    ],\n    maxUnitBlockPaperCount: 0,\n    unitBlockCount: {},\n    computedPosition(papers) {\n      // 每一个block有多少单元\n      const unitBlockCount = {};\n      papers.forEach((paper) => {\n        const xAttr = paper[this.unitXAttr];\n        const yAttr = this.unitYAttrList.includes(paper[this.unitYAttr])\n          ? paper[this.unitYAttr]\n          : this.unitYAttrList[this.unitYAttrList.length - 1];\n        if (!(xAttr in unitBlockCount)) unitBlockCount[xAttr] = {};\n        if (!(yAttr in unitBlockCount[xAttr])) unitBlockCount[xAttr][yAttr] = 0;\n        paper.unitIndex = unitBlockCount[xAttr][yAttr];\n        unitBlockCount[xAttr][yAttr] += 1;\n      });\n      this.maxUnitBlockPaperCount =\n        Math.max(...papers.map((paper) => paper.unitIndex)) * 0.6;\n      this.unitBlockCount = unitBlockCount;\n    },\n\n    async initPublicTags(papers) {\n      const publicTags = await getPublicTags();\n      papers.forEach((paper) => {\n        if (paper.doi in publicTags) {\n          paper.publicTags = publicTags[paper.doi].filter((a) => a);\n        }\n      });\n      runInAction(() => {\n        this.commonPublicTags = mostCommon(Object.values(publicTags), 30);\n      });\n    },\n    async initPrivateTags() {\n      const privateTags = await getPrivateTags({ uid: this.userId });\n\n      runInAction(() => {\n        this.papers.forEach((paper) => {\n          if (paper.doi in privateTags) {\n            const readIndex = privateTags[paper.doi].indexOf(\"read\");\n            if (readIndex > -1) {\n              paper.read = true;\n              privateTags[paper.doi].splice(readIndex, 1);\n            }\n            paper.privateTags = privateTags[paper.doi].filter((a) => a);\n          }\n        });\n        this.commonPrivateTags = mostCommon(Object.values(privateTags), 30);\n      });\n\n      this.batchUpdateColors();\n    },\n\n    userId: \"\",\n    setUserId(userId) {\n      if (userId !== this.userId) {\n        this.userId = userId;\n        debug && console.log(\"==> change userId:\", this.userId);\n        localStorage.setItem(\"paper-management-system-userId\", userId);\n        userId && this.initPrivateTags();\n      }\n    },\n    initUserId() {\n      if (this.userId.length === 0) {\n        const userId = localStorage.getItem(\"paper-management-system-userId\");\n        userId && this.setUserId(userId);\n      }\n    },\n\n    get controlTagNameList() {\n      return this.generateCategory(10);\n    },\n    // get anaCategories() {\n    //   return this.generateCategory(18, true);\n    // },\n    get anaCategories() {\n      const count = 50;\n      const have_read = false;\n      const countries = mustInclude(\n        mostCommon(\n          this.analysisPapers.map((paper) => paper.countries),\n          30\n        ),\n        [\"Japan\", \"Korea\"],\n        count\n      );\n      const authors = mostCommon(\n        this.analysisPapers.map((paper) => paper.authors),\n        30\n      );\n      const privateTags = mustInclude(\n        this.commonPrivateTags,\n        have_read ? [\"read\"] : [],\n        count\n      );\n      const publicTags = mustInclude(this.commonPublicTags, [], count);\n      const keywords = mustInclude(\n        mostCommon(\n          this.analysisPapers.map((paper) => paper.keywords),\n          30\n        ),\n        [],\n        count\n      );\n      return [\n        {\n          label: \"Country\",\n          value: \"countries\",\n          list: countries,\n          highlightType: \"outer\",\n        },\n        {\n          label: \"Author\",\n          value: \"authors\",\n          list: authors,\n          highlightType: \"inner\",\n        },\n        {\n          label: \"Keywords\",\n          value: \"keywords\",\n          list: keywords,\n          highlightType: \"inner\",\n        },\n        {\n          label: \"Private Tag\",\n          value: \"privateTags\",\n          list: privateTags,\n          highlightType: \"inner\",\n        },\n        {\n          label: \"Public Tag\",\n          value: \"publicTags\",\n          list: publicTags,\n          highlightType: \"inner\",\n        },\n      ];\n    },\n\n    get commonKeywords() {\n      return mostCommon(\n        this.papers.map((paper) => paper.keywords),\n        30\n      );\n    },\n    generateCategory(count, have_read = false) {\n      const countries = mustInclude(\n        this.commonCountries,\n        [\"Japan\", \"Korea\"],\n        count\n      );\n      const authors = mustInclude(this.commonAuthors, [\"Xiaoru Yuan\"], count);\n      const privateTags = mustInclude(\n        this.commonPrivateTags,\n        have_read ? [\"read\"] : [],\n        count\n      );\n      const publicTags = mustInclude(this.commonPublicTags, [], count);\n      const keywords = mustInclude(this.commonKeywords, [], count);\n      return [\n        {\n          label: \"Country\",\n          value: \"countries\",\n          list: countries,\n          highlightType: \"outer\",\n        },\n        {\n          label: \"Author\",\n          value: \"authors\",\n          list: authors,\n          highlightType: \"inner\",\n        },\n        {\n          label: \"Keywords\",\n          value: \"keywords\",\n          list: keywords,\n          highlightType: \"inner\",\n        },\n        {\n          label: \"Private Tag\",\n          value: \"privateTags\",\n          list: privateTags,\n          highlightType: \"inner\",\n        },\n        {\n          label: \"Public Tag\",\n          value: \"publicTags\",\n          list: publicTags,\n          highlightType: \"inner\",\n        },\n      ];\n    },\n    get category2highlightType() {\n      const category2highlightType = {};\n      this.controlTagNameList.forEach((category) => {\n        category2highlightType[category.value] = category.highlightType;\n      });\n      return category2highlightType;\n    },\n    activeTags: {\n      countries: [],\n      authors: [],\n      privateTags: [],\n      publicTags: [],\n      keywords: [],\n    },\n    // 判断 至少有一个控制器被激活\n    get controlIsActive() {\n      let ans = false;\n      for (let key in this.activeTags) {\n        if (this.activeTags[key].length > 0) {\n          ans = true;\n        }\n      }\n      return ans;\n    },\n    // 判断 至少有一个outer被激活\n    get isUnitOuterHighlight() {\n      const outerCategories = this.controlTagNameList\n        .filter((category) => category.highlightType === \"outer\")\n        .map((category) => category.value);\n      let isUnitOuterHighlight = false;\n      outerCategories.forEach((outerCategory) => {\n        if (this.activeTags[outerCategory].length > 0)\n          isUnitOuterHighlight = true;\n      });\n      return isUnitOuterHighlight;\n    },\n    tag2color: {},\n    colorUse: {},\n    setTagColor(tag, category) {\n      debug && console.log(\"==> 设置tag颜色:\", category, tag);\n      const fullTag = `${category}---${tag}`;\n      if (fullTag in this.tag2color) {\n        // 回收该颜色\n        this.colorUse[this.tag2color[fullTag]] = false;\n        delete this.tag2color[fullTag];\n        this.activeTags[category] = [...this.activeTags[category]].filter(\n          (a) => a !== tag\n        );\n      } else {\n        // 分配一个新的颜色\n        this.activeTags[category].push(tag);\n        let i = 0;\n        let _color = d3.schemeTableau10[i];\n        while (this.colorUse[_color]) {\n          i += 1;\n          if (i === 10) {\n            _color = \"black\";\n            break;\n          }\n          _color = d3.schemeTableau10[i];\n        }\n        this.tag2color[fullTag] = _color;\n        this.colorUse[_color] = true;\n      }\n      this.batchUpdateColors();\n    },\n    batchUpdateColors() {\n      this.papers.forEach((paper) => {\n        paper.colors = [];\n        paper.innerColors = [];\n        paper.outerColors = [];\n        this.updateColor(paper);\n      });\n    },\n    doiUpdateColors(doi) {\n      const paper = this.papers.find((p) => p.doi === doi);\n      paper.colors = [];\n      paper.innerColors = [];\n      paper.outerColors = [];\n      this.updateColor(paper);\n    },\n    updateColor(paper) {\n      const isReadTagActive = this.activeTags.privateTags.indexOf(\"read\") > -1;\n      if (isReadTagActive && paper.read) {\n        paper.colors.push(this.tag2color[\"privateTags---read\"]);\n        paper.innerColors.push(this.tag2color[\"privateTags---read\"]);\n      }\n\n      for (let category in this.activeTags) {\n        const hightlightAttrs = this.activeTags[category];\n        if (this.category2highlightType[category] === \"inner\") {\n          hightlightAttrs.forEach((attr) => {\n            if (paper[category].indexOf(attr) > -1) {\n              const fullTag = `${category}---${attr}`;\n              paper.innerColors.push(this.tag2color[fullTag]);\n            }\n          });\n        } else {\n          hightlightAttrs.forEach((attr) => {\n            if (paper[category].indexOf(attr) > -1) {\n              const fullTag = `${category}---${attr}`;\n              paper.outerColors.push(this.tag2color[fullTag]);\n            }\n          });\n        }\n        hightlightAttrs.forEach((attr) => {\n          if (paper[category].indexOf(attr) > -1) {\n            const fullTag = `${category}---${attr}`;\n            paper.colors.push(this.tag2color[fullTag]);\n          }\n        });\n      }\n    },\n    maxCitationCount: 200,\n\n    currentSelected: \"\",\n    currentSelectedRefSet: new Set(),\n    currentSelectedCitedSet: new Set(),\n    isSelected: false,\n    setCurrentSelected(doi) {\n      debug && console.log(\"==> 选中文章:\", doi);\n      this.currentSelected = doi;\n      this.isSelected = !!doi;\n\n      const paper = this.papers.find((paper) => paper.doi === doi);\n      this.currentSelectedRefSet = new Set(paper.internalRefList);\n      this.currentSelectedCitedSet = new Set(paper.internalCitedList);\n    },\n    cancelSelect() {\n      debug && console.log(\"==> 点击背景，取消论文选中状态\");\n      this.isSelected = false;\n    },\n    get currentSelectedPaper() {\n      return this.papers.find((paper) => paper.doi === this.currentSelected);\n    },\n\n    get analysisPapers() {\n      return this.controlIsActive\n        ? this.papers.filter(\n            (paper) =>\n              paper.innerColors.length > 0 || paper.outerColors.length > 0\n          )\n        : this.papers;\n    },\n    get anaTimeData() {\n      const timeList = this.unitXAttrList.map((a) => +a).sort();\n      return timeList.map((year) => ({\n        x: year,\n        all: this.analysisPapers.filter((paper) => +paper.year === year).length,\n        highlight: this.anaHighPapers.filter((paper) => +paper.year === year)\n          .length,\n      }));\n    },\n\n    get anaTagViewData() {\n      return this.anaCategories.map((category) => {\n        const { label, value } = category;\n        const data = category.list.map((tag) =>\n          tag === \"read\"\n            ? {\n                label: \"read\",\n                all: this.analysisPapers.filter((paper) => paper.read).length,\n                highlight: this.anaHighPapers.filter((paper) => paper.read)\n                  .length,\n              }\n            : {\n                label: tag,\n                all: this.analysisPapers.filter((paper) =>\n                  paper[category.value].includes(tag)\n                ).length,\n                highlight: this.anaHighPapers.filter((paper) =>\n                  paper[category.value].includes(tag)\n                ).length,\n              }\n        );\n        return {\n          label,\n          value,\n          data,\n        };\n      });\n    },\n\n    anaFilterType: \"none\", // \"none\", \"year\", \"tag\", \"topic\", \"lasso\"\n    setAnaFilterType(type) {\n      debug && console.log(\"setAnaFilterType\", type);\n      this.anaFilterType = type;\n    },\n    clearBrushTrigger: () => {},\n    setClearBrushTrigger(fn) {\n      this.clearBrushTrigger = fn;\n    },\n\n    anaHighCate: \"\",\n    anaHighTag: \"\",\n    anaHighTopic: \"\",\n    anaHighPapers: [],\n    setAnaHighPapersByTag({ anaHighCate, anaHighTag }) {\n      debug && console.log(\"setAnaHighPapersByTag\", anaHighCate, anaHighTag);\n      this.clearBrushTrigger();\n      // this.setAnaHighPapersByYear([0, 0])\n      if (this.anaHighCate === anaHighCate && this.anaHighTag === anaHighTag) {\n        this.anaHighTag = \"none\";\n        this.setAnaFilterType(\"none\");\n        this.anaHighPapers = this.analysisPapers;\n      } else {\n        this.anaHighCate = anaHighCate;\n        this.anaHighTag = anaHighTag;\n        this.setAnaFilterType(anaHighCate);\n        this.anaHighPapers = this.analysisPapers.filter((paper) =>\n          get(paper, anaHighCate, []).includes(anaHighTag)\n        );\n      }\n    },\n    setAnaHighPapersByTopic(topic) {\n      debug && console.log(\"setAnaHighPapersByTopic\", topic);\n      this.clearBrushTrigger();\n      if (this.anaFilterType === \"topic\" && this.anaHighTopic === topic) {\n        this.anaHighTopic = \"none\";\n        this.anaHighEntityTopic = -1;\n        this.setAnaFilterType(\"none\");\n        this.anaHighPapers = this.analysisPapers;\n      } else {\n        this.anaHighTopic = topic;\n        this.anaHighEntityTopic = -1;\n        this.anaHighTag = `topic ${topic + 1}`;\n        this.setAnaFilterType(\"topic\");\n        this.anaHighPapers = this.analysisPapers.filter((paper) =>\n          paper.topics.map((a) => a[0]).includes(topic)\n        );\n      }\n    },\n    setAnaHighPapersByYear(yearRange) {\n      debug && console.log(\"setAnaHighPapersByYear\", yearRange);\n      // this.setAnaFilterType('year');\n      const [yearStart, yearEnd] = yearRange;\n      this.anaHighTag = `${yearStart}-${yearEnd}`;\n      this.anaHighPapers = this.analysisPapers.filter(\n        (paper) => +paper.year >= yearStart && +paper.year <= yearEnd\n      );\n    },\n    anaSelectHighlightPaperDoi: \"\",\n    setAnaSelectHighlightPaperDoi(paperDoi) {\n      debug && console.log(\"setAnaSelectHighlightPaper\", paperDoi);\n      if (this.anaSelectHighlightPaperDoi === paperDoi) {\n        debug && console.log(\"reset anaSelectHighlightPaperDoi\");\n        this.anaSelectHighlightPaperDoi = \"\";\n      } else {\n        this.anaSelectHighlightPaperDoi = paperDoi;\n      }\n    },\n    get anaSelectHighlightPaper() {\n      return (\n        this.analysisPapers.find(\n          (paper) => paper.doi === this.anaSelectHighlightPaperDoi\n        ) || {}\n      );\n    },\n    topicColorScale: d3.schemeTableau10.slice(1),\n    defaultHighColor: d3.schemeTableau10[0],\n    drawProjectionFlag: false,\n    resetProjectionFlag() {\n      debug && console.log(\"reset drawProjectionFlag\");\n      this.drawProjectionFlag = false;\n    },\n    num_topics: 5,\n    setNumTopics(num) {\n      this.num_topics = num;\n      this.tryLda();\n    },\n    topics_detail: [],\n    tryLda() {\n      const dois = this.analysisPapers.map((paper) => paper.doi);\n      const uid = this.userId;\n      const num_topics = this.num_topics;\n      debug && console.log(\"try lda Start!\", num_topics);\n      getLdaRes({ dois, uid, num_topics }).then((data) => {\n        debug && console.log(\"try lda OK!\", data);\n        runInAction(() => {\n          // console.log(\"data\", data);\n          const { paper_lda_res, topics_detail, code = \"success\" } = data;\n          if (code === \"success\") {\n            this.analysisPapers.forEach((paper) => {\n              if (paper.doi in paper_lda_res) {\n                paper.projection = paper_lda_res[paper.doi].projection;\n                paper.topics = paper_lda_res[paper.doi].topics.sort(\n                  (a, b) => b[1] - a[1]\n                );\n              } else {\n                paper.projection = [5, 5];\n                paper.topics = [];\n              }\n            });\n            this.drawProjectionFlag = true;\n            this.topics_detail = topics_detail;\n            // 初始化一下\n            this.anaHighPapers = this.analysisPapers;\n          }\n        });\n      });\n    },\n\n    anaHighEntityTopic: -1,\n    setAnaHighEntityTopic(topicIndex) {\n      if (this.anaHighEntityTopic === topicIndex) {\n        debug && console.log(\"setAnaHighEntityTopic\", false);\n        this.anaHighEntityTopic = -1;\n      } else {\n        debug && console.log(\"setAnaHighEntityTopic\", topicIndex);\n        this.anaHighEntityTopic = topicIndex;\n      }\n    },\n    anaHighEntityCitePaperDois: [],\n    anaHighEntityCitedPaperDois: [],\n    anaHighTopicIndenpentPaperDois: [],\n    setHighEntityLinkData(\n      citePaperDois,\n      citedPaperDois,\n      centralIndependentPaperDois\n    ) {\n      debug && console.log(\"citePaperDois\", citePaperDois);\n      debug && console.log(\"citedPaperDois\", citedPaperDois);\n      debug &&\n        console.log(\"centralIndependentPaperDois\", centralIndependentPaperDois);\n      this.anaHighEntityCitePaperDois = citePaperDois;\n      this.anaHighEntityCitedPaperDois = citedPaperDois;\n      this.anaHighTopicIndenpentPaperDois = centralIndependentPaperDois;\n    },\n  };\n};\n\nexport default createStore;\n","import React from \"react\";\nimport createStore from \"./createStoreV0128\";\nimport { useLocalObservable } from \"mobx-react-lite\";\n\nconst storeContext = React.createContext(null);\n\nexport const StoreProvider = ({ children }) => {\n  const store = useLocalObservable(createStore);\n  return (\n    <storeContext.Provider value={store}>{children}</storeContext.Provider>\n  );\n};\n\nexport const useGlobalStore = () => {\n  const store = React.useContext(storeContext);\n  if (!store) {\n    throw new Error(\"no Provider\");\n  }\n  return store;\n};\n","import React from \"react\";\nimport \"./index.scss\";\nimport { useGlobalStore } from \"Store\";\nimport { debounce } from \"lodash\";\nimport { SearchOutlined } from \"@ant-design/icons\";\n// import {observer} from \"mobx-react-lite\";\n\nconst SearchView = () => {\n  const store = useGlobalStore();\n  // const { searchPaperDoiSet } = store;\n  // console.log(\"=====> searchPaperDoiSet\", searchPaperDoiSet);\n  const handleInput = debounce((e) => {\n    // console.log(\"===>\", e.target.value);\n    store.setTitleSearch(e.target.value);\n  }, 200);\n  return (\n    <div className=\"search-view\">\n      <div className=\"search-view-input\">\n        <input onInput={handleInput} />\n      </div>\n\n      <div className=\"search-view-icon\">\n        <SearchOutlined />\n      </div>\n    </div>\n  );\n};\n\nexport default SearchView;\n","import React, { useState, useEffect } from \"react\";\nimport \"./index.scss\";\nimport { useGlobalStore } from \"Store\";\nimport { observer } from \"mobx-react-lite\";\n// import { toJS } from \"mobx\";\nimport SearchView from \"../SearchView\";\n\nconst ControlView = observer(() => {\n  const store = useGlobalStore();\n  const { controlTagNameList } = store;\n  return (\n    <div className=\"control-view\">\n      <div className=\"control-item\">\n        <div className=\"control-item-title\">Title Search</div>\n        <div className=\"control-item-options\">\n          <SearchView searchAttr={\"title\"} />\n        </div>\n      </div>\n\n      {controlTagNameList.map((tag) => (\n        <ControlItem key={tag.label} tagData={tag} />\n      ))}\n    </div>\n  );\n});\n\nexport default ControlView;\n\nconst ControlItem = observer(({ tagData }) => {\n  const store = useGlobalStore();\n  const { tag2color } = store;\n\n  const [tags, setTags] = useState([]);\n  // 又是一个外挂逻辑，从ana界面切回来以后，需要初始化tag item，理论上这个应该放在store统一处理\n  useEffect(() => {\n    const initTags = Object.keys(tag2color)\n      .filter((tag) => tag.split(\"---\")[0] === tagData.value)\n      .map((tag) => tag.split(\"---\")[1])\n      .filter((tag) => tagData.list.indexOf(tag) > -1);\n    setTags(initTags);\n  }, []);\n  const handleClickOption = (value) => {\n    const currentTags = [...tags];\n    const index = currentTags.indexOf(value);\n    if (index > -1) {\n      currentTags.splice(index, 1);\n      setTags(currentTags);\n    } else {\n      currentTags.push(value);\n      setTags(currentTags);\n    }\n    store.setTagColor(value, tagData.value);\n  };\n\n  return (\n    <div className=\"control-item\">\n      <div className=\"control-item-title\">{tagData.label}</div>\n      <div className=\"control-item-options\">\n        {tagData.list.map((item) => (\n          <ControlOption\n            key={item}\n            value={item}\n            clickOption={handleClickOption}\n            isSelect={\n              tags.indexOf(item) > -1 && tag2color[`${tagData.value}---${item}`]\n            }\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n\nconst ControlOption = ({ value, clickOption, isSelect }) => {\n  const className = [\"control-item-option\", isSelect && \"option-active\"]\n    .filter((a) => a)\n    .join(\" \");\n  const style = isSelect\n    ? { background: isSelect, border: `1px solid ${isSelect}` }\n    : {};\n  const value_format = value === \"Usa\" ? \"USA\" : value;\n  return (\n    <div className={className} onClick={() => clickOption(value)} style={style}>\n      {value_format}\n    </div>\n  );\n};\n","import React from \"react\";\n\nconst CircleUnit = React.memo(\n  ({\n    cx,\n    cy,\n    r,\n    // colors,\n    opacity,\n    doi,\n    handleClick,\n    // borderColor,\n    // borderOpacity,\n    title,\n    innerColors,\n    outerColors,\n    isBackgroundActive,\n    handleHover,\n    handleHoverOut,\n  }) => {\n    const polarX = (angle) => cx + Math.sin(angle) * r;\n    const polarY = (angle) => cy + Math.cos(angle) * r;\n    const innerStepAngle = (2 * Math.PI) / innerColors.length;\n    const innerPoints = innerColors.map((_, i) => ({\n      startX: polarX(innerStepAngle * i),\n      startY: polarY(innerStepAngle * i),\n      endX: polarX(innerStepAngle * (i + 1)),\n      endY: polarY(innerStepAngle * (i + 1)),\n    }));\n\n    // console.log('outerColors', outerColors)\n    const outerR = r * 1.5;\n    const outerPolarX = (angle) => cx + Math.sin(angle) * outerR;\n    const outerPolarY = (angle) => cy + Math.cos(angle) * outerR;\n    const outerStepAngle = (2 * Math.PI) / outerColors.length;\n    const outerPoints = outerColors.map((_, i) => ({\n      startX: outerPolarX(outerStepAngle * i),\n      startY: outerPolarY(outerStepAngle * i),\n      endX: outerPolarX(outerStepAngle * (i + 1)),\n      endY: outerPolarY(outerStepAngle * (i + 1)),\n    }));\n\n    // const borderOpacity = isSelect ? 1 : 0;\n\n    return (\n      <g\n        id=\"unit-g\"\n        onClick={(e) => handleClick(e, doi)}\n        cursor=\"pointer\"\n        onMouseEnter={() => handleHover(doi)}\n        onMouseLeave={() => handleHoverOut()}\n      >\n        <title>{title}</title>\n\n        {isBackgroundActive && (\n          <g id=\"unit-background-g\">\n            <rect\n              x={cx - 1.6 * r}\n              y={cy - 1.6 * r}\n              width={r * 3.2}\n              height={r * 3.2}\n              fill=\"#fc8d62\"\n              rx={r * 0.4}\n              ry={r * 0.4}\n            />\n            <circle cx={cx} cy={cy} r={1.3 * r} fill=\"#eee\" />\n          </g>\n        )}\n        <g id=\"unit-border-g\">\n          {/* <circle\n            cx={cx}\n            cy={cy}\n            r={1.4 * r}\n            fill=\"none\"\n            stroke={borderColor}\n            strokeWidth={0.6 * r}\n            opacity={borderOpacity}\n          /> */}\n          {outerPoints.length > 1 ? (\n            outerPoints.map((point, i) => (\n              <path\n                key={i}\n                d={`M ${cx} ${cy}\n              L ${point.startX} ${point.startY}\n              A ${outerR} ${outerR} 0 0 0 ${point.endX} ${point.endY}\n              Z\n              `}\n                // stroke=\"white\"\n                fill={outerColors[i]}\n                // strokeWidth={0.1 * r}\n                // fill-opacity=\"0.2\"\n              />\n            ))\n          ) : (\n            <circle\n              cx={cx}\n              cy={cy}\n              r={outerR}\n              fill={outerColors.length > 0 ? outerColors[0] : \"none\"}\n              // stroke=\"red\"\n              // strokeWidth={0.15 * r}\n            />\n          )}\n          {/* {outerPoints.length > 0 && <circle\n            cx={cx}\n            cy={cy}\n            r={1.2 * r}\n            fill=\"white\"\n            // stroke={borderColor}\n            // strokeWidth={0.6 * r}\n            // opacity={borderOpacity}\n          />} */}\n          <circle\n            cx={cx}\n            cy={cy}\n            r={1.1 * r}\n            fill=\"white\"\n            // stroke={borderColor}\n            // strokeWidth={0.6 * r}\n            opacity={outerPoints.length > 0 ? 1 : 0}\n          />\n        </g>\n        <g id=\"unit-sector-g\" opacity={opacity}>\n          {innerPoints.length > 1 ? (\n            innerPoints.map((point, i) => (\n              <path\n                key={i}\n                d={`M ${cx} ${cy}\n              L ${point.startX} ${point.startY}\n              A ${r} ${r} 0 0 0 ${point.endX} ${point.endY}\n              Z\n              `}\n                stroke=\"white\"\n                fill={innerColors[i]}\n                strokeWidth={0.1 * r}\n                // fill-opacity=\"0.2\"\n              />\n            ))\n          ) : (\n            <circle\n              cx={cx}\n              cy={cy}\n              r={r}\n              fill={innerColors[0]}\n              // stroke=\"red\"\n              // strokeWidth={0.15 * r}\n            />\n          )}\n        </g>\n      </g>\n    );\n  }\n);\n\nexport default CircleUnit;\n","import React from \"react\";\nimport { get } from \"lodash\";\n\nconst tooltipWidthRatio = 0.25;\n\nconst PaperTooltip = ({\n  isShow,\n  paper,\n  paperCircle,\n  containerWidth,\n  containerHeight,\n}) => {\n  const xRatio = paperCircle.cx / containerWidth;\n  const tooltipWidth = containerWidth * tooltipWidthRatio;\n  const tooltipX = paperCircle.cx - tooltipWidth * xRatio;\n  const tooltipY = paperCircle.cy + 15;\n  const bottomStyle =\n    paperCircle.cy + 200 > containerHeight ? \"translateY(-150%)\" : \"\";\n  const style = {\n    transform: `translate(${tooltipX}px,${tooltipY}px) ${bottomStyle}`,\n    opacity: isShow ? 1 : 0,\n  };\n  return (\n    <div className=\"unit-tooltip\" style={style}>\n      <div className=\"unit-tooltip-title\">{get(paper, \"title\", \"\")}</div>\n      <div className=\"unit-tooltip-authors\">\n        {get(paper, \"authors\", []).join(\"; \")} ({paper.year})\n      </div>\n    </div>\n  );\n};\n\nexport default PaperTooltip;\n","import React, { useEffect, useState } from \"react\";\nimport \"./index.scss\";\nimport CircleUnit from \"./CircleUnit\";\nimport PaperTooltip from \"./PaperTooltip\";\nimport { useGlobalStore } from \"Store\";\nimport { observer } from \"mobx-react-lite\";\nimport { toJS } from \"mobx\";\nimport { get } from \"lodash\";\nimport * as d3 from \"d3\";\n\nconst unitLayoutPadding = {\n  top: 30,\n  left: 40,\n  right: 15,\n  bottom: 1,\n};\n\nconst unitBlockPadding = {\n  top: 2,\n  left: 3,\n  right: 3,\n  bottom: 1,\n};\n\nconst UnitView = observer(() => {\n  const store = useGlobalStore();\n  const {\n    papers,\n    unitXAttr,\n    unitYAttr,\n    unitXAttrList,\n    unitYAttrList,\n    unitBlockCount,\n    maxUnitBlockPaperCount,\n    // doi2paperBlockPos,\n    // doi2privateTags,\n    // doi2publicTags,\n    // doi2comments,\n    // doi2colors,\n    controlIsActive,\n    isUnitOuterHighlight,\n    currentSelected,\n    setCurrentSelected,\n    isSelected,\n    cancelSelect,\n    currentSelectedRefSet,\n    currentSelectedCitedSet,\n    searchPaperDoiSet,\n    // setTooltipPos,\n    // tooltipX,\n    // tooltipY,\n  } = store;\n\n  // const svg = document.querySelector(\"#unit-svg\");\n  // const svgWidth =\n  //   svg.clientWidth - unitLayoutPadding.left - unitLayoutPadding.right;\n  // const svgHeight =\n  //   svg.clientHeight - unitLayoutPadding.top - unitLayoutPadding.bottom;\n\n  const [svgWidth, setSvgWidth] = useState(0);\n  const [svgHeight, setSvgHeight] = useState(0);\n\n  // 初始化svg长宽\n  useEffect(() => {\n    const svg = document.querySelector(\"#unit-svg\");\n    setSvgWidth(\n      svg.clientWidth - unitLayoutPadding.left - unitLayoutPadding.right\n    );\n    setSvgHeight(\n      svg.clientHeight - unitLayoutPadding.top - unitLayoutPadding.bottom\n    );\n  }, []);\n  const unitBlockWidth =\n    unitXAttrList.length > 0\n      ? svgWidth / unitXAttrList.length -\n        unitBlockPadding.left -\n        unitBlockPadding.right\n      : 0;\n  const unitBlockHeight =\n    unitYAttrList.length > 0\n      ? svgHeight / unitYAttrList.length -\n        unitBlockPadding.top -\n        unitBlockPadding.bottom\n      : 0;\n  // console.log(unitBlockWidth, unitBlockHeight);\n\n  const aspectRatio = Math.floor(\n    unitBlockWidth > 0 ? unitBlockHeight / unitBlockWidth : 1\n  );\n\n  const blockCountX = Math.ceil(\n    Math.sqrt(maxUnitBlockPaperCount / aspectRatio)\n  );\n  // console.log('blockCountX', blockCountX);\n\n  const xAttr2blockCountX = unitXAttrList.map((xAttr, i) => {\n    const maxColumnBlockCount = Math.max(\n      ...unitYAttrList.map((yAttr, j) => get(unitBlockCount, [xAttr, yAttr], 0))\n    );\n    let blockCountX = Math.ceil(\n      Math.sqrt(maxUnitBlockPaperCount / aspectRatio)\n    );\n    if (maxColumnBlockCount > maxUnitBlockPaperCount) {\n      blockCountX += 1;\n    }\n    return blockCountX;\n  });\n  // console.log(\"xAttr2blockCountX\", xAttr2blockCountX);\n\n  // const blockCountY = Math.ceil(aspectRatio * blockCountX);\n\n  let r = unitBlockWidth / blockCountX;\n  // console.log(\"r\", r);\n\n  const xAttr2blockCountX_StartCount = [0];\n  const xAttr2blockCountX_StartPos = [0];\n\n  for (let i = 1; i < unitXAttrList.length; i++) {\n    xAttr2blockCountX_StartCount.push(\n      xAttr2blockCountX_StartCount[i - 1] + xAttr2blockCountX[i - 1]\n    );\n  }\n\n  r =\n    (svgWidth -\n      (unitBlockPadding.left + unitBlockPadding.right) * unitXAttrList.length) /\n    (xAttr2blockCountX_StartCount[xAttr2blockCountX_StartCount.length - 1] +\n      xAttr2blockCountX[xAttr2blockCountX.length - 1]);\n  // console.log(\"new r\", r);\n\n  for (let i = 1; i < unitXAttrList.length; i++) {\n    xAttr2blockCountX_StartPos.push(\n      xAttr2blockCountX_StartCount[i] * r +\n        (unitBlockPadding.left + unitBlockPadding.right) * i\n    );\n  }\n  // console.log(\"xAttr2blockCountX_StartCount\", xAttr2blockCountX_StartCount);\n  // console.log(\"xAttr2blockCountX_StartPos\", xAttr2blockCountX_StartPos);\n  const scale = d3.scaleLinear().domain([0, 100]).range([0.25, 0.8]);\n  const citeCount2grey = (count) => d3.interpolateGreys(scale(count));\n  const paperCircles = papers.map((paper) => {\n    const paperCircle = {};\n    paperCircle.oriData = toJS(paper);\n\n    paperCircle.BlockIndexX = unitXAttrList.indexOf(paper[unitXAttr]);\n    paperCircle.BlockIndexY = unitYAttrList.includes(paper[unitYAttr])\n      ? unitYAttrList.indexOf(paper[unitYAttr])\n      : unitYAttrList.length - 1;\n\n    const doi = paper.doi;\n    paperCircle.doi = doi;\n\n    paperCircle.circleIndexX =\n      paper.unitIndex % xAttr2blockCountX[paperCircle.BlockIndexX];\n    paperCircle.circleIndexY = Math.floor(\n      paper.unitIndex / xAttr2blockCountX[paperCircle.BlockIndexX]\n    );\n\n    paperCircle.cx =\n      unitLayoutPadding.left +\n      paperCircle.BlockIndexX *\n        (unitBlockWidth + unitBlockPadding.left + unitBlockPadding.right) +\n      (paperCircle.circleIndexX + 0.5) * r;\n    paperCircle.cy =\n      unitLayoutPadding.top +\n      paperCircle.BlockIndexY *\n        (unitBlockHeight + unitBlockPadding.top + unitBlockPadding.bottom) +\n      (paperCircle.circleIndexY + 0.5) * r;\n\n    // 外挂逻辑\n    if (paper[\"year\"] === \"2004\" && paperCircle.BlockIndexY > 0) {\n      paperCircle.cy += 50 - paperCircle.BlockIndexY * 10;\n    }\n\n    paperCircle.cx =\n      unitLayoutPadding.left +\n      xAttr2blockCountX_StartPos[paperCircle.BlockIndexX] +\n      (paperCircle.circleIndexX + 0.5) * r;\n\n    paperCircle.citationGrey = citeCount2grey(paper.citationCount);\n    paperCircle.activeColors = paper.innerColors;\n    // paperCircle.colors =\n    //   paperCircle.activeColors.length > 0\n    //     ? paperCircle.activeColors\n    //     : [paperCircle.citationGrey];\n    paperCircle.innerColors =\n      paperCircle.activeColors.length > 0\n        ? paperCircle.activeColors\n        : [paperCircle.citationGrey];\n    // paperCircle.outerColors\n    paperCircle.outerColors = [\"none\"];\n    if (isUnitOuterHighlight) {\n      paperCircle.outerColors = paper.outerColors;\n    } else {\n      if (isSelected) {\n        if (currentSelected === paper.doi)\n          paperCircle.outerColors = [\"#d95f02\"];\n        if (currentSelectedRefSet.has(paper.doi))\n          paperCircle.outerColors = [\"#1b9e77\"];\n        if (currentSelectedCitedSet.has(paper.doi))\n          paperCircle.outerColors = [\"#7570b3\"];\n      } else {\n        paperCircle.outerColors = [\"none\"];\n      }\n    }\n\n    paperCircle.opacity = controlIsActive\n      ? paper.innerColors.length + paper.outerColors.length > 0\n        ? 0.8\n        : 0.4\n      : 0.8;\n\n    paperCircle.title = paper.Title;\n\n    if (isSelected) {\n      if (currentSelected === paper.doi) paperCircle.borderColor = \"#d95f02\";\n      if (currentSelectedRefSet.has(paper.doi))\n        paperCircle.borderColor = \"#1b9e77\";\n      if (currentSelectedCitedSet.has(paper.doi))\n        paperCircle.borderColor = \"#7570b3\";\n    } else {\n      paperCircle.borderColor = \"none\";\n    }\n\n    paperCircle.isBackgroundActive = searchPaperDoiSet.has(paper.doi);\n\n    return paperCircle;\n  });\n\n  const xLabels = unitXAttrList.map((xAttr, i) => {\n    const startX = unitLayoutPadding.left + xAttr2blockCountX_StartPos[i];\n    const middleX = startX + (xAttr2blockCountX[i] * r) / 2;\n    return {\n      value: xAttr,\n      x: middleX,\n      y: unitLayoutPadding.top * 0.8,\n    };\n  });\n\n  const yLabels = unitYAttrList.map((yAttr, i) => {\n    const startY =\n      unitLayoutPadding.top +\n      (unitBlockHeight + unitBlockPadding.top + unitBlockPadding.bottom) * i;\n    return {\n      value: yAttr,\n      x: unitLayoutPadding.left * 0.35,\n      y: startY,\n    };\n  });\n\n  const handleClickPaper = (e, doi) => {\n    // console.log(\"click\", e, doi);\n    e.stopPropagation();\n    setCurrentSelected(doi);\n  };\n\n  const handleClickBackground = () => {\n    cancelSelect();\n  };\n\n  const [hoverDoi, setHoverDoi] = useState(\"\");\n  const hoverPaper =\n    hoverDoi.length > 0 ? papers.find((paper) => paper.doi === hoverDoi) : {};\n  const hoverPaperCircle =\n    hoverDoi.length > 0\n      ? paperCircles.find((paper) => paper.doi === hoverDoi)\n      : {};\n\n  const handleHover = (doi) => {\n    console.log(\"===> hover\", doi);\n    setHoverDoi(doi);\n  };\n  const handleHoverOut = () => {\n    console.log(\"===> mouse leave\");\n    setHoverDoi(\"\");\n  };\n\n  return (\n    <div className=\"unit-view\">\n      <svg\n        id=\"unit-svg\"\n        width=\"100%\"\n        height=\"100%\"\n        onClick={handleClickBackground}\n      >\n        <g id=\"units\">\n          {r > 0 &&\n            paperCircles.map((paper, i) => (\n              <CircleUnit\n                key={i}\n                cx={paper.cx}\n                cy={paper.cy}\n                r={r / 2.4}\n                // grey={paper.citationGrey}\n                // oriData={paper.oriData}\n                doi={paper.doi}\n                colors={paper.colors}\n                opacity={paper.opacity}\n                innerColors={paper.innerColors}\n                outerColors={paper.outerColors}\n                handleClick={handleClickPaper}\n                // isSelect={isSelected && currentSelected === paper.doi}\n                borderOpacity={paper.borderOpacity}\n                borderColor={paper.borderColor}\n                title={paper.title}\n                isBackgroundActive={paper.isBackgroundActive}\n                handleHover={handleHover}\n                handleHoverOut={handleHoverOut}\n              />\n            ))}\n        </g>\n        <g id=\"x-label\">\n          {r > 0 &&\n            xLabels.map((label) => (\n              <text\n                key={label.value}\n                x={label.x}\n                y={label.y}\n                textAnchor=\"middle\"\n                fontSize={r * 1.6}\n                fill=\"rgb(78, 78, 78)\"\n              >\n                {label.value}\n              </text>\n            ))}\n        </g>\n        <g id=\"y-label\">\n          {r > 0 &&\n            yLabels.map((label) => (\n              <text\n                key={label.value}\n                // x={label.x}\n                // y={label.y}\n                // textAnchor=\"start\"\n                transform={`translate(${label.x}, ${label.y}) rotate(90)`}\n                fontSize={r * 1.6}\n                fill=\"rgb(78, 78, 78)\"\n              >\n                {label.value}\n              </text>\n            ))}\n        </g>\n      </svg>\n      <PaperTooltip\n        isShow={hoverDoi.length > 0}\n        paper={hoverPaper}\n        containerWidth={svgWidth}\n        containerHeight={svgHeight}\n        paperCircle={hoverPaperCircle}\n      />\n    </div>\n  );\n});\n\nexport default UnitView;\n","import React, { useState, useRef, useEffect } from \"react\";\nimport \"./index.scss\";\nimport { useGlobalStore } from \"Store\";\nimport { observer } from \"mobx-react-lite\";\nimport { get } from \"lodash\";\nimport { Switch } from \"antd\";\nimport { CloseOutlined, CheckOutlined } from \"@ant-design/icons\";\nimport { Tag, Input } from \"antd\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport { toJS } from \"mobx\";\n\nconst debug = true;\n\nconst DetailView = observer(() => {\n  const store = useGlobalStore();\n  const { currentSelectedPaper, setPaper } = store;\n  const paper = currentSelectedPaper;\n  debug && console.log(\"currentSelectedPaper\", toJS(currentSelectedPaper));\n  if (!currentSelectedPaper) {\n    return <div></div>;\n  }\n\n  const doi = get(paper, \"doi\", \"\");\n\n  const editTags = [\n    {\n      title: \"Private Tags\",\n      value: \"privateTags\",\n      initTags: get(paper, \"privateTags\", []),\n    },\n    {\n      title: \"Public Tags\",\n      value: \"publicTags\",\n      initTags: get(paper, \"publicTags\", []),\n    },\n  ];\n  const handleChangeTags = (attr, value) => {\n    doi && setPaper(doi, attr, value);\n  };\n  const handleChangeRead = (value) => {\n    setPaper(doi, \"read\", value);\n  };\n  return (\n    <div className=\"detail-view\" key={doi}>\n      {paper && (\n        <>\n          <div className=\"detail-title\">{paper.title}</div>\n          <div className=\"detail-authors\">\n            {get(paper, \"authors\", []).join(\"; \")} ({paper.year})\n          </div>\n          <div className=\"detail-edit-tags\">\n            <div className=\"detail-edit-read\">\n              <div className=\"detail-edit-title\">Read</div>\n              <Switch\n                size=\"small\"\n                checkedChildren={<CheckOutlined />}\n                unCheckedChildren={<CloseOutlined />}\n                defaultChecked={get(paper, \"read\", false)}\n                onChange={handleChangeRead}\n              />\n            </div>\n            {editTags.map((editTag) => (\n              <DetailEditTags\n                key={editTag.value}\n                title={editTag.title}\n                initTags={editTag.initTags}\n                handleChangeTags={(value) =>\n                  handleChangeTags(editTag.value, value)\n                }\n              />\n            ))}\n          </div>\n          <div className=\"detail-attrs\">\n            <div className=\"detail-attr\">\n              <div className=\"detail-key\">keywords:</div>\n              <div className=\"detail-content\">\n                {get(paper, \"keywords\", []).join(\"; \")}\n              </div>\n            </div>\n            <DetailItem paper={paper} label={\"doi\"} />\n            <DetailItem paper={paper} label={\"affiliation\"} />\n            <DetailItem paper={paper} label={\"abstract\"} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n});\n\nexport default DetailView;\n\nconst DetailItem = ({ paper, label }) => (\n  <div className=\"detail-attr\">\n    <div className=\"detail-key\">{label}:</div>\n    <div className=\"detail-content\">{get(paper, label, \"\")}</div>\n  </div>\n);\n\nconst DetailEditTags = ({ title, initTags, handleChangeTags }) => {\n  const [tags, _setTags] = useState(initTags);\n  const setTags = (newTags) => {\n    handleChangeTags(newTags);\n    _setTags(newTags);\n  };\n  const [editInputIndex, setEditInputIndex] = useState(-1);\n  // const [editInput, setEditInput] = useState();\n  // const saveEditInputRef = (input) => setEditInput(input);\n  const input = useRef();\n  // const saveInputRef = (input) => setInput(input);\n\n  const [editInputValue, setEditInputValue] = useState(\"\");\n  const handleEditInputConfirm = () => {\n    const newTags = [...tags];\n    newTags[editInputIndex] = editInputValue;\n    setTags(newTags);\n    setEditInputIndex(-1);\n    setEditInputValue(\"\");\n  };\n\n  const [inputValue, setInputValue] = useState(\"\");\n  const handleInputConfirm = () => {\n    if (inputValue && tags.indexOf(inputValue) < 0) {\n      setTags([...tags, inputValue]);\n      setInputVisible(false);\n      setInputValue(\"\");\n    }\n  };\n\n  const handleClose = (removeTag) => {\n    setTags(tags.filter((tag) => tag !== removeTag));\n  };\n\n  const [inputVisible, setInputVisible] = useState(false);\n  const showInput = () => {\n    setInputVisible(true);\n    // input.focus();\n  };\n  return (\n    <div className=\"detail-edit-tag\">\n      <div className=\"detail-edit-title\">{title}:</div>\n      <div className=\"detail-edit-tags\">\n        <>\n          {tags.map((tag, index) => {\n            if (editInputIndex === index) {\n              return (\n                <Input\n                  // ref={saveEditInputRef}\n                  key={tag}\n                  size=\"small\"\n                  className=\"tag-input\"\n                  value={editInputValue}\n                  onchange={(e) => setEditInputValue(e.target.value)}\n                  onBlur={handleEditInputConfirm}\n                  onPressEnter={handleEditInputConfirm}\n                />\n              );\n            }\n\n            const tagElem = (\n              <Tag\n                className=\"edit-tag\"\n                key={tag}\n                closable={true}\n                onClose={() => handleClose(tag)}\n              >\n                <span\n                // onDoubleClick={(e) => {\n                //   setEditInputIndex(index);\n                //   setEditInputValue(tag);\n                //   editInput.focus();\n                //   e.preventDefault();\n                // }}\n                >\n                  {tag}\n                </span>\n              </Tag>\n            );\n            return tagElem;\n          })}\n          {inputVisible && (\n            <Input\n              ref={input}\n              type=\"text\"\n              size=\"small\"\n              className=\"tag-input\"\n              value={inputValue}\n              onChange={(e) => setInputValue(e.target.value)}\n              onBlur={handleInputConfirm}\n              onPressEnter={handleInputConfirm}\n            />\n          )}\n          {!inputVisible && (\n            <Tag className=\"site-tag-plus\" onClick={showInput}>\n              <PlusOutlined /> New Tag\n            </Tag>\n          )}\n        </>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport { useGlobalStore } from \"Store\";\n\nimport ControlView from \"./ControlView\";\nimport UnitView from \"./UnitView\";\nimport DetailView from \"./DetailView\";\n\nconst ManagePage = () => {\n  const store = useGlobalStore();\n  useEffect(() => {\n    store.setCurrentPage();\n    store.initPapers();\n    store.initUserId();\n  }, []);\n  return (\n    <div className=\"main-container\">\n      <div className=\"control-main-container\">\n        <div className=\"control-view-container\">\n          <ControlView />\n        </div>\n        <div className=\"unit-view-container\">\n          <UnitView />\n        </div>\n      </div>\n      <div className=\"detail-view-container\">\n        <DetailView />\n      </div>\n    </div>\n  );\n};\n\nexport default ManagePage;\n","import { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\n\n// 初始化，确定长宽\nconst useClientRect = ({ svgId }) => {\n  const [clientRect, setClientRect] = useState({ width: 0, height: 0 });\n  useEffect(() => {\n    const svg = d3.select(`#${svgId}`);\n    // svg.selectAll(\"*\").remove();\n    const clientRect = svg.node().getClientRects()[0];\n    setClientRect(clientRect);\n  }, [svgId]);\n  return clientRect;\n};\n\nexport default useClientRect;\n","import React, { useEffect } from \"react\";\nimport \"./index.scss\";\nimport * as d3 from \"d3\";\nimport { useClientRect } from \"Hooks\";\nimport { anaTimeSvgPadding as padding } from \"Common\";\n\nconst TimeLine = React.memo(\n  ({\n    data,\n    onInput = () => {},\n    onChange = () => {},\n    setClearBrushTrigger = () => {},\n    anaFilterType = 'none',\n    setAnaFilterType = () => {},\n  }) => {\n    // const padding = anaTimeSvgPadding;\n    const clientRect = useClientRect({\n      svgId: \"ana-time-line-svg\",\n    });\n    const { width, height } = clientRect;\n\n    const initYearRange = [d3.min(data, (d) => d.x), d3.max(data, (d) => d.x)];\n    useEffect(() => {\n      onInput(initYearRange);\n    }, []);\n\n    useEffect(() => {\n      if (data.length === 0 || width === 0 || height === 0) return;\n      const x = d3\n        .scaleBand()\n        .domain(data.map((d) => d.x))\n        .range([padding.left, width - padding.right])\n        .padding(0.2);\n      const y = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, (d) => d.all)])\n        .nice()\n        .range([height - padding.bottom, padding.top]);\n\n      const xAxis = (g) =>\n        g\n          .attr(\n            \"transform\",\n            \"translate(\" + 0 + \", \" + (height - padding.bottom) + \")\"\n          )\n          .call(\n            d3\n              .axisBottom(x)\n              .tickValues(d3.range(initYearRange[0], initYearRange[1], 5))\n              .tickSizeOuter(0)\n          );\n      const yAxis = (g) =>\n        g\n          .attr(\"transform\", `translate(${width - padding.right},0)`)\n          .call(d3.axisRight(y).ticks(6))\n          // .call((g) => g.select(\".domain\").remove());\n\n      const svg = d3.select(\"#ana-time-line-svg\");\n      // svg.selectAll(\"*\").remove();\n      const barsG = svg.append(\"g\").classed(\"non-active-bars\", true);\n      const bars = barsG\n        .selectAll(\"rect\")\n        .data(data)\n        .join(\"rect\")\n        .attr(\"x\", (d) => (d.rectX = x(d.x)))\n        .attr(\"y\", (d) => y(d.all))\n        .attr(\"height\", (d) => y(0) - y(d.all))\n        .attr(\"width\", x.bandwidth());\n\n      const highlightBarsG = svg\n        .append(\"g\")\n        .classed(\"active-bars\", true)\n        .classed(\"highlight-bars\", true);\n\n      svg.append(\"g\").attr(\"class\", \"x-axis\").call(xAxis);\n\n      svg.append(\"g\").attr(\"class\", \"y-axis\").call(yAxis);\n\n      const brushStart = () => {\n        setAnaFilterType(\"year\");\n      };\n\n      const brushing = ({ selection }) => {\n        bars.classed(\n          \"active-bars\",\n          (bar) =>\n            bar.rectX + x.bandwidth() > selection[0] && bar.rectX < selection[1]\n        );\n        const brushYear = data\n          .filter(\n            (d) =>\n              d.rectX + x.bandwidth() > selection[0] && d.rectX < selection[1]\n          )\n          .map((d) => d.x);\n        brushYear.length >= 1\n          ? onInput([brushYear[0], brushYear[brushYear.length - 1]])\n          : onInput(initYearRange);\n      };\n      const brushEnd = ({ selection }) => {\n        if (selection) {\n          const brushYear = data\n            .filter(\n              (d) =>\n                d.rectX + x.bandwidth() > selection[0] && d.rectX < selection[1]\n            )\n            .map((d) => d.x);\n          brushYear.length >= 1\n            ? onChange([brushYear[0], brushYear[brushYear.length - 1]])\n            : onChange(initYearRange);\n        } else {\n          bars.classed(\"active-bars\", false);\n          onInput(initYearRange);\n          setAnaFilterType(\"none\");\n          onChange(initYearRange);\n        }\n      };\n      const brush = d3\n        .brushX()\n        .extent([\n          [padding.left, padding.top * 0.3],\n          [width - padding.right, height - padding.bottom],\n        ])\n        .on(\"start\", brushStart)\n        .on(\"brush\", brushing)\n        .on(\"end\", brushEnd);\n\n      svg.call(brush);\n\n      setClearBrushTrigger(() => {\n        d3.brush().move(svg);\n        bars.classed(\"active-bars\", false);\n        onInput(initYearRange);\n      });\n    }, [clientRect]);\n\n    useEffect(() => {\n      if (\n        width === 0 ||\n        height === 0\n        // ||\n        // anaFilterType === \"year\" ||\n        // anaFilterType === \"none\"\n      )\n        return;\n      const svg = d3.select(\"#ana-time-line-svg\");\n      const highlightBarsG = svg.select(\".highlight-bars\");\n      if (anaFilterType === \"year\" || anaFilterType === \"none\") {\n        highlightBarsG.selectAll(\"rect\").attr(\"height\", 0);\n      } else {\n        const x = d3\n          .scaleBand()\n          .domain(data.map((d) => d.x))\n          .range([padding.left, width - padding.right])\n          .padding(0.2);\n        const y = d3\n          .scaleLinear()\n          .domain([0, d3.max(data, (d) => d.all)])\n          .nice()\n          .range([height - padding.bottom, padding.top]);\n        const highlightBars = highlightBarsG\n          .selectAll(\"rect\")\n          .data(data)\n          .join(\"rect\")\n          .attr(\"x\", (d) => x(d.x))\n          .attr(\"y\", (d) => y(d.highlight))\n          .attr(\"height\", (d) => y(0) - y(d.highlight))\n          .attr(\"width\", x.bandwidth());\n      }\n    }, [data, anaFilterType]);\n    return <svg id=\"ana-time-line-svg\" width=\"100%\" height=\"100%\" />;\n  }\n);\n\nexport default TimeLine;\n","import React, { memo, useState } from \"react\";\nimport \"./index.scss\";\nimport { Tabs } from \"antd\";\nimport { useClientRect } from \"Hooks\";\nimport * as d3 from \"d3\";\nimport { anaSvgPadding } from \"Common\";\n\nconst { TabPane } = Tabs;\n\nconst TagFilter = memo(({ dataSource, anaFilterType, onChange }) => {\n  return (\n    <Tabs\n    // defaultActiveKey={currentTab}\n    // onChange={setCurrentTab}\n    >\n      {dataSource.map((data) => (\n        <TabPane key={data.label} tab={data.label}>\n          <HorizontalBar\n            {...data}\n            isHighlight={anaFilterType !== \"none\"}\n            onChange={onChange}\n          />\n        </TabPane>\n      ))}\n    </Tabs>\n  );\n});\n\nconst HorizontalBar = ({ value, data, isHighlight, onChange }) => {\n  // console.log(label, value, data);\n  const divId = `tag-filter-${value}`;\n  // const clientRect = useClientRect({ svgId: divId });\n  // const { width = 0 } = clientRect;\n  const barHeight = 16;\n\n  data = data.filter((d) => d.all > 0).sort((a, b) => b.all - a.all);\n  const x = d3\n    .scaleLinear()\n    .domain([0, d3.max(data, (d) => d.all)])\n    .nice()\n    .range([0, 90]);\n\n  return (\n    <div id={divId} style={{paddingBottom: 20}} >\n      {data.map((d) => (\n        <div\n          className=\"tag-bar-row\"\n          key={d.label}\n          onClick={() =>\n            onChange({\n              anaHighCate: value,\n              anaHighTag: d.label,\n            })\n          }\n        >\n          <div className=\"tag-label single-row\">\n            {d.label === \"Usa\" ? \"USA\" : d.label}\n          </div>\n          <div className=\"tag-bar-container\">\n            <div\n              className=\"tag-bar bar\"\n              style={{ width: `${x(d.all)}%`, height: barHeight }}\n            />\n            {isHighlight && (\n              <div\n                className=\"active-tag-bar highlight-bar-blue bar\"\n                style={{ width: `${x(d.highlight)}%`, height: barHeight }}\n              />\n            )}\n          </div>\n          <div className=\"tag-count\">\n            {isHighlight && (\n              <div className=\"tag-count-highlight highlight-blue\">\n                {d.highlight}\n                &nbsp;/&nbsp;\n              </div>\n            )}\n            <div>{d.all}</div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default TagFilter;\n","import React, { memo, useState } from \"react\";\nimport \"./index.scss\";\nimport TimeLine from \"Components/TimeLine\";\nimport { observer } from \"mobx-react-lite\";\nimport { useGlobalStore } from \"Store\";\nimport TagFilter from \"./TagFilter\";\n\nconst TagView = observer(() => {\n  const store = useGlobalStore();\n  const {\n    analysisPapers,\n    anaHighPapers,\n    setClearBrushTrigger,\n    anaTimeData,\n    anaTagViewData,\n\n    setAnaHighPapersByYear,\n    setAnaHighPapersByTag,\n    anaFilterType,\n    setAnaFilterType,\n\n    anaHighTag,\n  } = store;\n  const [yearSelecting, setYearSelecting] = useState([0, 0]);\n  return (\n    <div className=\"tag-view-container\">\n      <div className=\"tag-header\">\n        <div className=\"analysis-paper-count\">\n          <AnaPaperCount\n            isAll={anaFilterType === \"none\"}\n            allCount={analysisPapers.length}\n            highlightCount={anaHighPapers.length}\n          />\n        </div>\n        {anaFilterType === \"none\" || (\n          <div className=\"selected-highlight-attr highlight-bar-blue\">{`${\n            anaHighTag === \"Usa\" ? \"USA\" : anaHighTag\n          }`}</div>\n        )}\n      </div>\n      <div className=\"tag-highlight-tabs-container\">\n        <TagFilter\n          dataSource={anaTagViewData}\n          onChange={setAnaHighPapersByTag}\n          // setChangeType={setAnaFilterType}\n          anaFilterType={anaFilterType}\n        />\n      </div>\n      <div className=\"tag-time-line\">\n        <div className=\"year-seleted-text\">{yearSelecting.join(\"-\")}</div>\n        <div className=\"time-line-div\">\n          {anaTimeData.length > 0 && (\n            <TimeLine\n              data={anaTimeData}\n              onInput={setYearSelecting}\n              onChange={setAnaHighPapersByYear}\n              setClearBrushTrigger={setClearBrushTrigger}\n              setAnaFilterType={setAnaFilterType}\n              anaFilterType={anaFilterType}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nconst AnaPaperCount = memo(({ isAll, allCount, highlightCount = 0 }) =>\n  isAll ? (\n    <span className=\"paper-all-count\">Papers: {allCount}</span>\n  ) : (\n    <>\n      <span className=\"paper-all-count\">Papers: </span>\n      <span className=\"paper-highlight-count highlight-blue\">\n        {highlightCount}\n      </span>\n      <span className=\"paper-all-count\">&nbsp;/&nbsp;{allCount}</span>\n    </>\n  )\n);\n\nexport default TagView;\n","import React, { useState, useEffect } from \"react\";\nimport \"./index.scss\";\nimport { observer } from \"mobx-react-lite\";\nimport { useGlobalStore } from \"Store\";\nimport { useClientRect } from \"Hooks\";\nimport * as d3 from \"d3\";\nimport { Slider } from \"antd\";\nimport { find_d } from \"Common\";\n\nconst ProjectionView = observer(() => {\n  const svgId = \"ana-projection-map-svg\";\n  const store = useGlobalStore();\n  const {\n    drawProjectionFlag,\n    analysisPapers,\n    anaHighPapers,\n    num_topics,\n    resetProjectionFlag,\n    setNumTopics,\n    defaultHighColor,\n    topicColorScale,\n    anaFilterType,\n    anaHighTopic,\n    setAnaSelectHighlightPaperDoi,\n    anaSelectHighlightPaperDoi,\n    setHighEntityLinkData,\n    anaHighEntityTopic,\n    setAnaHighEntityTopic,\n  } = store;\n  const [num_topics_ing, set_num_topics_ing] = useState(num_topics);\n\n  const clientRect = useClientRect({\n    svgId,\n  });\n  const { width, height } = clientRect;\n  useEffect(() => {\n    store.tryLda();\n  }, []);\n\n  const padding = {\n    left: 30,\n    right: 30,\n    top: 30,\n    bottom: 30,\n  };\n  const x = d3\n    .scaleLinear()\n    .domain([\n      d3.min(analysisPapers, (d) => d.projection[0]),\n      d3.max(analysisPapers, (d) => d.projection[0]),\n    ])\n    .nice()\n    .range([padding.left, width - padding.right]);\n  const y = d3\n    .scaleLinear()\n    .domain([\n      d3.min(analysisPapers, (d) => d.projection[1]),\n      d3.max(analysisPapers, (d) => d.projection[1]),\n    ])\n    .nice()\n    .range([height - padding.bottom, padding.top]);\n\n  // contour相关\n  const contours = d3.range(num_topics).map(\n    (topic_i) =>\n      d3\n        .contourDensity()\n        .x((d) => x(d.projection[0]))\n        .y((d) => y(d.projection[1]))\n        .size([width, height])\n        .bandwidth(30)\n        .thresholds(5)(\n        analysisPapers.filter((paper) =>\n          paper.topics.map((topic) => topic[0]).includes(topic_i)\n        )\n      )[0]\n  );\n  const contourOpacity = (topicIndex) => {\n    if (anaFilterType === \"none\") return 0.25;\n    else if (anaFilterType !== \"topic\") return 0.1;\n    else return topicIndex === anaHighTopic ? 0.36 : 0.1;\n  };\n\n  // paperCircle相关\n  const paperCircleR = d3\n    .scaleLinear()\n    .domain([0, d3.max(analysisPapers, (d) => +d.citationCount)])\n    .range([5, 10]);\n  const paperCircleColor = (paper) => {\n    if (paper.topics.length === 0) {\n      return \"#ccc\";\n    } else {\n      let mainTopic = paper.topics[0];\n      paper.topics.forEach((topic) => {\n        if (topic[1] > mainTopic[1]) {\n          mainTopic = topic;\n        }\n      });\n      return topicColorScale[mainTopic[0]];\n    }\n  };\n  const paperCircleOpacity = (paper) => {\n    if (anaSelectHighlightPaperDoi === paper.doi) return 1;\n    if (anaFilterType === \"none\") return 1;\n    return anaHighPapers.map((paper) => paper.doi).includes(paper.doi)\n      ? 0.8\n      : 0.2;\n  };\n  const paperCircleStrokeWidth = (paper) => {\n    if (anaSelectHighlightPaperDoi === paper.doi) return 6;\n    if (anaFilterType === \"none\") return 1;\n    if (anaFilterType === \"topic\") return 1;\n    return anaHighPapers.map((paper) => paper.doi).includes(paper.doi) ? 3 : 1;\n  };\n  const paperCircleDasharray = (paper) => {\n    if (anaSelectHighlightPaperDoi === paper.doi) return [4, 8];\n    if (anaFilterType === \"none\" || anaFilterType === \"topic\") return \"none\";\n    return anaHighPapers.map((paper) => paper.doi).includes(paper.doi)\n      ? [5, 5]\n      : \"none\";\n  };\n  const paperCircleStroke = (paper) => {\n    if (anaSelectHighlightPaperDoi === paper.doi) return \"red\";\n    if (anaFilterType === \"none\" || anaFilterType === \"topic\") return \"#fff\";\n    else\n      return anaHighPapers.map((paper) => paper.doi).includes(paper.doi)\n        ? \"#333\"\n        : \"none\";\n  };\n\n  // 主题Entity相关\n  const generateEntity = (topicIndex) => {\n    const allPapers = analysisPapers.filter((paper) =>\n      paper.topics.map((a) => a[0]).includes(topicIndex)\n    );\n    const mainPapers = analysisPapers.filter(\n      (paper) => paper.topics[0][0] === topicIndex\n    );\n    const positionX = x(\n      mainPapers.reduce((s, a) => s + a.projection[0], 0) / mainPapers.length\n    );\n    const positionY = y(\n      mainPapers.reduce((s, a) => s + a.projection[1], 0) / mainPapers.length\n    );\n    return {\n      allPapers,\n      topicIndex,\n      mainPapers,\n      positionX,\n      positionY,\n      color: topicColorScale[topicIndex],\n    };\n  };\n  const anaHighTopicEntity = generateEntity(anaHighTopic);\n  const anaHighTopicPaperDoiSet = new Set(\n    anaHighTopicEntity.allPapers.map((paper) => paper.doi)\n  );\n  const anaOtherEntities = d3\n    .range(num_topics)\n    .filter((a) => a !== anaHighTopic)\n    .map((topicIndex) => generateEntity(topicIndex));\n  anaOtherEntities.forEach((entity) => {\n    entity.intersectionPapers = entity.allPapers.filter((paper) =>\n      anaHighTopicPaperDoiSet.has(paper.doi)\n    );\n  });\n  const entityR = d3\n    .scaleLinear()\n    .domain(\n      d3.extent(\n        [...anaOtherEntities, anaHighTopicEntity],\n        (d) => d.allPapers.length\n      )\n    )\n    .range([30, 45]);\n  const getEntitySectorD = (entity) => {\n    const angle =\n      (2 * Math.PI * entity.intersectionPapers.length) /\n      entity.allPapers.length;\n    const r = entityR(entity.allPapers.length);\n    const start = {\n      x: entity.positionX,\n      y: entity.positionY - r,\n    };\n    const end = {\n      x: entity.positionX + Math.sin(angle) * r,\n      y: entity.positionY - Math.cos(angle) * r,\n    };\n    return `M ${entity.positionX} ${entity.positionY}\n          L ${start.x} ${start.y}\n          A ${r} ${r} 0 0 1 ${end.x} ${end.y}\n          Z\n          `;\n  };\n  const entityOpacity = (entity) => {\n    if (anaHighEntityTopic < 0) return 0.8;\n    else return entity.topicIndex === anaHighEntityTopic ? 1 : 0.6;\n  };\n\n  // 主题间Link相关\n  const topicLinks = anaOtherEntities.map((entity) => {\n    const topicIndex = entity.topicIndex;\n    const source = {\n      x: entity.positionX,\n      y: entity.positionY,\n    };\n    const target = {\n      x: anaHighTopicEntity.positionX,\n      y: anaHighTopicEntity.positionY,\n    };\n\n    const res = find_d(source.x, source.y, target.x, target.y, 25);\n    const citeControlPoints = [\n      {\n        x: res.x_1_3_negative,\n        y: res.y_1_3_negative,\n      },\n      {\n        x: res.x_2_3_negative,\n        y: res.y_2_3_negative,\n      },\n    ];\n    const citedControlPoints = [\n      {\n        x: res.x_1_3_positive,\n        y: res.y_1_3_positive,\n      },\n      {\n        x: res.x_2_3_positive,\n        y: res.y_2_3_positive,\n      },\n    ];\n    const interPapers = entity.allPapers.filter((paper) =>\n      anaHighTopicPaperDoiSet.has(paper.doi)\n    );\n    const interCount = interPapers.length;\n    const interPapersDoiSet = new Set(interPapers.map((paper) => paper.doi));\n    const independentPapers = entity.allPapers.filter(\n      (paper) => !interPapersDoiSet.has(paper.doi)\n    );\n    const centralEntityIndependentPapers = anaHighTopicEntity.allPapers.filter(\n      (paper) => !interPapersDoiSet.has(paper.doi)\n    );\n\n    const citeDoiSet = new Set(\n      independentPapers.reduce((s, a) => s.concat(a.refList), [])\n    );\n    const citePapers = centralEntityIndependentPapers.filter((paper) =>\n      citeDoiSet.has(paper.doi)\n    );\n    const citePapersDoiSet = new Set(citePapers.map((paper) => paper.doi));\n    const citeLinkCount = independentPapers.reduce(\n      (s, paper) =>\n        s + paper.refList.filter((doi) => citePapersDoiSet.has(doi)).length,\n      0\n    );\n    const citePaperCount = citePapers.length;\n\n    const citeSourcePapers = independentPapers.filter(\n      (paper) =>\n        paper.refList.filter((doi) => citePapersDoiSet.has(doi)).length > 0\n    );\n\n    const citedDoiSet = new Set(\n      centralEntityIndependentPapers.reduce((s, a) => s.concat(a.refList), [])\n    );\n    const citedPapers = independentPapers.filter((paper) =>\n      citedDoiSet.has(paper.doi)\n    );\n    const citedPapersDoiSet = new Set(citedPapers.map((paper) => paper.doi));\n    const citedLinkCount = centralEntityIndependentPapers.reduce(\n      (s, paper) =>\n        s + paper.refList.filter((doi) => citedPapersDoiSet.has(doi)).length,\n      0\n    );\n    const citedPaperCount = citedPapers.length;\n\n    return {\n      topicIndex,\n      source,\n      target,\n      citeControlPoints,\n      citedControlPoints,\n      independentPapers,\n      interPapers,\n      centralEntityIndependentPapers,\n      citeDoiSet,\n      citedDoiSet,\n      interCount,\n      citePapers,\n      citePaperCount,\n      citeLinkCount,\n      citedPapers,\n      citedPaperCount,\n      citedLinkCount,\n\n      citeSourcePapers,\n      citePapersDoiSet,\n    };\n  });\n  const _linkWidth = d3\n    .scaleLinear()\n    .domain([\n      0,\n      d3.max(topicLinks, (d) =>\n        d3.max([d.interCount, d.citeLinkCount, d.citedLinkCount])\n      ),\n    ])\n    .range([5, 20]);\n  const linkWidth = (weight) => (weight === 0 ? 0 : _linkWidth(weight));\n  const topicLinkOpacity = (topicLink) => {\n    if (anaHighEntityTopic < 0) return 0.7;\n    else return topicLink.topicIndex === anaHighEntityTopic ? 1 : 0.3;\n  };\n  const handleClickLinks = (link) => {\n    setAnaHighEntityTopic(link.topicIndex);\n    setHighEntityLinkData(\n      link.citeSourcePapers.map((paper) => paper.doi),\n      link.citedPapers.map((paper) => paper.doi),\n      link.centralEntityIndependentPapers.map((paper) => paper.doi)\n    );\n  };\n\n  return (\n    <div className=\"projection-view\">\n      <svg id={svgId} width=\"100%\" height=\"100%\">\n        <g id=\"topic-contours-g\" strokeLinejoin=\"round\" strokeWidth=\"1.5\">\n          {contours.map((contour, topicIndex) => (\n            <path\n              key={topicIndex}\n              d={d3.geoPath()(contour)}\n              fill={topicColorScale[topicIndex]}\n              opacity={contourOpacity(topicIndex)}\n              stroke={topicIndex === anaHighTopic ? \"#111\" : \"none\"}\n              strokeDasharray={topicIndex === anaHighTopic ? 5 : \"none\"}\n            />\n          ))}\n        </g>\n        <g id=\"paper-circles-g\" stroke=\"#fff\">\n          {analysisPapers.map((paper) => (\n            <circle\n              key={paper.doi}\n              cx={x(paper.projection[0])}\n              cy={y(paper.projection[1])}\n              r={\n                paperCircleR(+paper.citationCount) +\n                paperCircleStrokeWidth(paper)\n              }\n              fill={paperCircleColor(paper)}\n              strokeLinecap=\"round\"\n              strokeWidth={paperCircleStrokeWidth(paper)}\n              opacity={paperCircleOpacity(paper)}\n              strokeDasharray={paperCircleDasharray(paper)}\n              stroke={paperCircleStroke(paper)}\n              cursor=\"pointer\"\n              onClick={() => setAnaSelectHighlightPaperDoi(paper.doi)}\n            />\n          ))}\n        </g>\n        {anaFilterType === \"topic\" && (\n          <>\n            <g id=\"topic-links-g\" strokeLinecap=\"round\">\n              {topicLinks.map((topicLink) => (\n                <g\n                  key={topicLink.topicIndex}\n                  fill=\"none\"\n                  opacity={topicLinkOpacity(topicLink)}\n                  cursor=\"pointer\"\n                  onClick={() => handleClickLinks(topicLink)}\n                >\n                  <path\n                    className=\"cited\"\n                    stroke={topicColorScale[topicLink.topicIndex]}\n                    strokeWidth={linkWidth(topicLink.citedLinkCount)}\n                    d={`M${topicLink.source.x},${topicLink.source.y} \n                    C${topicLink.citedControlPoints[0].x},${topicLink.citedControlPoints[0].y}, \n                    ${topicLink.citedControlPoints[1].x},${topicLink.citedControlPoints[1].y}, \n                    ${topicLink.target.x},${topicLink.target.y}`}\n                  />\n                  <path\n                    className=\"cite\"\n                    stroke={topicColorScale[anaHighTopic]}\n                    strokeWidth={linkWidth(topicLink.citeLinkCount)}\n                    d={`M${topicLink.target.x},${topicLink.target.y}\n                    C${topicLink.citeControlPoints[1].x},${topicLink.citeControlPoints[1].y}, \n                    ${topicLink.citeControlPoints[0].x},${topicLink.citeControlPoints[0].y}, \n                    ${topicLink.source.x},${topicLink.source.y}`}\n                  />\n                </g>\n              ))}\n            </g>\n            <g id=\"topic-entities-g\">\n              <g id=\"selected-topic-entity-g\"></g>\n              <g id=\"others-topic-entities-g\" stroke=\"#fff\" strokeWidth=\"3\">\n                {anaOtherEntities.map((entity) => (\n                  <g key={entity.topicIndex} opacity={entityOpacity(entity)}>\n                    <circle\n                      cx={entity.positionX}\n                      cy={entity.positionY}\n                      r={entityR(entity.allPapers.length)}\n                      fill={entity.color}\n                    />\n                    <path\n                      fill={topicColorScale[anaHighTopic]}\n                      d={getEntitySectorD(entity)}\n                    />\n                  </g>\n                ))}\n              </g>\n            </g>\n          </>\n        )}\n      </svg>\n      <div className=\"topics-number-input\">\n        <div className=\"topics-number-input-text\">\n          Topics Num: {num_topics_ing}\n        </div>\n        <Slider\n          min={2}\n          max={10}\n          onAfterChange={setNumTopics}\n          onChange={set_num_topics_ing}\n          value={num_topics_ing}\n        />\n      </div>\n    </div>\n  );\n});\n\nexport default ProjectionView;\n","export default function find_distance_d(x0, y0, x1, y1, d) {\n  let points_dist = Math.sqrt( (x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1) )\n  let delta_x = (y1 - y0) * d / points_dist\n  let delta_y = (x1 - x0) * d / points_dist\n\n  let a0_positive, b0_positive\n  a0_positive = x0 - delta_x\n  b0_positive = y0 + delta_y\n  let x_1_3_positive, y_1_3_positive, x_2_3_positive, y_2_3_positive\n  x_1_3_positive = a0_positive + (x1 - x0) / 3\n  y_1_3_positive = b0_positive + (y1 - y0) / 3\n  x_2_3_positive = a0_positive + (x1 - x0) * 2 / 3\n  y_2_3_positive = b0_positive + (y1 - y0) * 2 / 3\n\n  let a0_negative, b0_negative\n  a0_negative = x0 + delta_x\n  b0_negative = y0 - delta_y\n  let x_1_3_negative, y_1_3_negative, x_2_3_negative, y_2_3_negative\n  x_1_3_negative = a0_negative + (x1 - x0) / 3\n  y_1_3_negative = b0_negative + (y1 - y0) / 3\n  x_2_3_negative = a0_negative + (x1 - x0) * 2 / 3\n  y_2_3_negative = b0_negative + (y1 - y0) * 2 / 3\n\n  return {\n    'x_1_3_positive': x_1_3_positive,\n    'y_1_3_positive': y_1_3_positive,\n    'x_2_3_positive': x_2_3_positive,\n    'y_2_3_positive': y_2_3_positive,\n    'x_1_3_negative': x_1_3_negative,\n    'y_1_3_negative': y_1_3_negative,\n    'x_2_3_negative': x_2_3_negative,\n    'y_2_3_negative': y_2_3_negative\n  }\n}\n","import React, { useEffect } from \"react\";\nimport \"./index.scss\";\nimport { observer } from \"mobx-react-lite\";\nimport { useGlobalStore } from \"Store\";\nimport { useClientRect } from \"Hooks\";\nimport * as d3 from \"d3\";\n\nconst NetworkView = observer(() => {\n  const svgId = \"ana-network-svg\";\n  const padding = {\n    left: 50,\n    right: 50,\n    top: 40,\n    bottom: 40,\n  };\n  const clientRect = useClientRect({\n    svgId,\n  });\n  const { width, height } = clientRect;\n\n  const store = useGlobalStore();\n  const {\n    analysisPapers,\n    topicColorScale,\n    anaFilterType,\n    anaHighTopic,\n    anaHighPapers,\n    setAnaSelectHighlightPaperDoi,\n    anaSelectHighlightPaperDoi,\n    anaHighEntityTopic,\n    anaHighEntityCitePaperDois,\n    anaHighEntityCitedPaperDois,\n    anaHighTopicIndenpentPaperDois,\n  } = store;\n\n  // rect\n  const anaHighPapersDoiSet = new Set(anaHighPapers.map((p) => p.doi));\n  const yearRange = d3.extent(analysisPapers, (d) => +d.year);\n  const paperCountByYear = d3\n    .range(...yearRange.map((d, i) => d + i))\n    .map(\n      (year) => analysisPapers.filter((paper) => +paper.year === +year).length\n    );\n\n  const rectWidth = d3.max([\n    ((width - padding.left - padding.right) /\n      (yearRange[1] - yearRange[0] + 1)) *\n      0.68,\n    0,\n  ]);\n  const rectHeight = d3.max([\n    d3.min([\n      rectWidth * 0.4,\n      ((height - padding.bottom - padding.top) / d3.max(paperCountByYear)) *\n        0.8,\n    ]),\n    0,\n  ]);\n  const x = d3\n    .scaleLinear()\n    .domain(yearRange)\n    .range([padding.left, width - padding.right]);\n  const y = d3\n    .scaleLinear()\n    .domain([0, d3.max(paperCountByYear) - 1])\n    .range([padding.top, height - padding.bottom]);\n  const year2count = {};\n  const data = analysisPapers;\n  const compareIndexByTopic = (a, b) => {\n    if (a.topics[0][0] === b.topics[0][0]) {\n      return a.topics[0][1] - b.topics[0][1];\n    } else {\n      return a.topics[0][0] - b.topics[0][0];\n    }\n  };\n  data.sort(compareIndexByTopic);\n  const doi2indexByYear = {};\n  data.forEach((paper) => {\n    if (!(paper.year in year2count)) {\n      year2count[paper.year] = 0;\n    }\n    doi2indexByYear[paper.doi] = year2count[paper.year];\n    year2count[paper.year] += 1;\n  });\n  const rectOpacity = (paper) => {\n    if (paper.doi === anaSelectHighlightPaperDoi) return 1;\n    if (anaHighPapersDoiSet.has(paper.doi)) return 1;\n    if (anaHighEntityTopic >= 0) {\n      if (anaHighEntityCitePaperDois.includes(paper.doi)) return 0.9;\n      if (anaHighEntityCitedPaperDois.includes(paper.doi)) return 0.9;\n    }\n    return 0.3;\n  };\n  const rectStroke = (paper) => {\n    if (paper.doi === anaSelectHighlightPaperDoi) return \"red\";\n    if (anaHighEntityTopic >= 0) {\n      if (anaHighEntityCitePaperDois.includes(paper.doi)) return \"#666\";\n      if (anaHighEntityCitedPaperDois.includes(paper.doi)) return \"#666\";\n    }\n    if (anaFilterType === \"none\") return \"#fff\";\n    if (anaHighPapersDoiSet.has(paper.doi)) return \"#666\";\n    else return \"#fff\";\n  };\n  const rectStrokeWidth = (paper) => {\n    if (paper.doi === anaSelectHighlightPaperDoi) return 3;\n    else return 2;\n  };\n  const rectStrokeDashArray = (paper) => {\n    if (paper.doi === anaSelectHighlightPaperDoi) return [4, 7];\n    if (anaHighEntityTopic >= 0) {\n      if (anaHighEntityCitePaperDois.includes(paper.doi)) return \"none\";\n      if (anaHighEntityCitedPaperDois.includes(paper.doi)) return \"none\";\n    }\n    if (anaFilterType === \"none\") return \"none\";\n    if (anaHighPapersDoiSet.has(paper.doi)) return [5, 4];\n    else return \"none\";\n  };\n\n  // contour\n  const contourFunc = d3\n    .contourDensity()\n    .x((paper) => x(+paper.year))\n    .y((paper) => y(doi2indexByYear[paper.doi]))\n    .size([width, height])\n    .bandwidth(30)\n    .thresholds(5);\n  const contour = contourFunc(anaHighPapers)[0];\n  const contourColor =\n    anaFilterType === \"none\"\n      ? \"none\"\n      : anaFilterType === \"topic\"\n      ? topicColorScale[anaHighTopic]\n      : \"#aaa\";\n  const contourOpacity = anaFilterType === \"none\" ? 0 : 0.25;\n\n  // internal-links\n  const doi2paper = {};\n  analysisPapers.forEach((paper) => (doi2paper[paper.doi] = paper));\n  const internalLinks = [];\n  analysisPapers.forEach((paper) => {\n    paper.refList.forEach((refPaperDoi) => {\n      if (refPaperDoi in doi2paper) {\n        // const refPaper = doi2paper[refPaperDoi]\n        const link = {\n          source: refPaperDoi,\n          target: paper.doi,\n          weight: 1,\n        };\n        internalLinks.push(link);\n      }\n    });\n  });\n  const diagonal = d3\n    .linkHorizontal()\n    .x((doi) => x(doi2paper[doi].year))\n    .y((doi) => y(doi2indexByYear[doi]));\n  const computedPath = (d) => {\n    if (y(doi2indexByYear[d.source]) === y(doi2indexByYear[d.target])) {\n      const x0 = x(doi2paper[d.source].year);\n      const y0 = y(doi2indexByYear[d.source]);\n      const x3 = x(doi2paper[d.target].year);\n      const y3 = y0;\n\n      const x1 = x0 + (x3 - x0) * 0.3;\n      const x2 = x0 + (x3 - x0) * 0.7;\n      const y1 =\n        y0 +\n        ((height - padding.bottom - padding.top) / d3.max(paperCountByYear)) *\n          0.8;\n      const y2 = y1;\n      return `M${x0},${y0} C ${x1},${y1},${x2},${y2},${x3},${y3}`;\n    } else {\n      return diagonal(d);\n    }\n  };\n  const linkStroke = (link) => {\n    if (\n      link.source === anaSelectHighlightPaperDoi ||\n      link.target === anaSelectHighlightPaperDoi\n    )\n      return \"#333\";\n    if (anaHighEntityTopic >= 0) {\n      if (\n        anaHighEntityCitePaperDois.includes(link.target) &&\n        anaHighTopicIndenpentPaperDois.includes(link.source)\n      )\n        return topicColorScale[anaHighTopic];\n      if (\n        anaHighEntityCitedPaperDois.includes(link.source) &&\n        anaHighTopicIndenpentPaperDois.includes(link.target)\n      )\n        return topicColorScale[anaHighEntityTopic];\n    }\n    if (\n      anaHighPapersDoiSet.has(link.source) &&\n      anaHighPapersDoiSet.has(link.target)\n    )\n      return \"#555\";\n    return \"#aaa\";\n  };\n  const linkOpacity = (link) => {\n    if (\n      link.source === anaSelectHighlightPaperDoi ||\n      link.target === anaSelectHighlightPaperDoi\n    )\n      return 0.7;\n    if (anaFilterType === \"none\") return 0.1;\n    if (anaHighEntityTopic >= 0) {\n      if (\n        anaHighEntityCitePaperDois.includes(link.target) &&\n        anaHighTopicIndenpentPaperDois.includes(link.source)\n      )\n        return 0.9;\n      if (\n        anaHighEntityCitedPaperDois.includes(link.source) &&\n        anaHighTopicIndenpentPaperDois.includes(link.target)\n      )\n        return 0.9;\n    }\n    if (\n      anaHighEntityTopic < 0 &&\n      anaHighPapersDoiSet.has(link.source) &&\n      anaHighPapersDoiSet.has(link.target)\n    )\n      return 0.35;\n    return 0;\n  };\n  const strokeWidth = (link) => {\n    if (\n      link.source === anaSelectHighlightPaperDoi ||\n      link.target === anaSelectHighlightPaperDoi\n    )\n      return 5;\n    if (anaHighEntityTopic >= 0) {\n      if (\n        anaHighEntityCitePaperDois.includes(link.target) &&\n        anaHighTopicIndenpentPaperDois.includes(link.source)\n      )\n        return 5;\n      if (\n        anaHighEntityCitedPaperDois.includes(link.source) &&\n        anaHighTopicIndenpentPaperDois.includes(link.target)\n      )\n        return 5;\n    }\n    if (\n      anaHighPapersDoiSet.has(link.source) &&\n      anaHighPapersDoiSet.has(link.target)\n    )\n      return 4;\n    return 0;\n  };\n\n  return (\n    <div className=\"ana-network-view\">\n      <svg id={svgId} width=\"100%\" height=\"100%\">\n        <g id=\"network-contour-g\">\n          <path\n            d={d3.geoPath()(contour)}\n            fill={contourColor}\n            opacity={contourOpacity}\n            // stroke=\"#333\"\n            // strokeDasharray=\"8\"\n            // strokeWidth=\"2\"\n          />\n        </g>\n        <g id=\"network-links-g\" fill=\"none\">\n          {internalLinks.map((link) => (\n            <path\n              key={`${link.source}-${link.target}`}\n              d={computedPath(link)}\n              strokeLinecap=\"round\"\n              stroke={linkStroke(link)}\n              strokeWidth={strokeWidth(link)}\n              opacity={linkOpacity(link)}\n            />\n          ))}\n        </g>\n        <g id=\"network-rects-g\">\n          {analysisPapers.map((paper) => (\n            <g\n              key={paper.doi}\n              transform={`translate(${x(+paper.year)}, ${y(\n                doi2indexByYear[paper.doi]\n              )})`}\n              cursor=\"pointer\"\n              onClick={() => {\n                console.log(\"click\", paper);\n              }}\n              opacity={rectOpacity(paper)}\n              onClick={() => setAnaSelectHighlightPaperDoi(paper.doi)}\n            >\n              <>\n                {paper.topics.map((topic, i, s) => (\n                  <rect\n                    key={topic[0]}\n                    fill={topicColorScale[topic[0]]}\n                    x={-rectWidth / 2 + (rectWidth / s.length) * i}\n                    y={-rectHeight / 2}\n                    width={rectWidth / s.length}\n                    height={rectHeight}\n                    stroke=\"#fff\"\n                    strokeWidth=\"1\"\n                  />\n                ))}\n                <rect\n                  x={-rectWidth / 2 - rectStrokeWidth(paper) / 2}\n                  y={-rectHeight / 2 - rectStrokeWidth(paper) / 2}\n                  fill=\"none\"\n                  width={rectWidth + rectStrokeWidth(paper)}\n                  height={rectHeight + rectStrokeWidth(paper)}\n                  stroke={rectStroke(paper)}\n                  strokeWidth={rectStrokeWidth(paper)}\n                  strokeLinecap=\"round\"\n                  strokeDasharray={rectStrokeDashArray(paper)}\n                />\n              </>\n            </g>\n          ))}\n        </g>\n      </svg>\n    </div>\n  );\n});\n\nexport default NetworkView;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { observer } from \"mobx-react-lite\";\nimport { useGlobalStore } from \"Store\";\n\nconst TopicView = observer(() => {\n  const store = useGlobalStore();\n  const {\n    topics_detail,\n    topicColorScale,\n    analysisPapers,\n    anaHighPapers,\n    anaFilterType,\n    setAnaHighPapersByTopic,\n    anaHighTopic,\n  } = store;\n  return (\n    <div className=\"topic-list-view\">\n      <div className=\"topic-list-header\">Topics List</div>\n      <div className=\"topic-list-content\">\n        {topics_detail.map((topic, i) => (\n          <TopicItem\n            topic={topic}\n            index={i + 1}\n            key={i}\n            color={topicColorScale[i]}\n            isHighlight={anaFilterType !== \"none\"}\n            all={\n              analysisPapers.filter((paper) =>\n                paper.topics.map((a) => a[0]).includes(i)\n              ).length\n            }\n            highlight={\n              anaHighPapers.filter((paper) =>\n                paper.topics.map((a) => a[0]).includes(i)\n              ).length\n            }\n            onChange={() => setAnaHighPapersByTopic(i)}\n            isSelected={anaFilterType === 'topic' && anaHighTopic === i}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n\nconst TopicItem = ({\n  topic,\n  index,\n  color,\n  isHighlight,\n  all,\n  highlight,\n  onChange,\n  isSelected,\n}) => {\n  const style = {\n    background: color,\n  };\n  const topicItemClass = [\"topic-item\", isSelected && \"topic-item-selected\"]\n    .filter((a) => a)\n    .join(\" \");\n  return (\n    <div className={topicItemClass} style={style} onClick={onChange}>\n      <div className=\"topic-header\">\n        <div className=\"topic-index\">Topic {index}</div>\n        <div className=\"topic-number\">\n          {isHighlight ? `${highlight} / ${all}` : all}\n        </div>\n      </div>\n      <div className=\"topic-detail\">{topic.join(\", \")}</div>\n    </div>\n  );\n};\n\nexport default TopicView;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { observer } from \"mobx-react-lite\";\nimport { useGlobalStore } from \"Store\";\n\nconst HighlightListView = observer(() => {\n  const store = useGlobalStore();\n  const {\n    anaSelectHighlightPaperDoi,\n    anaHighPapers,\n    setAnaSelectHighlightPaperDoi,\n  } = store;\n  return (\n    <div className=\"highlight-list-view\">\n      <div className=\"highlight-list-header\">\n        Highlight Papers\n        {/* {anaHighPapers.length} / {analysisPapers.length} */}\n      </div>\n      <div className=\"highlight-list-content\">\n        {anaHighPapers.map((paper, index) => (\n          <PaperItem\n            key={paper.doi}\n            paper={paper}\n            index={index}\n            handleClick={() => setAnaSelectHighlightPaperDoi(paper.doi)}\n            isSelected={paper.doi === anaSelectHighlightPaperDoi}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n\nconst PaperItem = ({\n  paper,\n  index,\n  handleClick = () => {},\n  isSelected = false,\n}) => (\n  <div\n    className={`paper-item ${isSelected ? \"paper-item-selected\" : \"\"}`}\n    onClick={() => handleClick(paper.doi)}\n  >\n    <div className=\"paper-index\">{index + 1}.</div>\n    <div className=\"paper-content\">\n      <div className=\"paper-header\">\n        <div className=\"paper-header-conferenceName\">\n          {paper.conferenceName}\n        </div>\n        <div className=\"paper-header-title\">{paper.title}</div>\n      </div>\n      <div className=\"paper-details\">\n        {paper.authors.join(\"; \")} ({paper.year})\n      </div>\n      <div className=\"paper-tags\">\n        {[...paper.keywords, ...paper.publicTags, ...paper.privateTags].join(\n          \"; \"\n        )}\n      </div>\n    </div>\n  </div>\n);\n\nexport default HighlightListView;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { observer } from \"mobx-react-lite\";\nimport { useGlobalStore } from \"Store\";\n\nconst DetaiView = observer(() => {\n  const store = useGlobalStore();\n  const { anaSelectHighlightPaper } = store;\n  const {\n    conferenceName = \"\",\n    year = \"\",\n    title = \"\",\n    authors = [],\n    keywords = [],\n    abstract = \"\",\n  } = anaSelectHighlightPaper;\n  return anaSelectHighlightPaper.title ? (\n    <div className=\"detail-paper-view\">\n      <div className=\"paper-title\">{title}</div>\n      <div className=\"paper-details\">\n        {authors.join(\"; \")}\n        <span className=\"paper-header\">\n          {year && `(${conferenceName} ${year})`}\n        </span>\n      </div>\n      <div className=\"paper-info\">\n        <span className=\"paper-info-title\">Keywords:</span>\n        <span className=\"paper-info-content\">{keywords.join(\"; \")}</span>\n      </div>\n      <div className=\"paper-info\">\n        <span className=\"paper-info-title\">Abstract:</span>\n        <span className=\"paper-info-content\">{abstract}</span>\n      </div>\n    </div>\n  ) : (\n    <div />\n  );\n});\n\nexport default DetaiView;\n","import React, { useEffect } from \"react\";\nimport { useGlobalStore } from \"Store\";\nimport \"./index.scss\";\n// import TagView from \"./TagView\";\nimport TagView from \"./TagView-Hor\";\nimport ProjectView from \"./ProjectView-New\";\nimport NetworkView from \"./NetworkView-New\";\nimport TopicView from \"./TopicView\";\nimport HighlightListView from \"./HighlightListView\";\nimport DetailView from \"./DetailView\";\n\nconst AnalysisPage = () => {\n  const store = useGlobalStore();\n  useEffect(() => {\n    store.setCurrentPage();\n    store.initPapers();\n    store.initUserId();\n  }, []);\n  return (\n    <div className=\"analysis-container\">\n      <div className=\"left-container\">\n        <TagView />\n      </div>\n      <div className=\"middle-container\">\n        <div className=\"middle-top-container\">\n          <ProjectView />\n        </div>\n        <div className=\"middle-bottom-container\">\n          <NetworkView />\n        </div>\n      </div>\n      <div className=\"right-container\">\n        <div className=\"right-top-container\">\n          <TopicView />\n        </div>\n        <div className=\"right-middle-container\">\n          <HighlightListView />\n        </div>\n        <div className=\"right-bottom-container\">\n          <DetailView />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnalysisPage;\n","export const userList = [\n  \"Prof. Yuan\",\n  \"Guozheng Li\",\n  \"Shuai Chen\",\n  \"Chenglei Yue\",\n  \"Ruike Jiang\",\n  \"Can Liu\",\n  \"Jincheng Li\",\n  \"Chaofan Yang\",\n  \"Hanning Shao\",\n  \"Yuchu Luo\",\n  \"Zhixian Lin\",\n  \"Min Tian\",\n  \"Dingyi Yang\",\n  \"Changhe Yang\",\n  \"Yanda Li\",\n  \"Datong Wei\",\n  \"Cong Wu\",\n  \"Hao Wu\",\n  \"Shaocong Tan\",\n  \"Jiacheng Yu\",\n  \"Sihang Li\",\n  \"Zhen Li\",\n  \"Haohua Liu\",\n  \"KaiChen Nie\"\n];\n\nexport default userList;\n","import React from \"react\";\nimport \"./index.scss\";\nimport userList from \"Common/userList\";\nimport { useGlobalStore } from \"Store\";\nimport { observer } from \"mobx-react-lite\";\nimport { Link } from \"react-router-dom\";\nimport { Select } from \"antd\";\nconst { Option } = Select;\n\nconst Header = observer(() => {\n  const store = useGlobalStore();\n  const handleChange = (userId) => {\n    store.setUserId(userId);\n  };\n  const { currentPage } = store;\n  const title = `Literature ${currentPage} System`;\n  const switchPage = currentPage === \"Analysis\" ? \"management\" : \"analysis\";\n  const switchPageShowText = currentPage === \"Analysis\" ? \"Manage\" : \"Analyze\";\n  const SwitchButton = () => (\n    <Link to={switchPage} className=\"switch-button\">\n      {switchPageShowText}\n    </Link>\n  );\n  return (\n    <div className=\"header\">\n      <div className=\"title\">{title}</div>\n      <div className=\"user-selector title\">\n        User: &nbsp;\n        <Select\n          value={store.userId}\n          size=\"small\"\n          onChange={handleChange}\n          style={{ width: 130 }}\n          placeholder=\"Set User\"\n        >\n          {userList.map((user) => (\n            <Option value={user} key={user}>\n              {user}\n            </Option>\n          ))}\n        </Select>\n        <SwitchButton />\n      </div>\n    </div>\n  );\n});\n\nexport default Header;\n","import React from \"react\";\nimport \"./App.scss\";\nimport { StoreProvider } from \"Store\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport ManagePage from \"Pages/ManagePage\";\nimport Analysis from \"Pages/AnalysisPage\";\nimport Header from \"Components/Header\";\n\nconst App = () => {\n  return (\n    <StoreProvider>\n      <Router\n        // basename=\"/vis_paper_management\"\n      >\n        <div className=\"view-container\">\n          <div className=\"header-container\">\n            <Header />\n          </div>\n          <Switch>\n            <Route exact path={`/management`} component={ManagePage} />\n            <Route exact path={`/analysis`} component={Analysis} />\n            <Route path=\"/\" component={ManagePage} />\n          </Switch>\n        </div>\n      </Router>\n    </StoreProvider>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}