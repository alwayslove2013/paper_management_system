(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{124:function(t,e,n){},125:function(t,e,n){},129:function(t,e,n){},130:function(t,e,n){},131:function(t,e,n){},132:function(t,e,n){},135:function(t,e,n){},136:function(t,e,n){},137:function(t,e,n){},138:function(t,e,n){},139:function(t,e,n){},140:function(t,e,n){},141:function(t,e,n){},142:function(t,e,n){},147:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n(0),a=n.n(r),c=n(25),o=n.n(c),s=(n(124),n(125),n(11)),l=n(27),u=n(18),h=n.n(u),d=n(49),p=n(8),f=n(28),g=n(106),j=n.n(g),b="http://vis.pku.edu.cn/vis4vis/",x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b+t+(t.includes("?")?"&":"?")+j.a.stringify(e);return new Promise((function(t,e){fetch(n).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},m=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x("get_papers");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x("get_public_tags");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,t.next=3,x("get_private_tags",{uid:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(t){var e=t.uid,n=t.pid,i=t.paper,r=i.privateTags,a=i.read;return e&&x("set_private_tags",{uid:e,pid:n,tags:[].concat(Object(l.a)(r),[a&&"read"]).filter((function(t){return t})).join(",")}),"OK"};function P(t,e){return fetch(t,{body:JSON.stringify(e),headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},method:"POST"}).then((function(t){return t.json()}))}var C=n(21),T=function(t,e,n){return t=t.slice(0,n),e.forEach((function(n){if(!t.includes(n)){for(var i=t.length-1;e.includes(t[i]);)i-=1;t[i]=n}})),t},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};t.forEach((function(t){t.forEach((function(t){t&&(t in n?n[t]+=1:n[t]=1)}))}));var i=[];for(var r in n)i.push({item:r,count:n[r]});return i.sort((function(t,e){return e.count-t.count})),i.slice(0,e).map((function(t){return t.item}))};var k={publicTags:function(t){var e=t.pid,n=t.paper.publicTags;return x("set_public_tags",{pid:e,tags:n.join(",")}),"OK"},privateTags:y,read:y},S=function(){return{currentPage:"Management",setCurrentPage:function(){this.currentPage=window.location.hash.includes("/analysis")?"Analysis":"Management"},tooltipX:500,tooltipY:500,setTooltipPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.tooltipX=t,this.tooltipY=e},titleSearch:"",setTitleSearch:function(t){this.titleSearch=t.toLocaleLowerCase()},get searchPaperDoiSet(){var t=this,e=this.titleSearch?this.papers.filter((function(e){return e.title.toLocaleLowerCase().indexOf(t.titleSearch)>-1})).map((function(t){return t.doi})):[];return new Set(e)},papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],initPapers:function(){var t=arguments,e=this;return Object(d.a)(h.a.mark((function n(){var i,r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]&&t[0],0!==e.papers.length&&!i){n.next=6;break}return n.next=4,m();case 4:r=n.sent,e.setPapers(r);case 6:case"end":return n.stop()}}),n)})))()},setPapers:function(t){var e=arguments,n=this;return Object(d.a)(h.a.mark((function i(){var r,a;return h.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:"citationCount",console.log("==> \u521d\u59cb\u5316Papers"),a={},t.forEach((function(t){t.privateTags=[],t.projection=[5,5],t.topics=[],t.read=!1,t.publicTags=[],t.colors=[],t.innerColors=[],t.outerColors=[],t.internalRefList=[],t.internalCitedList=[],t.topics=[[0,1]],t.isHighlight=!1,t.indexByYear=0,t.refList=t.refList.toLowerCase().split(/[,;]/).map((function(t){return t.trim()})),t.doi=t.doi.toLowerCase(),a[t.doi]=t,t.authors=t.authors.split(";").map((function(t){return t.trim().replace(/\{(.*)\}/,"$1")})),t.countries=t.countries.split(";").map((function(t){var e=t.trim().split(" ").map((function(t){return t.trim()})).filter((function(t){return t}));return 0===e.length?"":e[e.length-1].toLowerCase().replace(/^\w/,(function(t){return t.toUpperCase()}))})).filter((function(t){return t})),t.year=+t.year,t.keywords=t.keywords.split(/[;,]/).map((function(t){return t.trim().toLowerCase()}))})),t.forEach((function(t){t.refList.forEach((function(e){e in a&&(a[e].internalCitedList.push(t.doi),t.internalRefList.push(e))}))})),n.commonAuthors=w(t.map((function(t){return t.authors})),30),n.commonCountries=w(t.map((function(t){return t.countries})),30),t.sort((function(t,e){return e[r]-t[r]})),n.computedPosition(t),i.next=11,n.initPublicTags(t);case 11:Object(f.d)((function(){n.papers=t,n.initPrivateTags()}));case 12:case"end":return i.stop()}}),i)})))()},setPaper:function(t,e,n){var i=this.papers.find((function(e){return e.doi===t}));i[e]=n,console.log("==> \u66f4\u65b0paper\u6570\u636e by doi:",t,e,n),k[e]({uid:this.userId,pid:t,paper:Object(f.e)(i)}),this.doiUpdateColors(t)},unitXAttr:"year",get unitXAttrList(){var t=this,e=new Set;this.papers.forEach((function(n){e.add(n[t.unitXAttr])}));var n=Array.from(e);return n.sort((function(t,e){return e-t})),n},unitYAttr:"conferenceName",unitYAttrList:["SciVis","InfoVis","EuroVis","VAST","PacificVis","Others"],maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(t){var e=this,n={};t.forEach((function(t){var i=t[e.unitXAttr],r=e.unitYAttrList.includes(t[e.unitYAttr])?t[e.unitYAttr]:e.unitYAttrList[e.unitYAttrList.length-1];i in n||(n[i]={}),r in n[i]||(n[i][r]=0),t.unitIndex=n[i][r],n[i][r]+=1})),this.maxUnitBlockPaperCount=.7*Math.max.apply(Math,Object(l.a)(t.map((function(t){return t.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(t){var e=this;return Object(d.a)(h.a.mark((function n(){var i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v();case 2:i=n.sent,t.forEach((function(t){t.doi in i&&(t.publicTags=i[t.doi].filter((function(t){return t})))})),Object(f.d)((function(){e.commonPublicTags=w(Object.values(i),30)}));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var t=this;return Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({uid:t.userId});case 2:n=e.sent,Object(f.d)((function(){t.papers.forEach((function(t){if(t.doi in n){var e=n[t.doi].indexOf("read");e>-1&&(t.read=!0,n[t.doi].splice(e,1)),t.privateTags=n[t.doi].filter((function(t){return t}))}})),t.commonPrivateTags=w(Object.values(n),30)})),t.batchUpdateColors();case 5:case"end":return e.stop()}}),e)})))()},userId:"",setUserId:function(t){t!==this.userId&&(this.userId=t,console.log("==> change userId:",this.userId),localStorage.setItem("paper-management-system-userId",t),t&&this.initPrivateTags())},initUserId:function(){if(0===this.userId.length){var t=localStorage.getItem("paper-management-system-userId");t&&this.setUserId(t)}},get controlTagNameList(){return this.generateCategory(10)},get anaCategories(){var t=T(w(this.analysisPapers.map((function(t){return t.countries})),30),["Japan","Korea"],50),e=w(this.analysisPapers.map((function(t){return t.authors})),30),n=T(this.commonPrivateTags,[],50),i=T(this.commonPublicTags,[],50);return[{label:"Country",value:"countries",list:t,highlightType:"outer"},{label:"Author",value:"authors",list:e,highlightType:"inner"},{label:"Keywords",value:"keywords",list:T(w(this.analysisPapers.map((function(t){return t.keywords})),30),[],50),highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:n,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:i,highlightType:"inner"}]},get commonKeywords(){return w(this.papers.map((function(t){return t.keywords})),30)},generateCategory:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=T(this.commonCountries,["Japan","Korea"],t),i=T(this.commonAuthors,["Xiaoru Yuan"],t),r=T(this.commonPrivateTags,e?["read"]:[],t),a=T(this.commonPublicTags,[],t),c=T(this.commonKeywords,[],t);return[{label:"Country",value:"countries",list:n,highlightType:"outer"},{label:"Author",value:"authors",list:i,highlightType:"inner"},{label:"Keywords",value:"keywords",list:c,highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:r,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:a,highlightType:"inner"}]},get category2highlightType(){var t={};return this.controlTagNameList.forEach((function(e){t[e.value]=e.highlightType})),t},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[],keywords:[]},get controlIsActive(){var t=!1;for(var e in this.activeTags)this.activeTags[e].length>0&&(t=!0);return t},get isUnitOuterHighlight(){var t=this,e=this.controlTagNameList.filter((function(t){return"outer"===t.highlightType})).map((function(t){return t.value})),n=!1;return e.forEach((function(e){t.activeTags[e].length>0&&(n=!0)})),n},tag2color:{},colorUse:{},setTagColor:function(t,e){console.log("==> \u8bbe\u7f6etag\u989c\u8272:",e,t);var n="".concat(e,"---").concat(t);if(n in this.tag2color)this.colorUse[this.tag2color[n]]=!1,delete this.tag2color[n],this.activeTags[e]=Object(l.a)(this.activeTags[e]).filter((function(e){return e!==t}));else{this.activeTags[e].push(t);for(var i=0,r=p.schemeTableau10[i];this.colorUse[r];){if(10===(i+=1)){r="black";break}r=p.schemeTableau10[i]}this.tag2color[n]=r,this.colorUse[r]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var t=this;this.papers.forEach((function(e){e.colors=[],e.innerColors=[],e.outerColors=[],t.updateColor(e)}))},doiUpdateColors:function(t){var e=this.papers.find((function(e){return e.doi===t}));e.colors=[],e.innerColors=[],e.outerColors=[],this.updateColor(e)},updateColor:function(t){var e=this;this.activeTags.privateTags.indexOf("read")>-1&&t.read&&(t.colors.push(this.tag2color["privateTags---read"]),t.innerColors.push(this.tag2color["privateTags---read"]));var n=function(n){var i=e.activeTags[n];"inner"===e.category2highlightType[n]?i.forEach((function(i){if(t[n].indexOf(i)>-1){var r="".concat(n,"---").concat(i);t.innerColors.push(e.tag2color[r])}})):i.forEach((function(i){if(t[n].indexOf(i)>-1){var r="".concat(n,"---").concat(i);t.outerColors.push(e.tag2color[r])}})),i.forEach((function(i){if(t[n].indexOf(i)>-1){var r="".concat(n,"---").concat(i);t.colors.push(e.tag2color[r])}}))};for(var i in this.activeTags)n(i)},maxCitationCount:200,currentSelected:"",currentSelectedRefSet:new Set,currentSelectedCitedSet:new Set,isSelected:!1,setCurrentSelected:function(t){console.log("==> \u9009\u4e2d\u6587\u7ae0:",t),this.currentSelected=t,this.isSelected=!!t;var e=this.papers.find((function(e){return e.doi===t}));this.currentSelectedRefSet=new Set(e.internalRefList),this.currentSelectedCitedSet=new Set(e.internalCitedList)},cancelSelect:function(){console.log("==> \u70b9\u51fb\u80cc\u666f\uff0c\u53d6\u6d88\u8bba\u6587\u9009\u4e2d\u72b6\u6001"),this.isSelected=!1},get currentSelectedPaper(){var t=this,e=this.papers.find((function(e){return e.doi===t.currentSelected}));return console.log("currentSelectedPaper",Object(f.e)(e)),e},get analysisPapers(){return this.controlIsActive?this.papers.filter((function(t){return t.innerColors.length>0||t.outerColors.length>0})):this.papers},get anaTimeData(){var t=this;return this.unitXAttrList.map((function(t){return+t})).sort().map((function(e){return{x:e,all:t.analysisPapers.filter((function(t){return+t.year===e})).length,highlight:t.anaHighPapers.filter((function(t){return+t.year===e})).length}}))},get minYearAna(){return p.min(this.analysisPapers.map((function(t){return+t.year})))},get maxYearAna(){return p.max(this.analysisPapers.map((function(t){return+t.year})))},get anaYearRange(){return p.range(this.minYearAna,this.maxYearAna+1,1)},get anaTagViewData(){var t=this;return this.anaCategories.map((function(e){return{label:e.label,value:e.value,data:e.list.map((function(n){return"read"===n?{label:"read",all:t.analysisPapers.filter((function(t){return t.read})).length,highlight:t.anaHighPapers.filter((function(t){return t.read})).length,all_timeDis:t.anaYearRange.map((function(e){return t.analysisPapers.filter((function(t){return t.read&&t.year==e})).length})),highlight_timeDis:t.anaYearRange.map((function(e){return t.anaHighPapers.filter((function(t){return t.read&&t.year==e})).length}))}:{label:n,all:t.analysisPapers.filter((function(t){return t[e.value].includes(n)})).length,highlight:t.anaHighPapers.filter((function(t){return t[e.value].includes(n)})).length,all_timeDis:t.anaYearRange.map((function(i){return t.analysisPapers.filter((function(t){return t[e.value].includes(n)&&t.year==i})).length})),highlight_timeDis:t.anaYearRange.map((function(i){return t.anaHighPapers.filter((function(t){return t[e.value].includes(n)&&t.year==i})).length}))}}))}}))},anaFilterType:"none",setAnaFilterType:function(t){console.log("setAnaFilterType",t),this.anaFilterType=t},clearBrushTrigger:function(){},setClearBrushTrigger:function(t){this.clearBrushTrigger=t},anaHighCate:"",anaHighTag:"",anaHighTopic:"",anaHighPapers:[],setAnaHighPapersByTag:function(t){var e=t.anaHighCate,n=t.anaHighTag;console.log("setAnaHighPapersByTag",e,n),this.clearBrushTrigger(),this.anaHighCate===e&&this.anaHighTag===n?(this.anaHighTag="none",this.setAnaFilterType("none"),this.anaHighPapers=this.analysisPapers):(this.anaHighCate=e,this.anaHighTag=n,this.setAnaFilterType(e),this.anaHighPapers=this.analysisPapers.filter((function(t){return Object(C.get)(t,e,[]).includes(n)})))},setAnaHighPapersByTopic:function(t){console.log("setAnaHighPapersByTopic",t),this.clearBrushTrigger(),"topic"===this.anaFilterType&&this.anaHighTopic===t?(this.anaHighTopic="none",this.anaHighTag="none",this.anaHighEntityTopic=-1,this.setAnaFilterType("none"),this.anaHighPapers=this.analysisPapers):(this.anaHighTopic=t,this.anaHighEntityTopic=-1,this.anaHighTag="topic ".concat(t+1),this.setAnaFilterType("topic"),this.anaHighPapers=this.analysisPapers.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})))},startYear:0,endYear:0,setAnaHighPapersByYear:function(t){console.log("setAnaHighPapersByYear",t);var e=Object(s.a)(t,2),n=e[0],i=e[1];this.startYear=n,this.endYear=i,this.anaHighTag="".concat(n,"-").concat(i),this.anaHighPapers=this.analysisPapers.filter((function(t){return+t.year>=n&&+t.year<=i}))},anaSelectHighlightPaperDoi:"",setAnaSelectHighlightPaperDoi:function(t){console.log("setAnaSelectHighlightPaper",t),this.anaSelectHighlightPaperDoi===t?(console.log("reset anaSelectHighlightPaperDoi"),this.anaSelectHighlightPaperDoi=""):this.anaSelectHighlightPaperDoi=t},get anaSelectHighlightPaper(){var t=this;return this.analysisPapers.find((function(e){return e.doi===t.anaSelectHighlightPaperDoi}))||{}},topicColorScale:p.schemeTableau10.slice(1),defaultHighColor:p.schemeTableau10[0],drawProjectionFlag:!1,resetProjectionFlag:function(){console.log("reset drawProjectionFlag"),this.drawProjectionFlag=!1},num_topics:4,setNumTopics:function(t){this.num_topics=t,this.tryLda()},topics_detail:[],topics_word_dis:[],tryLda:function(){var t=this,e=this.analysisPapers.map((function(t){return t.doi})),n=this.userId,i=this.num_topics;console.log("try lda Start!",i),function(t){var e=t.dois,n=t.uid,i=t.num_topics;return P(b+"get_lda_results",{dois:e,num_topics:void 0===i?3:i,uid:n})}({dois:e,uid:n,num_topics:i}).then((function(e){console.log("try lda OK!",e),Object(f.d)((function(){var n=e.paper_lda_res,i=e.topics_detail,r=e.code,a=void 0===r?"success":r,c=e.topics_word_dis;"success"===a&&(t.analysisPapers.forEach((function(t){t.doi in n?(t.projection=n[t.doi].projection,t.topics=n[t.doi].topics.sort((function(t,e){return e[1]-t[1]}))):(t.projection=[5,5],t.topics=[])})),t.drawProjectionFlag=!0,t.topics_detail=i,t.topics_word_dis=c,t.anaHighPapers=t.analysisPapers,t.startYear=p.min(t.analysisPapers.map((function(t){return+t.year}))),t.endYear=p.max(t.analysisPapers.map((function(t){return+t.year}))))}))}))},anaHighEntityTopic:-1,setAnaHighEntityTopic:function(t){this.anaHighEntityTopic===t?(console.log("setAnaHighEntityTopic",!1),this.anaHighEntityTopic=-1):(console.log("setAnaHighEntityTopic",t),this.anaHighEntityTopic=t)},anaHighEntityCitePaperDois:[],anaHighEntityCitedPaperDois:[],anaHighTopicIndenpentPaperDois:[],setHighEntityLinkData:function(t,e,n){console.log("citePaperDois",t),console.log("citedPaperDois",e),this.anaHighEntityCitePaperDois=t,this.anaHighEntityCitedPaperDois=e,this.anaHighTopicIndenpentPaperDois=n},uploadModalShow:!1,setUploadModalShow:function(){console.log("setUploadModalShow",!this.uploadModalShow),this.uploadModalShow=!this.uploadModalShow},updatePaper:function(t,e){var n=this;console.log("update paper info",t,e),function(t,e){return P(b+"update_single_paper",{oriDoi:t,newPaper:e})}(t,e).then((function(){Object(f.d)((function(){console.log("singleUpdatePaper finished",t,e),n.initPapers()}))}))},anaHoverPaperDoi:"",get anaHoverPaper(){var t=this;return this.analysisPapers.find((function(e){return e.doi===t.anaHoverPaperDoi}))},anaHoverPaperPositionX:0,anaHoverPaperPositionY:0,setAnaHoverPaperDoi:function(t,e,n){this.anaHoverPaperDoi=n,this.anaHoverPaperPositionX=t,this.anaHoverPaperPositionY=e},removeHoverPaperDoi:function(){this.anaHoverPaperDoi=""}}},H=n(149),N=a.a.createContext(null),_=function(t){var e=t.children,n=Object(H.a)(S);return Object(i.jsx)(N.Provider,{value:n,children:e})},A=function(){var t=a.a.useContext(N);if(!t)throw new Error("no Provider");return t},L=n(86),Y=n(24),D=(n(129),n(153)),E=(n(130),n(91)),I=function(){var t=A(),e=Object(C.debounce)((function(e){t.setTitleSearch(e.target.value)}),200);return Object(i.jsxs)("div",{className:"search-view",children:[Object(i.jsx)("div",{className:"search-view-input",children:Object(i.jsx)("input",{onInput:e})}),Object(i.jsx)("div",{className:"search-view-icon",children:Object(i.jsx)(E.a,{})})]})},M=Object(D.a)((function(){var t=A().controlTagNameList;return Object(i.jsxs)("div",{className:"control-view",children:[Object(i.jsxs)("div",{className:"control-item",children:[Object(i.jsx)("div",{className:"control-item-title",children:"Title Search"}),Object(i.jsx)("div",{className:"control-item-search-input",children:Object(i.jsx)(I,{searchAttr:"title"})})]}),t.map((function(t){return Object(i.jsx)(B,{tagData:t},t.label)}))]})})),B=Object(D.a)((function(t){var e=t.tagData,n=A(),a=n.tag2color,c=n.papers,o=Object(r.useState)([]),u=Object(s.a)(o,2),h=u[0],d=u[1];Object(r.useEffect)((function(){var t=Object.keys(a).filter((function(t){return t.split("---")[0]===e.value})).map((function(t){return t.split("---")[1]})).filter((function(t){return e.list.indexOf(t)>-1}));d(t)}),[]);var p=function(t){var i=Object(l.a)(h),r=i.indexOf(t);r>-1?(i.splice(r,1),d(i)):(i.push(t),d(i)),n.setTagColor(t,e.value)};return Object(i.jsxs)("div",{className:"control-item",children:[Object(i.jsx)("div",{className:"control-item-title",children:e.label}),Object(i.jsx)("div",{className:"control-item-options",children:e.list.map((function(t){return Object(i.jsx)(F,{value:t,clickOption:p,isSelect:h.indexOf(t)>-1&&a["".concat(e.value,"---").concat(t)],count:h.indexOf(t)>-1?c.filter((function(n){return n[e.value].includes(t)})).length:0},t)}))})]})})),F=function(t){var e=t.value,n=t.clickOption,r=t.isSelect,a=t.count,c=void 0===a?0:a,o=["control-item-option",r&&"option-active"].filter((function(t){return t})).join(" "),s=r?{background:r,border:"1px solid ".concat(r)}:{},l="Usa"===e?"USA":e;return Object(i.jsxs)("div",{className:o,onClick:function(){return n(e)},style:s,children:[l," ",r&&"(".concat(c,")")]})},X=(n(131),a.a.memo((function(t){var e=t.cx,n=t.cy,r=t.r,a=t.opacity,c=t.doi,o=t.handleClick,s=t.title,l=t.innerColors,u=t.outerColors,h=t.isBackgroundActive,d=t.handleHover,p=t.handleHoverOut,f=function(t){return e+Math.sin(t)*r},g=function(t){return n+Math.cos(t)*r},j=2*Math.PI/l.length,b=l.map((function(t,e){return{startX:f(j*e),startY:g(j*e),endX:f(j*(e+1)),endY:g(j*(e+1))}})),x=1.5*r,m=function(t){return e+Math.sin(t)*x},v=function(t){return n+Math.cos(t)*x},O=2*Math.PI/u.length,y=u.map((function(t,e){return{startX:m(O*e),startY:v(O*e),endX:m(O*(e+1)),endY:v(O*(e+1))}}));return Object(i.jsxs)("g",{id:"unit-g",onClick:function(t){return o(t,c)},cursor:"pointer",onMouseEnter:function(){return d(c)},onMouseLeave:function(){return p()},children:[Object(i.jsx)("title",{children:s}),h&&Object(i.jsxs)("g",{id:"unit-background-g",children:[Object(i.jsx)("rect",{x:e-1.6*r,y:n-1.6*r,width:3.2*r,height:3.2*r,fill:"#fc8d62",rx:.4*r,ry:.4*r}),Object(i.jsx)("circle",{cx:e,cy:n,r:1.3*r,fill:"#eee"})]}),Object(i.jsxs)("g",{id:"unit-border-g",children:[y.length>1?y.map((function(t,r){return Object(i.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(x," ").concat(x," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),fill:u[r]},r)})):Object(i.jsx)("circle",{cx:e,cy:n,r:x,fill:u.length>0?u[0]:"none"}),Object(i.jsx)("circle",{cx:e,cy:n,r:1.1*r,fill:"white",opacity:y.length>0?1:0})]}),Object(i.jsx)("g",{id:"unit-sector-g",opacity:a,children:b.length>1?b.map((function(t,a){return Object(i.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(r," ").concat(r," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),stroke:"white",fill:l[a],strokeWidth:.1*r},a)})):Object(i.jsx)("circle",{cx:e,cy:n,r:r,fill:l[0]})})]})}))),U=function(t){var e=t.isShow,n=t.paper,r=t.paperCircle,a=t.containerWidth,c=t.containerHeight,o=r.cx/a,s=.25*a,l=r.cx-s*o,u=r.cy+15,h=r.cy+200>c?"translateY(-150%)":"",d={transform:"translate(".concat(l,"px,").concat(u,"px) ").concat(h),opacity:e?1:0};return Object(i.jsxs)("div",{className:"unit-tooltip",style:d,children:[Object(i.jsx)("div",{className:"unit-tooltip-title",children:Object(C.get)(n,"title","")}),Object(i.jsxs)("div",{className:"unit-tooltip-authors",children:[Object(C.get)(n,"authors",[]).join("; ")," (",n.year,")"]})]})},z=30,W=40,R=15,K=1,V=2,J=3,q=3,G=1,Z=Object(D.a)((function(){var t=A(),e=t.papers,n=t.unitXAttr,a=t.unitYAttr,c=t.unitXAttrList,o=t.unitYAttrList,u=t.unitBlockCount,h=t.maxUnitBlockPaperCount,d=t.controlIsActive,g=t.isUnitOuterHighlight,j=t.currentSelected,b=t.setCurrentSelected,x=t.isSelected,m=t.cancelSelect,v=t.currentSelectedRefSet,O=t.currentSelectedCitedSet,y=t.searchPaperDoiSet,P=Object(r.useState)(0),T=Object(s.a)(P,2),w=T[0],k=T[1],S=Object(r.useState)(0),H=Object(s.a)(S,2),N=H[0],_=H[1];Object(r.useEffect)((function(){var t=document.querySelector("#unit-svg");k(t.clientWidth-W-R),_(t.clientHeight-z-K)}),[]);for(var L,Y=c.length>0?w/c.length-J-q:0,D=o.length>0?N/o.length-V-G:0,E=Math.floor(Y>0?D/Y:1),I=Math.ceil(Math.sqrt(h/E)),M=c.map((function(t,e){var n=Math.max.apply(Math,Object(l.a)(o.map((function(e,n){return Object(C.get)(u,[t,e],0)})))),i=Math.ceil(Math.sqrt(h/E));return n>h&&(i+=1),i})),B=[0],F=[0],Z=1;Z<c.length;Z++)B.push(B[Z-1]+M[Z-1]);L=(w-(J+q)*c.length)/(B[B.length-1]+M[M.length-1]);for(var $=1;$<c.length;$++)F.push(B[$]*L+(J+q)*$);var Q=p.scaleLinear().domain([0,100]).range([.25,.8]),tt=e.map((function(t){var e={};e.oriData=Object(f.e)(t),e.BlockIndexX=c.indexOf(t[n]),e.BlockIndexY=o.includes(t[a])?o.indexOf(t[a]):o.length-1;var i,r=t.doi;return e.doi=r,e.circleIndexX=t.unitIndex%M[e.BlockIndexX],e.circleIndexY=Math.floor(t.unitIndex/M[e.BlockIndexX]),e.cy=z+e.BlockIndexY*(D+V+G)+(e.circleIndexY+.5)*L,"2004"===t.year&&e.BlockIndexY>0&&(e.cy+=50-10*e.BlockIndexY),e.cx=W+F[e.BlockIndexX]+(e.circleIndexX+.5)*L,e.citationGrey=(i=t.citationCount,p.interpolateGreys(Q(i))),e.activeColors=t.innerColors,e.innerColors=e.activeColors.length>0?e.activeColors:[e.citationGrey],e.outerColors=["none"],g?e.outerColors=t.outerColors:x?(j===t.doi&&(e.outerColors=["#d95f02"]),v.has(t.doi)&&(e.outerColors=["#1b9e77"]),O.has(t.doi)&&(e.outerColors=["#7570b3"])):e.outerColors=["none"],e.opacity=d?t.innerColors.length+t.outerColors.length>0?.8:.4:.8,e.title=t.Title,x?(j===t.doi&&(e.borderColor="#d95f02"),v.has(t.doi)&&(e.borderColor="#1b9e77"),O.has(t.doi)&&(e.borderColor="#7570b3")):e.borderColor="none",e.isBackgroundActive=y.has(t.doi),e})),et=c.map((function(t,e){return{value:t,x:W+F[e]+M[e]*L/2,y:.8*z}})),nt=o.map((function(t,e){return{value:t,x:.35*W,y:z+(D+V+G)*e}})),it=function(t,e){t.stopPropagation(),b(e)},rt=Object(r.useState)(""),at=Object(s.a)(rt,2),ct=at[0],ot=at[1],st=ct.length>0?e.find((function(t){return t.doi===ct})):{},lt=ct.length>0?tt.find((function(t){return t.doi===ct})):{},ut=function(t){console.log("===> hover",t),ot(t)},ht=function(){console.log("===> mouse leave"),ot("")};return Object(i.jsxs)("div",{className:"unit-view",children:[Object(i.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",onClick:function(){m()},children:[Object(i.jsx)("g",{id:"units",children:L>0&&tt.map((function(t,e){return Object(i.jsx)(X,{cx:t.cx,cy:t.cy,r:L/2.4,doi:t.doi,colors:t.colors,opacity:t.opacity,innerColors:t.innerColors,outerColors:t.outerColors,handleClick:it,borderOpacity:t.borderOpacity,borderColor:t.borderColor,title:t.title,isBackgroundActive:t.isBackgroundActive,handleHover:ut,handleHoverOut:ht},e)}))}),Object(i.jsx)("g",{id:"x-label",children:L>0&&et.map((function(t){return Object(i.jsx)("text",{x:t.x,y:t.y,textAnchor:"middle",fontSize:1.6*L,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))}),Object(i.jsx)("g",{id:"y-label",children:L>0&&nt.map((function(t){return Object(i.jsx)("text",{transform:"translate(".concat(t.x,", ").concat(t.y,") rotate(90)"),fontSize:1.6*L,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))})]}),Object(i.jsx)(U,{isShow:ct.length>0,paper:st,containerWidth:w,containerHeight:N,paperCircle:lt})]})})),$=n(71),Q=(n(132),n(157)),tt=n(155),et=n(154),nt=n(156),it=n(160),rt=n(89),at=n(43),ct=n(161),ot=["title","doi","year","conferenceName","authors","citationCount","affiliation","countries","abstract","keywords","refList"],st=Object(D.a)((function(){var t=A(),e=t.currentSelectedPaper,n=t.setPaper,a=t.updatePaper,c=e,o=Object(r.useState)(!1),l=Object(s.a)(o,2),u=l[0],h=l[1],d=Object(r.useState)({}),p=Object(s.a)(d,2),f=p[0],g=p[1],j=function(){if(!u){var t={};ot.forEach((function(n){return t[n]=Array.isArray(e[n])?e[n].join("; "):e[n]})),g(t)}h(!u)};if(!e)return Object(i.jsx)("div",{});var b=Object(C.get)(c,"doi",""),x=[{title:"Private Tags",value:"privateTags",initTags:Object(C.get)(c,"privateTags",[])},{title:"Public Tags",value:"publicTags",initTags:Object(C.get)(c,"publicTags",[])}];return Object(i.jsx)("div",{className:"detail-view",children:c&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"detail-header",children:[Object(i.jsxs)("div",{className:"detail-header-content",children:[Object(i.jsx)("div",{className:"detail-title",children:c.title}),Object(i.jsxs)("div",{className:"detail-authors",children:[Object(C.get)(c,"authors",[]).join("; ")," (",c.year,")"]})]}),Object(i.jsx)("div",{className:"detail-header-icons",children:Object(i.jsx)(it.a,{onClick:j})})]}),Object(i.jsxs)("div",{className:"detail-edit-tags",children:[Object(i.jsxs)("div",{className:"detail-edit-read",children:[Object(i.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(i.jsx)(Q.a,{size:"small",checkedChildren:Object(i.jsx)(rt.a,{}),unCheckedChildren:Object(i.jsx)(at.a,{}),defaultChecked:Object(C.get)(c,"read",!1),onChange:function(t){n(b,"read",t)}})]}),x.map((function(t){return Object(i.jsx)(ut,{title:t.title,initTags:t.initTags,handleChangeTags:function(e){return function(t,e){b&&n(b,t,e)}(t.value,e)}},t.value)}))]}),Object(i.jsxs)("div",{className:"detail-attrs",children:[Object(i.jsxs)("div",{className:"detail-attr",children:[Object(i.jsx)("div",{className:"detail-key",children:"keywords:"}),Object(i.jsx)("div",{className:"detail-content",children:Object(C.get)(c,"keywords",[]).join("; ")})]}),Object(i.jsx)(lt,{paper:c,label:"doi"}),Object(i.jsx)(lt,{paper:c,label:"conference/journal",value:"conferenceName"}),Object(i.jsx)(lt,{paper:c,label:"affiliation"}),Object(i.jsx)(lt,{paper:c,label:"abstract"})]}),Object(i.jsx)(tt.a,{title:"Upload",visible:u,onOk:function(){a(e.doi,f),j()},onCancel:j,centered:!0,children:ot.map((function(t){return Object(i.jsxs)("div",{className:"detail-new-paper-item",children:[Object(i.jsx)("div",{className:"detail-new-paper-label",children:t}),Object(i.jsx)("div",{className:"detail-new-paper-input",children:Object(i.jsx)(et.a,{value:f[t],onChange:function(e){var n=Object($.a)({},f);n[t]=e.target.value,g(n)}})})]},t)}))},e.doi)]})},b)})),lt=function(t){var e=t.paper,n=t.label,r=t.value,a=void 0===r?"":r;return 0===a.length&&(a=n),Object(i.jsxs)("div",{className:"detail-attr",children:[Object(i.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(i.jsx)("div",{className:"detail-content",children:Object(C.get)(e,a,"")})]})},ut=function(t){var e=t.title,n=t.initTags,a=t.handleChangeTags,c=Object(r.useState)(n),o=Object(s.a)(c,2),u=o[0],h=o[1],d=function(t){a(t),h(t)},p=Object(r.useState)(-1),f=Object(s.a)(p,2),g=f[0],j=f[1],b=Object(r.useRef)(),x=Object(r.useState)(""),m=Object(s.a)(x,2),v=m[0],O=m[1],y=function(){var t=Object(l.a)(u);t[g]=v,d(t),j(-1),O("")},P=Object(r.useState)(""),C=Object(s.a)(P,2),T=C[0],w=C[1],k=function(){T&&u.indexOf(T)<0&&(d([].concat(Object(l.a)(u),[T])),_(!1),w(""))},S=Object(r.useState)(!1),H=Object(s.a)(S,2),N=H[0],_=H[1];return Object(i.jsxs)("div",{className:"detail-edit-tag",children:[Object(i.jsxs)("div",{className:"detail-edit-title",children:[e,":"]}),Object(i.jsx)("div",{className:"detail-edit-tags",children:Object(i.jsxs)(i.Fragment,{children:[u.map((function(t,e){return g===e?Object(i.jsx)(et.a,{size:"small",className:"tag-input",value:v,onchange:function(t){return O(t.target.value)},onBlur:y,onPressEnter:y},t):Object(i.jsx)(nt.a,{className:"edit-tag",closable:!0,onClose:function(){return e=t,void d(u.filter((function(t){return t!==e})));var e},children:Object(i.jsx)("span",{children:t})},t)})),N&&Object(i.jsx)(et.a,{ref:b,type:"text",size:"small",className:"tag-input",value:T,onChange:function(t){return w(t.target.value)},onBlur:k,onPressEnter:k}),!N&&Object(i.jsxs)(nt.a,{className:"site-tag-plus",onClick:function(){_(!0)},children:[Object(i.jsx)(ct.a,{})," New Tag"]})]})})]})},ht=function(){var t=A();return Object(r.useEffect)((function(){t.setCurrentPage(),t.initPapers(),t.initUserId()}),[]),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsxs)("div",{className:"control-main-container",children:[Object(i.jsx)("div",{className:"control-view-container",children:Object(i.jsx)(M,{})}),Object(i.jsx)("div",{className:"unit-view-container",children:Object(i.jsx)(Z,{})})]}),Object(i.jsx)("div",{className:"detail-view-container",children:Object(i.jsx)(st,{})})]})},dt=(n(135),n(136),function(t){var e=t.svgId,n=Object(r.useState)({width:0,height:0}),i=Object(s.a)(n,2),a=i[0],c=i[1];return Object(r.useEffect)((function(){var t=p.select("#".concat(e)).node().getClientRects()[0];c(t)}),[e]),a}),pt=n(151),ft=Object(D.a)((function(){var t="ana-projection-map-svg",e=A(),n=(e.drawProjectionFlag,e.analysisPapers),a=e.anaHighPapers,c=e.num_topics,o=(e.resetProjectionFlag,e.setNumTopics),u=(e.defaultHighColor,e.topicColorScale),h=e.anaFilterType,d=e.anaHighTopic,f=e.setAnaSelectHighlightPaperDoi,g=e.anaSelectHighlightPaperDoi,j=e.setHighEntityLinkData,b=e.anaHighEntityTopic,x=e.setAnaHighEntityTopic,m=e.setAnaHoverPaperDoi,v=e.removeHoverPaperDoi,O=e.anaHoverPaperDoi,y=Object(r.useState)(c),P=Object(s.a)(y,2),T=P[0],w=P[1],k=dt({svgId:t}),S=k.width,H=k.height;Object(r.useEffect)((function(){e.tryLda()}),[]);var N=30,_=30,L=30,Y=30,D=p.scaleLinear().domain([p.min(n,(function(t){return t.projection[0]})),p.max(n,(function(t){return t.projection[0]}))]).nice().range([N,S-_]),E=p.scaleLinear().domain([p.min(n,(function(t){return t.projection[1]})),p.max(n,(function(t){return t.projection[1]}))]).nice().range([H-Y,L]),I=p.range(c).map((function(t){return p.contourDensity().x((function(t){return D(t.projection[0])})).y((function(t){return E(t.projection[1])})).size([S,H]).bandwidth(30).thresholds(35)(n.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})))[t%5]})),M=function(t){return"none"===h?.25:"topic"!==h?.1:t===d?.36:.1},B=p.scaleLinear().domain([0,p.max(n,(function(t){return+t.citationCount}))]).range([3,15]),F=function(t){if(0===t.topics.length)return"#ccc";var e=t.topics[0];return t.topics.forEach((function(t){t[1]>e[1]&&(e=t)})),u[e[0]]},X=function(t){return g===t.doi||"none"===h?1:a.map((function(t){return t.doi})).includes(t.doi)?.8:.2},U=function(t){return g===t.doi?6:"none"===h||"topic"===h?1:a.map((function(t){return t.doi})).includes(t.doi)?3:1},z=function(t){return g===t.doi?[4,8]:"none"===h||"topic"===h?"none":a.map((function(t){return t.doi})).includes(t.doi)?[5,5]:"none"},W=function(t){return g===t.doi?"red":"none"===h||"topic"===h?"#fff":a.map((function(t){return t.doi})).includes(t.doi)?"#333":"none"},R=function(t){var e=n.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})),i=n.filter((function(e){return e.topics[0][0]===t})),r=D(i.reduce((function(t,e){return t+e.projection[0]}),0)/i.length),a=E(i.reduce((function(t,e){return t+e.projection[1]}),0)/i.length);return{allPapers:e,topicIndex:t,mainPapers:i,positionX:r,positionY:a,color:u[t]}},K=R(d),V=new Set(K.allPapers.map((function(t){return t.doi}))),J=p.range(c).filter((function(t){return t!==d})).map((function(t){return R(t)}));J.forEach((function(t){t.intersectionPapers=t.allPapers.filter((function(t){return V.has(t.doi)}))}));var q=p.scaleLinear().domain(p.extent([].concat(Object(l.a)(J),[K]),(function(t){return t.allPapers.length}))).range([30,45]),G=function(t){var e=2*Math.PI*t.intersectionPapers.length/t.allPapers.length,n=q(t.allPapers.length),i={x:t.positionX,y:t.positionY-n},r={x:t.positionX+Math.sin(e)*n,y:t.positionY-Math.cos(e)*n};return"M ".concat(t.positionX," ").concat(t.positionY,"\n          L ").concat(i.x," ").concat(i.y,"\n          A ").concat(n," ").concat(n," 0 0 1 ").concat(r.x," ").concat(r.y,"\n          Z\n          ")},Z=function(t){return b<0?.8:t.topicIndex===b?1:.6},$=J.map((function(t){var e=t.topicIndex,n={x:t.positionX,y:t.positionY},i={x:K.positionX,y:K.positionY},r=function(t,e,n,i,r){var a,c,o,s,l=Math.sqrt((t-n)*(t-n)+(e-i)*(e-i)),u=(i-e)*r/l,h=(n-t)*r/l;return{x_1_3_positive:(a=t-u)+(n-t)/3,y_1_3_positive:(c=e+h)+(i-e)/3,x_2_3_positive:a+2*(n-t)/3,y_2_3_positive:c+2*(i-e)/3,x_1_3_negative:(o=t+u)+(n-t)/3,y_1_3_negative:(s=e-h)+(i-e)/3,x_2_3_negative:o+2*(n-t)/3,y_2_3_negative:s+2*(i-e)/3}}(n.x,n.y,i.x,i.y,25),a=[{x:r.x_1_3_negative,y:r.y_1_3_negative},{x:r.x_2_3_negative,y:r.y_2_3_negative}],c=[{x:r.x_1_3_positive,y:r.y_1_3_positive},{x:r.x_2_3_positive,y:r.y_2_3_positive}],o=t.allPapers.filter((function(t){return V.has(t.doi)})),s=o.length,l=new Set(o.map((function(t){return t.doi}))),u=t.allPapers.filter((function(t){return!l.has(t.doi)})),h=K.allPapers.filter((function(t){return!l.has(t.doi)})),d=new Set(u.reduce((function(t,e){return t.concat(e.refList)}),[])),p=h.filter((function(t){return d.has(t.doi)})),f=new Set(p.map((function(t){return t.doi}))),g=u.reduce((function(t,e){return t+e.refList.filter((function(t){return f.has(t)})).length}),0),j=p.length,b=u.filter((function(t){return t.refList.filter((function(t){return f.has(t)})).length>0})),x=new Set(h.reduce((function(t,e){return t.concat(e.refList)}),[])),m=u.filter((function(t){return x.has(t.doi)})),v=new Set(m.map((function(t){return t.doi}))),O=h.reduce((function(t,e){return t+e.refList.filter((function(t){return v.has(t)})).length}),0),y=m.length;return{topicIndex:e,source:n,target:i,citeControlPoints:a,citedControlPoints:c,independentPapers:u,interPapers:o,centralEntityIndependentPapers:h,citeDoiSet:d,citedDoiSet:x,interCount:s,citePapers:p,citePaperCount:j,citeLinkCount:g,citedPapers:m,citedPaperCount:y,citedLinkCount:O,citeSourcePapers:b,citePapersDoiSet:f}})),Q=p.scaleLinear().domain([0,p.max($,(function(t){return p.max([t.interCount,t.citeLinkCount,t.citedLinkCount])}))]).range([5,20]),tt=function(t){return 0===t?0:Q(t)},et=function(t){return b<0?.7:t.topicIndex===b?1:.3},nt=p.sort(Object(l.a)(a),(function(t){return+t.citationCount})).reverse(),it=[],rt=function(t){return!it.find((function(e){return n=t,i=e,Math.abs(D(n.projection[0])-D(i.projection[0]))<200&&Math.abs(E(n.projection[1])-E(i.projection[1]))<30;var n,i}))};nt.forEach((function(t){it.length<16&&rt(t)&&it.push(t)}));var at=new Set(it.map((function(t){return t.doi}))),ct=p.scaleLinear().domain(p.extent(it,(function(t){return+t.citationCount}))).range([16,22]).clamp(!0),ot=function(t){var e=Object(C.get)(t,"authors[0]","").split(" ").slice(-1),n=Object(C.get)(t,"conferenceName",""),i="".concat(Object(C.get)(t,"year","")).slice(-2);return at.has(t.doi)||g===t.doi||O===t.doi?"[".concat(e,". ").concat(n).concat(i,"]"):""};return Object(i.jsxs)("div",{className:"projection-view",children:[Object(i.jsxs)("svg",{id:t,width:"100%",height:"100%",children:[Object(i.jsx)("g",{id:"topic-contours-g",strokeLinejoin:"round",strokeWidth:"1.5",children:I.map((function(t,e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("path",{d:p.geoPath()(t),fill:u[e],opacity:M(e),stroke:e===d?"#111":u[e],strokeDasharray:e===d?5:"none"},e),Object(i.jsx)("path",{d:p.geoPath()(t),fill:"none",opacity:1,stroke:u[e],strokeDasharray:5},"".concat(e,"-border"))]})}))}),Object(i.jsx)("g",{id:"paper-circles-g",stroke:"#fff",children:n.map((function(t){return Object(i.jsx)("g",{transform:"translate(".concat(D(t.projection[0]),", ").concat(E(t.projection[1]),")"),children:Object(i.jsx)("circle",{r:B(+t.citationCount)+U(t),fill:F(t),strokeLinecap:"round",strokeWidth:U(t),opacity:X(t),strokeDasharray:z(t),stroke:W(t),cursor:"pointer",onClick:function(){return f(t.doi)},onMouseEnter:function(e){return function(t,e){var n=t.clientX,i=t.clientY;m(n,i,e)}(e,t.doi)},onMouseLeave:v})},t.doi)}))}),"topic"===h&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("g",{id:"topic-links-g",strokeLinecap:"round",children:$.map((function(t){return Object(i.jsxs)("g",{fill:"none",opacity:et(t),cursor:"pointer",onClick:function(){return x((e=t).topicIndex),void j(e.citeSourcePapers.map((function(t){return t.doi})),e.citedPapers.map((function(t){return t.doi})),e.centralEntityIndependentPapers.map((function(t){return t.doi})));var e},children:[Object(i.jsx)("path",{className:"cited",stroke:u[t.topicIndex],strokeWidth:tt(t.citedLinkCount),d:"M".concat(t.source.x,",").concat(t.source.y," \n                    C").concat(t.citedControlPoints[0].x,",").concat(t.citedControlPoints[0].y,", \n                    ").concat(t.citedControlPoints[1].x,",").concat(t.citedControlPoints[1].y,", \n                    ").concat(t.target.x,",").concat(t.target.y)}),Object(i.jsx)("path",{className:"cite",stroke:u[d],strokeWidth:tt(t.citeLinkCount),d:"M".concat(t.target.x,",").concat(t.target.y,"\n                    C").concat(t.citeControlPoints[1].x,",").concat(t.citeControlPoints[1].y,", \n                    ").concat(t.citeControlPoints[0].x,",").concat(t.citeControlPoints[0].y,", \n                    ").concat(t.source.x,",").concat(t.source.y)})]},t.topicIndex)}))}),Object(i.jsxs)("g",{id:"topic-entities-g",children:[Object(i.jsx)("g",{id:"selected-topic-entity-g"}),Object(i.jsx)("g",{id:"others-topic-entities-g",stroke:"#fff",strokeWidth:"3",children:J.map((function(t){return Object(i.jsxs)("g",{opacity:Z(t),children:[Object(i.jsx)("circle",{cx:t.positionX,cy:t.positionY,r:q(t.allPapers.length),fill:t.color}),Object(i.jsx)("path",{fill:u[d],d:G(t)})]},t.topicIndex)}))})]})]}),Object(i.jsx)("g",{id:"paper-circles-lables-g",stroke:"#fff",children:n.map((function(t){return Object(i.jsx)("g",{transform:"translate(".concat(D(t.projection[0]),", ").concat(E(t.projection[1]),")"),children:Object(i.jsx)("text",{fontSize:ct(+t.citationCount),fill:"#333",stroke:"none",textAnchor:"middle",y:"-10",opacity:.9,pointerEvents:"none",children:ot(t)})},t.doi)}))})]}),Object(i.jsxs)("div",{className:"topics-number-input",children:[Object(i.jsxs)("div",{className:"topics-number-input-text",children:["Topics Num: ",T]}),Object(i.jsx)(pt.a,{min:2,max:10,onAfterChange:o,onChange:w,value:T})]})]})})),gt=(n(137),Object(D.a)((function(){var t="ana-network-svg",e=50,n=50,r=50,a=40,c=dt({svgId:t}),o=c.width,s=void 0===o?0:o,u=c.height,h=void 0===u?0:u,d=A(),f=d.analysisPapers,g=d.topicColorScale,j=d.anaFilterType,b=d.anaHighTopic,x=d.anaHighPapers,m=d.setAnaSelectHighlightPaperDoi,v=d.anaSelectHighlightPaperDoi,O=d.anaHighEntityTopic,y=d.anaHighEntityCitePaperDois,P=d.anaHighEntityCitedPaperDois,C=d.anaHighTopicIndenpentPaperDois,T=d.anaYearRange,w=d.setAnaHoverPaperDoi,k=d.removeHoverPaperDoi,S=new Set(x.map((function(t){return t.doi}))),H=p.extent(f,(function(t){return+t.year})),N=p.range.apply(p,Object(l.a)(H.map((function(t,e){return t+e})))).map((function(t){return f.filter((function(e){return+e.year===+t})).length})),_=p.max([(s-e-n)/(H[1]-H[0]+1)*.68,0]),L=p.max([p.min([.4*_,(h-a-r)/p.max(N)*.7]),0]),Y=p.scaleLinear().domain(H).range([e,s-n]),D=p.scaleLinear().domain([0,p.max(N)-1]).range([r,h-a]),E={},I=f.slice();I.sort((function(t,e){return t.topics[0][0]===e.topics[0][0]?t.topics[0][1]-e.topics[0][1]:t.topics[0][0]-e.topics[0][0]}));var M={};I.forEach((function(t){t.year in E||(E[t.year]=0),M[t.doi]=E[t.year],E[t.year]+=1}));var B=function(t){if(t.doi===v)return 1;if(S.has(t.doi))return 1;if(O>=0){if(y.includes(t.doi))return.9;if(P.includes(t.doi))return.9}return.3},F=function(t){if(t.doi===v)return"red";if(v.length>0&&S.has(t.doi)){if(t.refList.includes(v))return"#333";if(K[v].refList.includes(t.doi))return"#333"}if(O>=0){if(y.includes(t.doi))return"#666";if(P.includes(t.doi))return"#666"}return"none"===j?"#fff":S.has(t.doi)?"#666":"#fff"},X=function(t){if(t.doi===v)return 3;if(v.length>0&&S.has(t.doi)){if(t.refList.includes(v))return 3;if(K[v].refList.includes(t.doi))return 3}return 2},U=function(t){if(t.doi===v)return[4,7];if(v.length>0&&S.has(t.doi)){if(t.refList.includes(v))return"none";if(K[v].refList.includes(t.doi))return"none"}if(O>=0){if(y.includes(t.doi))return"none";if(P.includes(t.doi))return"none"}return"none"===j?"none":S.has(t.doi)?[5,4]:"none"},z=p.contourDensity().x((function(t){return Y(+t.year)})).y((function(t){return D(M[t.doi])})).size([s,h]).bandwidth(30).thresholds(5)(x)[0],W="none"===j?"none":"topic"===j?g[b]:"#aaa",R="none"===j?0:.25,K={};f.forEach((function(t){return K[t.doi]=t}));var V=[];f.forEach((function(t){t.refList.forEach((function(e){if(e in K){var n={source:e,target:t.doi,weight:1};V.push(n)}}))}));var J=p.linkHorizontal().x((function(t){return Y(K[t].year)})).y((function(t){return D(M[t])})),q=function(t){if(D(M[t.source])===D(M[t.target])){var e=Y(K[t.source].year),n=D(M[t.source]),i=Y(K[t.target].year),c=n,o=e+.3*(i-e),s=e+.7*(i-e),l=n+(h-a-r)/p.max(N)*.8,u=l;return"M".concat(e,",").concat(n," C ").concat(o,",").concat(l,",").concat(s,",").concat(u,",").concat(i,",").concat(c)}return J(t)},G=function(t){if(t.source===v&&S.has(t.target)||t.target===v&&S.has(t.source))return"#333";if(O>=0){if(y.includes(t.target)&&C.includes(t.source))return g[b];if(P.includes(t.source)&&C.includes(t.target))return g[O]}return S.has(t.source)&&S.has(t.target)?"#555":"#aaa"},Z=function(t){if(t.source===v&&S.has(t.target)||t.target===v&&S.has(t.source))return 1;if("none"===j)return.1;if(O>=0){if(y.includes(t.target)&&C.includes(t.source))return.9;if(P.includes(t.source)&&C.includes(t.target))return.9}return O<0&&S.has(t.source)&&S.has(t.target)?.35:0},$=function(t){if(t.source===v||t.target===v)return 5;if(O>=0){if(y.includes(t.target)&&C.includes(t.source))return 5;if(P.includes(t.source)&&C.includes(t.target))return 5}return S.has(t.source)&&S.has(t.target)?4:0};return Object(i.jsx)("div",{className:"ana-network-view",style:{pointerEvents:"none"},children:Object(i.jsxs)("svg",{id:t,width:"100%",height:"100%",children:[Object(i.jsxs)("g",{id:"ana-network-axis",children:[Object(i.jsx)("path",{d:"M".concat(.3*e,",").concat(.63*r,"H").concat(s-.3*n),stroke:"#999",strokeWidth:"1"}),Object(i.jsx)("g",{id:"ana-network-axis-labels",children:T.map((function(t){return Object(i.jsx)("text",{x:Y(t),y:.5*r,fontSize:"14",fill:"#888",textAnchor:"middle",children:t},t)}))})]}),Object(i.jsx)("g",{id:"network-contour-g",children:Object(i.jsx)("path",{d:p.geoPath()(z),fill:W,opacity:R})}),Object(i.jsx)("g",{id:"network-links-g",fill:"none",children:V.map((function(t){return Object(i.jsx)("path",{d:q(t),strokeLinecap:"round",stroke:G(t),strokeWidth:$(t),opacity:Z(t)},"".concat(t.source,"-").concat(t.target))}))}),Object(i.jsx)("g",{id:"network-rects-g",children:f.map((function(t){var e=t.topics.map((function(t){return t[1]})),n=e.reduce((function(t,e){return t+e}),0),r=e.slice(1).map((function(t){return(t/n<.2?.2:t/n)*_}));r.unshift(_-r.reduce((function(t,e){return t+e}),0));for(var a=[0],c=0;c<r.length-1;c++)a.push(a[c]+r[c]);return Object(i.jsx)("g",{transform:"translate(".concat(Y(+t.year),", ").concat(D(M[t.doi]),")"),cursor:"pointer",opacity:B(t),onClick:function(){return m(t.doi)},onMouseEnter:function(e){return function(t,e){var n=t.clientX,i=t.clientY;w(n,i,e)}(e,t.doi)},onMouseLeave:k,style:{pointerEvents:"auto"},children:Object(i.jsxs)(i.Fragment,{children:[t.topics.map((function(t,e,n){return Object(i.jsx)("rect",{fill:g[t[0]],x:-_/2+a[e],y:-L/2,width:r[e],height:L,stroke:"#fff",strokeWidth:"1"},t[0])})),Object(i.jsx)("rect",{x:-_/2-X(t)/2,y:-L/2-X(t)/2,fill:"none",width:_+X(t),height:L+X(t),stroke:F(t),strokeWidth:X(t),strokeLinecap:"round",strokeDasharray:U(t)})]})},t.doi)}))})]})})}))),jt=(n(138),Object(D.a)((function(){var t=A(),e=t.topics_word_dis,n=t.topicColorScale,r=t.anaFilterType,a=t.anaHighTopic,c=t.setAnaHighPapersByTopic,o=t.num_topics,s="topic-list-content-svg",l=dt({svgId:s}),u=l.width,h=l.height,d=u/o,f=.85/Object(C.get)(e,"[0].length",1),g=p.scaleLinear().domain([p.min(e.map((function(t){return p.min(t,(function(t){return t[1]}))}))),p.max(e.map((function(t){return p.max(t,(function(t){return t[1]}))})))]).range([.45*f*h,1.1*f*h]).clamp(!0);return Object(i.jsxs)("div",{className:"topic-list-view",children:[Object(i.jsx)("div",{className:"topic-list-header",children:"Topic List"}),Object(i.jsx)("div",{className:"topic-list-content",children:Object(i.jsxs)("svg",{id:s,width:"100%",height:"100%",children:[Object(i.jsx)("g",{className:"topic-list-words",transform:"translate(0, ".concat(.01*h,")"),textAnchor:"middle",children:e.map((function(t,e){return Object(i.jsx)("g",{className:"topic-list-words-column",transform:"translate(".concat(d*(e+.5),", 0)"),opacity:"topic"===r&&a!==e?.2:1,children:t.map((function(t,e){return Object(i.jsx)("g",{className:"topic-list-word",transform:"translate(0, ".concat(f*h*(e+1),")"),children:Object(i.jsx)("text",{fontSize:g(t[1]),fill:"#333",children:t[0]})},e)}))},e)}))}),Object(i.jsx)("g",{className:"topic-list-topics-label",transform:"translate(0, ".concat(.88*h,")"),children:p.range(o).map((function(t){return Object(i.jsxs)("g",{className:"topic-list-topic-label",transform:"translate(".concat(d*(t+.5),", 0)"),onClick:function(){return c(t)},opacity:"topic"===r&&a!==t?.2:1,children:[Object(i.jsx)("rect",{x:.25*-d,y:.1*g(1),width:.5*d,height:.95*g(1),fill:n[t]}),Object(i.jsxs)("text",{fontSize:.6*g(1),fill:"#fff",textAnchor:"middle",x:"0",y:.8*g(1),children:["Topic ",t+1]})]})}))})]})})]})}))),bt=(n(139),.015),xt=function(t){return"".concat(100*t,"%")},mt=.045,vt=.1,Ot=.03,yt=.024,Pt=.24,Ct=.71-.03,Tt=.018,wt=["#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],kt=Object(D.a)((function(){var t="statistics-view-svg",e=dt({svgId:t}),n=e.width,r=e.height,a={transform:"translateY(".concat(xt(0),")")},c={transform:"translateY(".concat(xt(mt),")")},o={transform:"translateY(".concat(xt(.14500000000000002),")")},s={transform:"translateY(".concat(xt(.42500000000000004),")")},l={transform:"translateY(".concat(xt(.7050000000000001),")")},u=A(),h=u.analysisPapers,d=u.anaHighPapers,f=u.anaTagViewData,g=u.anaYearRange,j=u.num_topics,b=u.topicColorScale,x=u.anaFilterType,m=u.anaHighTag,v=(u.anaHighTopic,u.setAnaFilterType),O=u.setAnaHighPapersByYear,y=u.setAnaHighPapersByTag,P=u.setAnaHighPapersByTopic,C=u.startYear,T=u.endYear,w=u.setClearBrushTrigger,k=(u.clearBrushTrigger,f.find((function(t){return"authors"===t.value})).data.slice(0,10)),S=f.find((function(t){return"keywords"===t.value})).data.slice(0,10),H=p.range(0,j).map((function(t){var e=h.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})),n=d.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)}));return{label:"topic ".concat(t+1),allCount:e.length,highlightCount:n.length,allDis:g.map((function(t){return e.filter((function(e){return e.year==t})).length})),highLightDis:g.map((function(t){return n.filter((function(e){return e.year==t})).length})),color:b[t]}})),N=g.map((function(t){return{year:t,all:h.filter((function(e){return e.year==t})).length,highlight:d.filter((function(e){return e.year==t})).length}}));return Object(i.jsxs)("svg",{id:t,width:"100%",height:"100%",children:[Object(i.jsx)("defs",{children:Object(i.jsxs)("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[Object(i.jsx)("stop",{offset:"20%",style:{"stop-color":"#777","stop-opacity":1}}),Object(i.jsx)("stop",{offset:"100%",style:{"stop-color":"#fff","stop-opacity":1}})]})}),Object(i.jsx)("g",{id:"header-g",style:a,children:Object(i.jsx)(St,{allCount:h.length,highlightCount:d.length,anaFilterType:x,width:n,height:r})}),Object(i.jsx)("g",{id:"time-distribution-g",style:c,children:Object(i.jsx)(At,{data:N,width:n,height:r,startYear:C,endYear:T,brushStart:function(){v("year")},brushing:function(t){var e=t.selection,i=function(t){return t/(n*Ct)*g.length},r=Math.floor(i(e[0])),a=g[r>0?r:0],c=Math.floor(i(e[1])),o=g[c<g.length-1?c:g.length-1];(C!==a||T!==o)&&O([a,o])},brushEnd:function(t){t&&t.selection||(v("none"),O([g[0],g[g.length-1]]))},setClearBrushTrigger:w})}),Object(i.jsx)("g",{id:"authors-distribution-g",style:o,children:Object(i.jsx)(Yt,{height:r,title:"Author",width:n,children:Object(i.jsx)(Dt,{data:k,width:n,height:r,handleClick:function(t){y({anaHighCate:"authors",anaHighTag:t})},anaHighTag:m})})}),Object(i.jsx)("g",{id:"keywords-distribution-g",style:s,children:Object(i.jsx)(Yt,{height:r,title:"Tag",width:n,children:Object(i.jsx)(Dt,{data:S,width:n,height:r,handleClick:function(t){y({anaHighCate:"keywords",anaHighTag:t})},anaHighTag:m})})}),Object(i.jsx)("g",{id:"topics-distribution-g",style:l,children:Object(i.jsx)(Yt,{height:r,title:"Topic",width:n,children:Object(i.jsx)(Lt,{data:H,width:n,height:r,handleClick:function(t){P(t)},anaHighTag:m})})})]})})),St=function(t){var e=t.allCount,n=void 0===e?0:e,r=(t.highlightCount,t.anaFilterType,t.width),a=void 0===r?0:r,c=t.height,o=void 0===c?0:c;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("text",{x:.04*a,y:mt*o*.55,fontSize:.022*o,fontWeight:"600",fill:"#444",children:["All Papers: ",n]}),Object(i.jsx)("path",{d:"M".concat(.02*a,", ").concat(mt*o*.8," H").concat(.98*a),stroke:"#ccc",strokeWidth:"1.5"}),Object(i.jsxs)("g",{className:"statistics-header-legend",transform:"translate(".concat(.61*a,", ").concat(mt*o*.1,")"),children:[wt.map((function(t,e){return Object(i.jsx)("rect",{x:.3*a*e/5,y:o*mt*.1,width:.3*a/5,height:o*mt*.4,fill:t},t)})),Object(i.jsx)("text",{x:.02*-a,y:o*mt*.45,fontSize:bt*o,textAnchor:"end",fill:"#999",children:"0"}),Object(i.jsx)("text",{x:.32*a,y:o*mt*.45,fontSize:bt*o,fill:"#999",children:"\u22655"})]})]})},Ht=.07500000000000001,Nt=.08000000000000002,_t=.08500000000000002,At=function(t){var e=t.data,n=void 0===e?[]:e,a=t.width,c=void 0===a?0:a,o=t.height,s=void 0===o?0:o,l=t.startYear,u=void 0===l?0:l,h=t.endYear,d=void 0===h?0:h,f=t.brushStart,g=void 0===f?function(){}:f,j=t.brushing,b=void 0===j?function(){}:j,x=t.brushEnd,m=void 0===x?function(){}:x,v=t.setClearBrushTrigger,O=void 0===v?function(){}:v,y=p.max(n,(function(t){return t.all})),P=0===n.length?1:n.length,C=function(t){return c*Ct/P*t},T=function(t){return s*Ht*(y-t)/y},w=c*Ct/P*.8,k=p.brushX().extent([[0,0],[Ct*c,Ht*s]]).on("start",g).on("brush",b).on("end",m);Object(r.useEffect)((function(){var t=p.select(".time-line-bar-chart");t.call(k),O((function(){p.brush().move(t)}))}),[c]);var S=.16799999999999998*c,H=vt*s*.3,N=vt*s*.8,_=H+vt*s*.1,A=vt*s*.14;return Object(i.jsxs)("g",{className:"time-line-container",children:[Object(i.jsxs)("g",{className:"time-line-time",fontSize:.022*s,fontWeight:"600",fill:"#888",children:[Object(i.jsx)("text",{x:S,y:H,textAnchor:"middle",children:u}),Object(i.jsx)("text",{x:S,y:N,textAnchor:"middle",children:d}),Object(i.jsx)("path",{d:"M".concat(S,", ").concat(_," v").concat(A," "),stroke:"#999"})]}),Object(i.jsxs)("g",{className:"time-line-bar-chart",transform:"translate(".concat(.29*c,", 0)"),children:[Object(i.jsx)("g",{className:"time-line-bars-background",children:n.map((function(t,e){return Object(i.jsx)("rect",{x:C(e),y:T(t.all),fill:"#ccc",width:w,height:T(0)-T(t.all)},e)}))}),Object(i.jsx)("g",{className:"time-line-bars-highlight",children:n.map((function(t,e){return Object(i.jsx)("rect",{x:C(e),y:T(t.highlight),fill:"#888",width:w,height:T(0)-T(t.highlight)},e)}))}),Object(i.jsxs)("g",{className:"time-line-axis",children:[Object(i.jsx)("path",{d:"M".concat(.5*-w,",").concat(Nt*s,"h").concat(c*Ct+w),stroke:"#aaa",strokeWidth:"1"}),n.map((function(t,e){return+t.year%5===0&&Object(i.jsxs)("g",{children:[Object(i.jsx)("path",{d:"M".concat(C(e)+.5*w,",").concat(Nt*s,"V").concat(_t*s),stroke:"#888",strokeWidth:"1"}),Object(i.jsx)("text",{x:C(e)+.5*w,y:.10000000000000002*s,textAnchor:"middle",fontSize:bt*s,fill:"#aaa",children:t.year})]},e)}))]})]})]})},Lt=function(t){var e=t.data,n=void 0===e?[]:e,r=t.width,a=void 0===r?0:r,c=t.height,o=void 0===c?0:c,s=t.handleClick,l=void 0===s?function(){}:s,u=t.anaHighTag,h=void 0===u?"":u,d=n.length>0?.21/n.length:.22,f=p.max(n.map((function(t){return p.max(t.allDis)}))),g=0===n.length?1:n[0].allDis.length,j=function(t){return a*Ct/g*t},b=function(t){return o*d*(f-t)/f};return Object(i.jsx)("g",{className:"topic-bar-chart",children:n.map((function(t,e){return Object(i.jsxs)("g",{transform:"translate(0, ".concat((d+.005)*o*e,")"),fill:t.color,style:{pointerEvents:"none"},children:[Object(i.jsx)("rect",{x:.01*a,y:.04*-(b(0)-b(f)),height:1.08*(b(0)-b(f)),width:.98*a,fill:"transparent",className:"svg-shadow-hover ".concat(h===t.label?"svg-shadow-active":"","\n            "),style:{pointerEvents:"auto"},onClick:function(){return l(e)}}),Object(i.jsx)("text",{x:Pt*a,y:d*o*.42,fontSize:bt*o,fontWeight:"600",textAnchor:"end",children:t.label}),Object(i.jsxs)("text",{x:Pt*a,y:d*o*.92,fontSize:bt*o,fontWeight:"600",textAnchor:"end",children:[t.highlightCount,"/",t.allCount]}),Object(i.jsx)("g",{className:"topic-bar-chart-background-bars",transform:"translate(".concat(.29*a,", 0)"),children:t.allDis.map((function(t,e){return Object(i.jsx)("rect",{x:j(e),y:b(t),width:a*Ct/g*.8,fill:"#ccc",height:b(0)-b(t)},e)}))}),Object(i.jsx)("g",{className:"topic-bar-chart-active-bars",transform:"translate(".concat(.29*a,", 0)"),children:t.highLightDis.map((function(t,e){return Object(i.jsx)("rect",{x:j(e),y:b(t),width:a*Ct/g*.8,height:b(0)-b(t)},e)}))})]},t.label)}))})},Yt=function(t){t.icon;var e=t.title,n=void 0===e?"":e,r=t.children,a=void 0===r?Object(i.jsx)(i.Fragment,{}):r,c=t.height,o=void 0===c?0:c,s=t.width,l=void 0===s?0:s,u=o*Ot;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("g",{className:"heatmap-title-g",children:[Object(i.jsx)("rect",{className:"heatmap-title-background",x:"20",y:.05*u,width:Pt*l-20,height:.8*u,fill:"#999"}),Object(i.jsx)("g",{className:"heatmap-title-content",children:Object(i.jsx)("text",{x:Pt*l*.5+10,y:.64*u,fontSize:bt*o,fill:"#fff",fontWeight:"600",textAnchor:"middle",children:n})})]}),Object(i.jsx)("g",{className:"heatmap-rows-g",transform:"translate(0, ".concat(u,")"),children:a})]})},Dt=function(t){var e=t.data,n=void 0===e?[]:e,r=t.width,a=void 0===r?0:r,c=t.height,o=void 0===c?0:c,s=t.handleClick,l=void 0===s?function(){}:s,u=t.anaHighTag,h=void 0===u?"":u,d=n.length>0?n[0].all_timeDis.length:1,p=a*Ct/d,f=function(t){return{transform:"translateY(".concat(xt(yt*t),")")}},g=function(t){if(0===t)return"transparent";var e=t>=wt.length?wt.length:t;return wt[e-1]};return Object(i.jsx)("g",{style:{pointerEvents:"none"},children:n.map((function(t,e){return Object(i.jsxs)("g",{className:"heatmap-row-g",style:f(e),children:[Object(i.jsx)("rect",{x:.01*a,y:-.018*o*.1,height:Tt*o*1.2,width:.98*a,fill:"transparent",className:"svg-shadow-hover ".concat(h===t.label?"svg-shadow-active":""),style:{pointerEvents:"auto"},onClick:function(){return l(t.label)}}),t.label.length>13?Object(i.jsx)("text",{x:a*Pt,y:xt(.013999999999999999),fontSize:bt*o,fill:"#666",textAnchor:"end",children:t.label.length>13?"".concat(t.label.slice(0,11),"..."):t.label}):Object(i.jsx)("text",{x:a*Pt,y:xt(.013999999999999999),fontSize:bt*o,fill:"#666",textAnchor:"end",children:t.label}),Object(i.jsx)("g",{className:"heatmap-row-background-rects-g",transform:"translate(".concat(.29*a,", 0)"),children:t.all_timeDis.map((function(t,e){return Object(i.jsx)("rect",{x:p*e,y:"0",width:.75*p,height:Tt*o,fill:t>0?"#ddd":"transparent",opacity:.8},e)}))}),Object(i.jsx)("g",{className:"heatmap-row-highlight-rects-g",transform:"translate(".concat(.29*a,", 0)"),children:t.highlight_timeDis.map((function(t,e){return Object(i.jsx)("rect",{x:p*e,y:"0",width:.75*p,height:Tt*o,fill:g(t),opacity:.8},e)}))})]},t.label)}))})},Et=kt,It=(n(140),Object(D.a)((function(){var t=A(),e=t.analysisPapers,n=t.anaHighPapers,a=t.anaFilterType,c=t.anaHighTag,o=t.anaHighTopic,u=t.anaSelectHighlightPaperDoi,h=t.setAnaSelectHighlightPaperDoi,d=t.setAnaHoverPaperDoi,p=t.removeHoverPaperDoi,f=Object(r.useState)("year"),g=Object(s.a)(f,2),j=g[0],b=g[1],x=Object(r.useState)(1),m=Object(s.a)(x,2),v=m[0],O=m[1],y=Object(l.a)(n).sort((function(t,e){return v*(+t[j]-+e[j])})),P=function(t){t===j?O(-1*v):b(t)},T=[{title:"Title",showText:function(t){return t.title},style:{width:"50%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},onClick:function(){}},{title:"Authors",showText:function(t){return Object(C.get)(t,"authors[0]","")},style:{width:"22%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"center"},onClick:function(){}},{title:"Venue",showText:function(t){return Object(C.get)(t,"conferenceName","")},style:{width:"13%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"center"},onClick:function(){}},{title:"Year",showText:function(t){return t.year},style:{width:"10%",display:"flex",justifyContent:"center"},onClick:function(){return P("year")}},{title:"Cite",showText:function(t){return t.citationCount},style:{width:"7%",display:"flex",justifyContent:"center",border:"none"},onClick:function(){return P("citationCount")}}],w=e.length,k=n.length;return Object(i.jsxs)("div",{className:"papers-table-container",children:[Object(i.jsxs)("div",{className:"papers-table-title",children:[Object(i.jsxs)("div",{children:["Paper List (","".concat("none"===a?"":"".concat(k,"/")).concat(w),")"]}),"none"===a||Object(i.jsx)("div",{style:{marginRight:10},children:"topic"===a?o:c})]}),Object(i.jsxs)("div",{className:"papers-table-content",children:[Object(i.jsx)("div",{className:"papers-table-header",children:T.map((function(t){return Object(i.jsx)("div",{className:"papers-table-header-column",style:t.style,onClick:t.onClick,children:t.title})}))}),Object(i.jsx)("div",{className:"papers-table-rows-container",children:y.map((function(t){return Object(i.jsx)("div",{className:"papers-table-row ".concat(u===t.doi?"papers-table-row-active":""),onClick:function(){return function(t){return h(t.doi)}(t)},onMouseEnter:function(e){return function(t,e){var n=t.clientX,i=t.clientY;d(n,i,e)}(e,t.doi)},onMouseLeave:p,children:T.map((function(e){return Object(i.jsx)("div",{className:"papers-table-column",style:e.style,children:e.showText(t)})}))},t.doi)}))})]})]})}))),Mt=(n(141),Object(D.a)((function(){var t=A(),e=(document.querySelector("body").clientWidth,document.querySelector("body").clientHeight,t.anaHoverPaperDoi),n=t.anaHoverPaperPositionX,r=t.anaHoverPaperPositionY,a=t.anaHoverPaper,c={left:n-20,top:r+30};return 0===e.length?Object(i.jsx)("div",{className:"ana-hover-tooltip-container"}):Object(i.jsxs)("div",{className:"ana-hover-tooltip-container",style:c,children:[Object(i.jsxs)("div",{className:"ana-tooltip-header",children:[Object(i.jsx)("div",{className:"ana-tooltip-title",children:a.title}),Object(i.jsxs)("div",{className:"ana-tooltip-authors-venue-year",children:[a.authors.join("; ")," (",a.conferenceName," ",a.year,")"]})]}),Object(i.jsx)("div",{className:"ana-tooltip-content",children:[{label:"Keywords",showText:function(t){return t.keywords.join("; ")}},{label:"Abstract",showText:function(t){return t.abstract}}].map((function(t){return Object(i.jsxs)("div",{className:"ana-tooltip-content-row",children:[Object(i.jsxs)("span",{className:"ana-tooltip-row-label",children:[t.label,":"]}),Object(i.jsx)("span",{className:"ana-tooltip-row-text",children:t.showText(a)})]},t.label)}))})]})}))),Bt=function(){var t=A();return Object(r.useEffect)((function(){t.setCurrentPage(),t.initPapers(),t.initUserId()}),[]),Object(i.jsxs)("div",{className:"analysis-container",children:[Object(i.jsx)(Mt,{}),Object(i.jsx)("div",{className:"left-container",children:Object(i.jsx)(Et,{})}),Object(i.jsxs)("div",{className:"middle-container",children:[Object(i.jsx)("div",{className:"middle-top-container",children:Object(i.jsx)(ft,{})}),Object(i.jsx)("div",{className:"middle-bottom-container",children:Object(i.jsx)(gt,{})})]}),Object(i.jsxs)("div",{className:"right-container",children:[Object(i.jsx)("div",{className:"right-top-container",children:Object(i.jsx)(jt,{})}),Object(i.jsx)("div",{className:"right-middle-bottom-container",children:Object(i.jsx)(It,{})})]}),Object(i.jsx)(Mt,{})]})},Ft=(n(142),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu","KaiChen Nie"]),Xt=n(152),Ut=n(150),zt=n(45),Wt=n(159),Rt=n(158),Kt=Xt.a.Option,Vt=Object(D.a)((function(){var t=A(),e=t.currentPage,n=t.userId,a=t.initPapers,c=Object(r.useState)(!1),o=Object(s.a)(c,2),l=o[0],u=o[1],h=function(){return u(!l)},d="Literature ".concat(e," System"),p="Analysis"===e?"management":"analysis",f="Analysis"===e?"Manage":"Analyze",g=function(){return Object(i.jsx)(L.b,{to:p,className:"switch-button",children:f})},j=Object(r.useState)(""),x=Object(s.a)(j,2),m=x[0],v=x[1],O=Object(r.useState)(""),y=Object(s.a)(O,2),P=y[0],C=y[1],T=Object(r.useState)(""),w=Object(s.a)(T,2),k=w[0],S=[{label:"Conference Name",setFunc:v},{label:"Public Tags",setFunc:C},{label:"Private Tags",setFunc:w[1]}],H=Object(r.useState)(""),N=Object(s.a)(H,2),_=N[0],Y=N[1],D={maxCount:1,beforeUpload:function(t){return Y(t),!1}};return Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("div",{className:"title",children:d}),Object(i.jsxs)("div",{className:"user-selector",children:["User: \xa0",Object(i.jsx)(Xt.a,{value:t.userId,size:"small",onChange:function(e){t.setUserId(e)},style:{width:130},placeholder:"Set User",children:Ft.map((function(t){return Object(i.jsx)(Kt,{value:t,children:t},t)}))}),Object(i.jsx)(g,{}),Object(i.jsx)("div",{className:"update-data-trigger",onClick:h,children:Object(i.jsx)(Wt.a,{style:{fontSize:24}})})]}),Object(i.jsxs)(tt.a,{title:"Upload",visible:l,onOk:function(){(function(t){var e=t.file,n=t.conferenceName,i=t.publicTags,r=t.privateTags,a=t.userId,c=new FormData;c.append("file",e),c.append("conferenceName",n),c.append("publicTags",i),c.append("privateTags",r),c.append("uid",a);var o=e.name.split(".").slice(-1)[0];return c.append("fileType",o),fetch(b+"add_papers",{body:c,method:"POST"}).then((function(t){return t.json()}))})({file:_,conferenceName:m,publicTags:P,privateTags:k,userId:n}).then((function(){a(!0)})),h()},onCancel:h,centered:!0,children:[S.map((function(t){return Object(i.jsxs)("div",{className:"update_item",children:[Object(i.jsx)("div",{className:"update-item-label",children:t.label}),Object(i.jsx)(et.a,{placeholder:"Empty means no batch setting",onChange:function(e){return t.setFunc(e.target.value)}})]},t.label)})),Object(i.jsx)(Ut.a,Object($.a)(Object($.a)({},D),{},{className:"update_item",children:Object(i.jsx)(zt.a,{icon:Object(i.jsx)(Rt.a,{}),children:"bib/json/csv"})}))]})]})})),Jt=function(){return Object(i.jsx)(_,{children:Object(i.jsx)(L.a,{children:Object(i.jsxs)("div",{className:"view-container",children:[Object(i.jsx)("div",{className:"header-container",children:Object(i.jsx)(Vt,{})}),Object(i.jsxs)(Y.c,{children:[Object(i.jsx)(Y.a,{exact:!0,path:"/management",component:ht}),Object(i.jsx)(Y.a,{exact:!0,path:"/analysis",component:Bt}),Object(i.jsx)(Y.a,{path:"/",component:ht})]})]})})})},qt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),r(t),a(t),c(t)}))};n(146);o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(Jt,{})}),document.getElementById("root")),qt()}},[[147,1,2]]]);
//# sourceMappingURL=main.255167bb.chunk.js.map