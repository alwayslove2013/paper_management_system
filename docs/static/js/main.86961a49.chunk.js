(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{172:function(t,e,n){},173:function(t,e,n){},174:function(t,e,n){},175:function(t,e,n){},177:function(t,e,n){},179:function(t,e,n){},181:function(t,e,n){"use strict";n.r(e);var i=n(3),a=n(0),c=n.n(a),r=n(27),s=n.n(r),o=(n(172),n(30)),l=n.n(o),u=n(110),d=(n(173),n(29)),h=n(37),j=function(){return{papers:[],unitBlockCount:{},maxUnitBlockPaperCount:0,doi2paperBlockPos:{},author2Count:{},authorCountList:[],countryCountList:[],doi2papers:{},setPapers:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CitationCount",i={},a={};t.forEach((function(t,n){"#"===t.DOI&&(t.DOI="tmp-".concat(n)),""===t.CitationCount&&(t.CitationCount=0),t.authors=t.AuthorNames.split(";").map((function(t){return t.trim()})),t.authors.forEach((function(t){t in i?i[t]+=1:i[t]=1})),t.Countries="#"===t.Countries?"":t.Countries,t.Countries="###"===t.Countries?"":t.Countries,t.countries=t.Countries.split(";").map((function(t){var e=t.trim().split(" ");return 0===e.length?"":e[e.length-1].trim()})).filter((function(t){return t})),t.countries.forEach((function(t){t in a?a[t]+=1:a[t]=1})),t.privateTags=[],t.publicTags=[],e.doi2papers[t.DOI]=t})),this.author2Count=i;var c=[];for(var r in i)c.push({value:r,count:i[r]});c.sort((function(t,e){return e.count-t.count}));var s=[];for(var o in a)s.push({value:o,count:a[o]});s.sort((function(t,e){return e.count-t.count})),this.authorCountList=c,this.countryCountList=s,t.sort((function(t,e){return e[n]-t[n]})),this.papers=t;var l={},u=0;this.papers.forEach((function(t){var n=t.DOI,i=t[e.unitXAttr],a=t[e.unitYAttr];i in l||(l[i]={}),a in l[i]||(l[i][a]=0),e.doi2paperBlockPos[n]=l[i][a],l[i][a]+=1,u<l[i][a]&&(u=l[i][a])})),this.maxUnitBlockPaperCount=.6*u,this.unitBlockCount=l},setPaper:function(t,e,n){this.doi2papers[t][e]=n},get paperCount(){return this.papers.length},unitXAttr:"Year",setUnitXAttr:function(t){this.unitXAttr=t},get unitXAttrList(){var t=this,e=new Set;this.papers.forEach((function(n){e.add(n[t.unitXAttr])}));var n=Array.from(e);return n.sort((function(t,e){return e-t})),n},unitYAttr:"Conference",setUnitYAttr:function(t){this.unitYAttr=t},get unitYAttrList(){return["SciVis","InfoVis","VAST","PacificVis"]},userId:"",setUserId:function(t){this.userId=t},get controlTagNameList(){return[{label:"Country",value:"countries",list:this.countryCountList.slice(0,6).map((function(t){return t.value})).concat(["Japan","Korea"])},{label:"Author",value:"authors",list:this.authorCountList.slice(0,8).map((function(t){return t.value}))},{label:"Private Tag",value:"privateTags",list:["Read","literature","influence"]},{label:"Public Tag",value:"publicTags",list:["Classic","China","Japan","Korea"]}]},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[]},tag2color:{},colorUse:{},setTagColor:function(t,e){if(t in this.tag2color)this.colorUse[this.tag2color[t]]=!1,delete this.tag2color[t],this.activeTags[e]=Object(d.a)(this.activeTags[e]).filter((function(e){return e!==t}));else{this.activeTags[e]?this.activeTags[e].push(t):this.activeTags[e]=[t];for(var n=0,i=h.d[n];this.colorUse[i];){if(10===(n+=1)){i="black";break}i=h.d[n]}this.tag2color[t]=i,this.colorUse[i]=!0}},get controlIsActive(){var t=!1;for(var e in this.activeTags)this.activeTags[e].length>0&&(t=!0);return t},get doi2colors(){var t=this,e={};return this.papers.forEach((function(n){var i=function(i){t.activeTags[i].forEach((function(a){n[i].indexOf(a)>-1&&(n.DOI in e&&Array.isArray(e[n.DOI])?e[n.DOI].push(t.tag2color[a]):e[n.DOI]=[t.tag2color[a]])}))};for(var a in t.activeTags)i(a)})),e},doi2privateTags:{},doi2publicTags:{},doi2comments:{},maxCitationCount:200,currentSelected:"",setCurrentSelected:function(t){this.currentSelected=t},get currentSelectedPaper(){return this.doi2papers[this.currentSelected]}}},f=n(183),b=c.a.createContext(null),g=function(t){var e=t.children,n=Object(f.a)(j);return Object(i.jsx)(b.Provider,{value:n,children:e})},v=function(){var t=c.a.useContext(b);if(!t)throw new Error("no Provider");return t},p=n(25),O=(n(174),n(187)),x=Object(O.a)((function(){var t=v().controlTagNameList;return Object(i.jsx)("div",{className:"control-view",children:t.map((function(t){return Object(i.jsx)(m,{tagData:t},t.label)}))})})),m=Object(O.a)((function(t){var e=t.tagData,n=v(),c=n.tag2color,r=Object(a.useState)([]),s=Object(p.a)(r,2),o=s[0],l=s[1],u=function(t){var i=Object(d.a)(o),a=i.indexOf(t);a>-1?(i.splice(a,1),n.setTagColor(t,e.value),l(i)):(i.push(t),n.setTagColor(t,e.value),l(i))};return Object(i.jsxs)("div",{className:"control-item",children:[Object(i.jsx)("div",{className:"control-item-title",children:e.label}),Object(i.jsx)("div",{className:"control-item-options",children:e.list.map((function(t){return Object(i.jsx)(C,{value:t,clickOption:u,isSelect:o.indexOf(t)>-1&&c[t]},t)}))})]})})),C=function(t){var e=t.value,n=t.clickOption,a=t.isSelect,c=["control-item-option",a&&"option-active"].filter((function(t){return t})).join(" "),r=a?{background:a,border:"1px solid ".concat(a)}:{};return Object(i.jsx)("div",{className:c,onClick:function(){return n(e)},style:r,children:e})},T=(n(175),c.a.memo((function(t){var e=t.cx,n=t.cy,a=t.r,c=t.colors,r=t.opacity,s=t.doi,o=t.handleClick,l=t.isSelect,u=t.title,d=2*Math.PI/c.length,h=function(t){return e+Math.sin(t)*a},j=function(t){return n+Math.cos(t)*a},f=c.map((function(t,e){return{startX:h(d*e),startY:j(d*e),endX:h(d*(e+1)),endY:j(d*(e+1))}})),b=l?1:0;return Object(i.jsxs)("g",{id:"unit-g",onClick:function(){return o(s)},cursor:"pointer",children:[Object(i.jsx)("title",{children:u}),Object(i.jsx)("g",{id:"unit-border-g",children:Object(i.jsx)("circle",{cx:e,cy:n,r:1.4*a,fill:"none",stroke:"red",strokeWidth:.6*a,opacity:b})}),Object(i.jsx)("g",{id:"unit-sector-g",opacity:r,children:f.length>1?f.map((function(t,r){return Object(i.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(a," ").concat(a," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),stroke:"white",fill:c[r],strokeWidth:.1*a},r)})):Object(i.jsx)("circle",{cx:e,cy:n,r:a,fill:c[0]})})]})}))),y=n(26),k=n(28),N=Object(O.a)((function(){var t=v(),e=t.papers,n=t.unitXAttr,c=t.unitYAttr,r=t.unitXAttrList,s=t.unitYAttrList,o=t.unitBlockCount,l=t.maxUnitBlockPaperCount,u=t.doi2paperBlockPos,j=(t.doi2privateTags,t.doi2publicTags,t.doi2comments,t.doi2colors),f=t.controlIsActive,b=t.currentSelected,g=t.setCurrentSelected,O=Object(a.useState)(0),x=Object(p.a)(O,2),m=x[0],C=x[1],N=Object(a.useState)(0),S=Object(p.a)(N,2),I=S[0],A=S[1];Object(a.useEffect)((function(){var t=document.querySelector("#unit-svg");C(t.clientWidth-Y.left-Y.right),A(t.clientHeight-Y.top-Y.bottom)}),[]);for(var P,Y={top:.02*m,left:40,right:15,bottom:1},L=2,B=3,X=3,w=1,D=r.length>0?m/r.length-B-X:0,M=s.length>0?I/s.length-L-w:0,E=Math.floor(D>0?M/D:1),U=Math.ceil(Math.sqrt(l/E)),z=r.map((function(t,e){var n=Math.max.apply(Math,Object(d.a)(s.map((function(e,n){return Object(k.get)(o,[t,e],0)})))),i=Math.ceil(Math.sqrt(l/E));return n>l&&(i+=1),i})),J=[0],F=[0],W=1;W<r.length;W++)J.push(J[W-1]+z[W-1]);P=(m-(B+X)*r.length)/(J[J.length-1]+z[z.length-1]);for(var H=1;H<r.length;H++)F.push(J[H]*P+(B+X)*H);var R=h.c().domain([0,100]).range([.25,.8]),V=e.map((function(t){var e={};e.oriData=Object(y.d)(t),e.BlockIndexX=r.indexOf(t[n]),e.BlockIndexY=s.indexOf(t[c]);var i,a=t.DOI;return e.doi=a,e.circleIndexX=u[a]%z[e.BlockIndexX],e.circleIndexY=Math.floor(u[a]/z[e.BlockIndexX]),e.cx=Y.left+e.BlockIndexX*(D+B+X)+(e.circleIndexX+.5)*P,e.cy=Y.top+e.BlockIndexY*(M+L+w)+(e.circleIndexY+.5)*P,e.cx=Y.left+F[e.BlockIndexX]+(e.circleIndexX+.5)*P,e.citationGrey=(i=t.CitationCount,h.b(R(i))),e.activeColors=Object(k.get)(j,a,[]),e.colors=e.activeColors.length>0?e.activeColors:[e.citationGrey],e.opacity=f?e.activeColors.length>0?.8:.4:.8,e.title=t.Title,e})),_=r.map((function(t,e){return{value:t,x:Y.left+F[e]+z[e]*P/2,y:.8*Y.top}})),q=s.map((function(t,e){var n=Y.top+(M+L+w)*e;return{value:t,x:.35*Y.left,y:n}})),G=function(t){console.log("click",t),g(t)};return Object(i.jsx)("div",{className:"unit-view",children:Object(i.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",children:[Object(i.jsx)("g",{id:"units",children:V.map((function(t,e){return Object(i.jsx)(T,{cx:t.cx,cy:t.cy,r:P/2.4,doi:t.doi,colors:t.colors,opacity:t.opacity,handleClick:G,isSelect:b===t.doi,title:t.title},e)}))}),Object(i.jsx)("g",{id:"x-label",children:_.map((function(t){return Object(i.jsx)("text",{x:t.x,y:t.y,textAnchor:"middle",fontSize:1.6*P,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))}),Object(i.jsx)("g",{id:"y-label",children:q.map((function(t){return Object(i.jsx)("text",{transform:"translate(".concat(t.x,", ").concat(t.y,") rotate(90)"),fontSize:1.6*P,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))})]})})})),S=(n(177),n(190)),I=n(124),A=n(66),P=n(184),Y=n(188),L=n(189),B=Object(O.a)((function(){var t=v(),e=t.currentSelectedPaper,n=t.setPaper,a=e;console.log("currentSelectedPaper",e);var c=Object(k.get)(a,"DOI",""),r=[{title:"Public Tags",value:"publicTags",initTags:Object(k.get)(a,"publicTags",[])},{title:"Private Tags",value:"privateTags",initTags:Object(k.get)(a,"privateTags",[])}];return Object(i.jsx)("div",{className:"detail-view",children:a&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"detail-title",children:a.Title}),Object(i.jsxs)("div",{className:"detail-authors",children:[Object(k.get)(a,"authors",[]).join("; ")," (",a.Year,")"]}),Object(i.jsxs)("div",{className:"detail-edit-tags",children:[Object(i.jsxs)("div",{className:"detail-edit-read",children:[Object(i.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(i.jsx)(S.a,{size:"small",checkedChildren:Object(i.jsx)(I.a,{}),unCheckedChildren:Object(i.jsx)(A.a,{}),defaultChecked:Object(k.get)(a,"read",!1),onChange:function(t){n(c,"read",t)}})]}),r.map((function(t){return Object(i.jsx)(w,{title:t.title,initTags:t.initTags,handleChangeTags:function(e){return function(t,e){return c&&n(c,t,e)}(t.value,e)}},t.value)}))]}),Object(i.jsxs)("div",{className:"detail-attrs",children:[Object(i.jsx)(X,{paper:a,label:"AuthorKeywords"}),Object(i.jsx)(X,{paper:a,label:"DOI"}),Object(i.jsx)(X,{paper:a,label:"AuthorAffiliation"}),Object(i.jsx)(X,{paper:a,label:"Abstract"})]})]})},c)})),X=function(t){var e=t.paper,n=t.label;return Object(i.jsxs)("div",{className:"detail-attr",children:[Object(i.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(i.jsx)("div",{className:"detail-content",children:Object(k.get)(e,n,"")})]})},w=function(t){var e=t.title,n=t.initTags,c=t.handleChangeTags,r=Object(a.useState)(n),s=Object(p.a)(r,2),o=s[0],l=s[1],u=function(t){c(t),l(t)},h=Object(a.useState)(-1),j=Object(p.a)(h,2),f=j[0],b=j[1],g=Object(a.useState)(),v=Object(p.a)(g,2),O=(v[0],v[1]),x=function(t){return O(t)},m=Object(a.useRef)(),C=Object(a.useState)(""),T=Object(p.a)(C,2),y=T[0],k=T[1],N=function(){var t=Object(d.a)(o);t[f]=y,u(t),b(-1),k("")},S=Object(a.useState)(""),I=Object(p.a)(S,2),A=I[0],B=I[1],X=function(){A&&o.indexOf(A)<0&&(u([].concat(Object(d.a)(o),[A])),E(!1),B(""))},w=Object(a.useState)(!1),D=Object(p.a)(w,2),M=D[0],E=D[1];return Object(i.jsxs)("div",{className:"detail-edit-tag",children:[Object(i.jsxs)("div",{className:"detail-edit-title",children:[e,":"]}),Object(i.jsx)("div",{className:"detail-edit-tags",children:Object(i.jsxs)(i.Fragment,{children:[o.map((function(t,e){return f===e?Object(i.jsx)(P.a,{ref:x,size:"small",className:"tag-input",value:y,onchange:function(t){return k(t.target.value)},onBlur:N,onPressEnter:N},t):Object(i.jsx)(Y.a,{className:"edit-tag",closable:!0,onClose:function(){return e=t,void u(o.filter((function(t){return t!=e})));var e},children:Object(i.jsx)("span",{children:t})},t)})),M&&Object(i.jsx)(P.a,{ref:m,type:"text",size:"small",className:"tag-input",value:A,onChange:function(t){return B(t.target.value)},onBlur:X,onPressEnter:X}),!M&&Object(i.jsxs)(Y.a,{className:"site-tag-plus",onClick:function(){E(!0)},children:[Object(i.jsx)(L.a,{})," New Tag"]})]})})]})},D=(n(179),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu"]),M=n(186),E=M.a.Option,U=function(){var t=v();return Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("div",{className:"title",children:"Paper Management System"}),Object(i.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(i.jsx)(M.a,{size:"small",onChange:function(e){t.setUserId(e)},style:{width:130},placeholder:"Set User",children:D.map((function(t){return Object(i.jsx)(E,{value:t,children:t},t)}))})]})]})};var z=function(){return Object(i.jsx)(g,{children:Object(i.jsx)(J,{})})},J=function(){var t=v();return Object(a.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a("data.csv");case 2:n=e.sent,t.setPapers(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(i.jsxs)("div",{className:"view-container",children:[Object(i.jsx)("div",{className:"header-container",children:Object(i.jsx)(U,{})}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsxs)("div",{className:"control-main-container",children:[Object(i.jsx)("div",{className:"control-view-container",children:Object(i.jsx)(x,{})}),Object(i.jsx)("div",{className:"unit-view-container",children:Object(i.jsx)(N,{})})]}),Object(i.jsx)("div",{className:"detail-view-container",children:Object(i.jsx)(B,{})})]})]})},F=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,191)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),i(t),a(t),c(t),r(t)}))};n(180);s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(z,{})}),document.getElementById("root")),F()}},[[181,1,2]]]);
//# sourceMappingURL=main.86961a49.chunk.js.map