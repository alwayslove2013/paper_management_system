(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{175:function(t,e,n){},176:function(t,e,n){},179:function(t,e,n){},180:function(t,e,n){},182:function(t,e,n){},184:function(t,e,n){},186:function(t,e,n){"use strict";n.r(e);var r=n(3),i=n(0),a=n.n(i),c=n(28),o=n.n(c),s=(n(175),n(14)),u=n.n(s),l=n(30),d=(n(176),n(26)),h=n(38),f=n(20),j=n(113),p=n.n(j),b="http://vis.pku.edu.cn/vis4vis/",v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b+t+(t.includes("?")?"&":"?")+p.a.stringify(e);return new Promise((function(t,e){fetch(n).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},g=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("get_public_tags");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,t.next=3,v("get_private_tags",{uid:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(t){var e=t.uid,n=t.pid,r=t.paper,i=r.privateTags,a=r.read;return e&&v("set_private_tags",{uid:e,pid:n,tags:[].concat(Object(d.a)(i),[a&&"read"]).filter((function(t){return t})).join(",")}),"OK"},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};t.forEach((function(t){t.forEach((function(t){t&&(t in n?n[t]+=1:n[t]=1)}))}));var r=[];for(var i in n)r.push({item:i,count:n[i]});return r.sort((function(t,e){return e.count-t.count})),r.slice(0,e).map((function(t){return t.item}))},C={publicTags:function(t){var e=t.pid,n=t.paper.publicTags;return v("set_public_tags",{pid:e,tags:n.join(",")}),"OK"},privateTags:m,read:m},T=function(){return{papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],setPapers:function(t){var e=arguments,n=this;return Object(l.a)(u.a.mark((function r(){var i,a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:"citationCount",console.log("==> \u521d\u59cb\u5316Papers"),a={},t.forEach((function(t){t.privateTags=[],t.read=!1,t.publicTags=[],t.colors=[],t.internalRefList=[],t.internalCitedList=[],t.refList=t.refList.split(";").map((function(t){return t.trim()})),a[t.doi]=t,t.authors=t.authors.split(";").map((function(t){return t.trim().replace(/\{(.*)\}/,"$1")})),t.countries=t.countries.split(";").map((function(t){var e=t.trim().split(" ");return 0===e.length?"":e[e.length-1].trim()})).filter((function(t){return t}))})),t.forEach((function(t){t.refList.forEach((function(e){e in a&&(a[e].internalCitedList.push(t.doi),t.internalRefList.push(e))}))})),n.commonAuthors=x(t.map((function(t){return t.authors}))),n.commonCountries=x(t.map((function(t){return t.countries}))),t.sort((function(t,e){return e[i]-t[i]})),n.computedPosition(t),r.next=11,n.initPublicTags(t);case 11:Object(f.d)((function(){n.papers=t}));case 12:case"end":return r.stop()}}),r)})))()},setPaper:function(t,e,n){var r=this.papers.find((function(e){return e.doi===t}));r[e]=n,console.log("==> \u66f4\u65b0paper\u6570\u636e by doi:",t,e,n),C[e]({uid:this.userId,pid:t,paper:Object(f.e)(r)}),this.doiUpdateColors(t)},unitXAttr:"year",get unitXAttrList(){var t=this,e=new Set;this.papers.forEach((function(n){e.add(n[t.unitXAttr])}));var n=Array.from(e);return n.sort((function(t,e){return e-t})),n},unitYAttr:"conferenceName",get unitYAttrList(){return["SciVis","InfoVis","EuroVis","VAST","PacificVis"]},maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(t){var e=this,n={};t.forEach((function(t){var r=t[e.unitXAttr],i=t[e.unitYAttr];r in n||(n[r]={}),i in n[r]||(n[r][i]=0),t.unitIndex=n[r][i],n[r][i]+=1})),this.maxUnitBlockPaperCount=.6*Math.max.apply(Math,Object(d.a)(t.map((function(t){return t.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(t){var e=this;return Object(l.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g();case 2:r=n.sent,t.forEach((function(t){t.doi in r&&(t.publicTags=r[t.doi].filter((function(t){return t})))})),Object(f.d)((function(){e.commonPublicTags=x(Object.values(r))}));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var t=this;return Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({uid:t.userId});case 2:n=e.sent,Object(f.d)((function(){t.papers.forEach((function(t){if(t.doi in n){var e=n[t.doi].indexOf("read");e>-1&&(t.read=!0,n[t.doi].splice(e,1)),t.privateTags=n[t.doi].filter((function(t){return t}))}})),t.commonPrivateTags=x(Object.values(n))})),t.batchUpdateColors();case 5:case"end":return e.stop()}}),e)})))()},userId:"",setUserId:function(t){t!==this.userId&&(this.userId=t,console.log("==> change userId:",this.userId),localStorage.setItem("paper-management-system-userId",t),t&&this.initPrivateTags())},initUserId:function(){var t=localStorage.getItem("paper-management-system-userId");t&&this.setUserId(t)},get controlTagNameList(){return[{label:"Country",value:"countries",list:this.commonCountries.slice(0,8).concat(["Japan","Korea"])},{label:"Author",value:"authors",list:this.commonAuthors},{label:"Private Tag",value:"privateTags",list:this.commonPrivateTags},{label:"Public Tag",value:"publicTags",list:this.commonPublicTags}]},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[]},get controlIsActive(){var t=!1;for(var e in this.activeTags)this.activeTags[e].length>0&&(t=!0);return t},tag2color:{},colorUse:{},setTagColor:function(t,e){console.log("==> \u8bbe\u7f6etag\u989c\u8272:",e,t);var n="".concat(e,"---").concat(t);if(n in this.tag2color)this.colorUse[this.tag2color[n]]=!1,delete this.tag2color[n],this.activeTags[e]=Object(d.a)(this.activeTags[e]).filter((function(e){return e!==t}));else{this.activeTags[e].push(t);for(var r=0,i=h.d[r];this.colorUse[i];){if(10===(r+=1)){i="black";break}i=h.d[r]}this.tag2color[n]=i,this.colorUse[i]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var t=this;this.papers.forEach((function(e){e.colors=[],t.updateColor(e)}))},doiUpdateColors:function(t){var e=this.papers.find((function(e){return e.doi===t}));e.colors=[],this.updateColor(e)},updateColor:function(t){var e=this;this.activeTags.privateTags.indexOf("read")>-1&&t.read&&t.colors.push(this.tag2color["privateTags---read"]);var n=function(n){e.activeTags[n].forEach((function(r){if(t[n].indexOf(r)>-1){var i="".concat(n,"---").concat(r);t.colors.push(e.tag2color[i])}}))};for(var r in this.activeTags)n(r)},maxCitationCount:200,currentSelected:"",currentSelectedRefSet:new Set,currentSelectedCitedSet:new Set,isSelected:!1,setCurrentSelected:function(t){console.log("==> \u9009\u4e2d\u6587\u7ae0:",t),this.currentSelected=t,this.isSelected=!!t;var e=this.papers.find((function(e){return e.doi===t}));this.currentSelectedRefSet=new Set(e.internalRefList),this.currentSelectedCitedSet=new Set(e.internalCitedList)},cancelSelect:function(){console.log("==> \u70b9\u51fb\u80cc\u666f\uff0c\u53d6\u6d88\u8bba\u6587\u9009\u4e2d\u72b6\u6001"),this.isSelected=!1},get currentSelectedPaper(){var t=this;return this.papers.find((function(e){return e.doi===t.currentSelected}))}}},S=n(188),y=a.a.createContext(null),k=function(t){var e=t.children,n=Object(S.a)(T);return Object(r.jsx)(y.Provider,{value:n,children:e})},I=function(){var t=a.a.useContext(y);if(!t)throw new Error("no Provider");return t},P=n(29),N=(n(179),n(192)),w=Object(N.a)((function(){var t=I().controlTagNameList;return Object(r.jsx)("div",{className:"control-view",children:t.map((function(t){return Object(r.jsx)(L,{tagData:t},t.label)}))})})),L=Object(N.a)((function(t){var e=t.tagData,n=I(),a=n.tag2color,c=Object(i.useState)([]),o=Object(P.a)(c,2),s=o[0],u=o[1],l=function(t){var r=Object(d.a)(s),i=r.indexOf(t);i>-1?(r.splice(i,1),n.setTagColor(t,e.value),u(r)):(r.push(t),n.setTagColor(t,e.value),u(r))};return Object(r.jsxs)("div",{className:"control-item",children:[Object(r.jsx)("div",{className:"control-item-title",children:e.label}),Object(r.jsx)("div",{className:"control-item-options",children:e.list.map((function(t){return Object(r.jsx)(A,{value:t,clickOption:l,isSelect:s.indexOf(t)>-1&&a["".concat(e.value,"---").concat(t)]},t)}))})]})})),A=function(t){var e=t.value,n=t.clickOption,i=t.isSelect,a=["control-item-option",i&&"option-active"].filter((function(t){return t})).join(" "),c=i?{background:i,border:"1px solid ".concat(i)}:{};return Object(r.jsx)("div",{className:a,onClick:function(){return n(e)},style:c,children:e})},Y=(n(180),a.a.memo((function(t){var e=t.cx,n=t.cy,i=t.r,a=t.colors,c=t.opacity,o=t.doi,s=t.handleClick,u=t.borderColor,l=t.borderOpacity,d=t.title,h=2*Math.PI/a.length,f=function(t){return e+Math.sin(t)*i},j=function(t){return n+Math.cos(t)*i},p=a.map((function(t,e){return{startX:f(h*e),startY:j(h*e),endX:f(h*(e+1)),endY:j(h*(e+1))}}));return Object(r.jsxs)("g",{id:"unit-g",onClick:function(t){return s(t,o)},cursor:"pointer",children:[Object(r.jsx)("title",{children:d}),Object(r.jsx)("g",{id:"unit-border-g",children:Object(r.jsx)("circle",{cx:e,cy:n,r:1.4*i,fill:"none",stroke:u,strokeWidth:.6*i,opacity:l})}),Object(r.jsx)("g",{id:"unit-sector-g",opacity:c,children:p.length>1?p.map((function(t,c){return Object(r.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(i," ").concat(i," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),stroke:"white",fill:a[c],strokeWidth:.1*i},c)})):Object(r.jsx)("circle",{cx:e,cy:n,r:i,fill:a[0]})})]})}))),U=n(32),E=30,X=40,B=15,M=1,_=2,R=3,z=3,D=1,F=Object(N.a)((function(){var t=I(),e=t.papers,n=t.unitXAttr,a=t.unitYAttr,c=t.unitXAttrList,o=t.unitYAttrList,s=t.unitBlockCount,u=t.maxUnitBlockPaperCount,l=t.controlIsActive,j=t.currentSelected,p=t.setCurrentSelected,b=t.isSelected,v=t.cancelSelect,g=t.currentSelectedRefSet,O=t.currentSelectedCitedSet,m=Object(i.useState)(0),x=Object(P.a)(m,2),C=x[0],T=x[1],S=Object(i.useState)(0),y=Object(P.a)(S,2),k=y[0],N=y[1];Object(i.useEffect)((function(){var t=document.querySelector("#unit-svg");T(t.clientWidth-X-B),N(t.clientHeight-E-M)}),[]);for(var w,L=c.length>0?C/c.length-R-z:0,A=o.length>0?k/o.length-_-D:0,F=Math.floor(L>0?A/L:1),J=Math.ceil(Math.sqrt(u/F)),W=c.map((function(t,e){var n=Math.max.apply(Math,Object(d.a)(o.map((function(e,n){return Object(U.get)(s,[t,e],0)})))),r=Math.ceil(Math.sqrt(u/F));return n>u&&(r+=1),r})),V=[0],H=[0],K=1;K<c.length;K++)V.push(V[K-1]+W[K-1]);w=(C-(R+z)*c.length)/(V[V.length-1]+W[W.length-1]);for(var q=1;q<c.length;q++)H.push(V[q]*w+(R+z)*q);var G=h.c().domain([0,100]).range([.25,.8]),Z=e.map((function(t){var e={};e.oriData=Object(f.e)(t),e.BlockIndexX=c.indexOf(t[n]),e.BlockIndexY=o.indexOf(t[a]);var r,i=t.doi;return e.doi=i,e.circleIndexX=t.unitIndex%W[e.BlockIndexX],e.circleIndexY=Math.floor(t.unitIndex/W[e.BlockIndexX]),e.cx=X+e.BlockIndexX*(L+R+z)+(e.circleIndexX+.5)*w,e.cy=E+e.BlockIndexY*(A+_+D)+(e.circleIndexY+.5)*w,e.cx=X+H[e.BlockIndexX]+(e.circleIndexX+.5)*w,e.citationGrey=(r=t.citationCount,h.b(G(r))),e.activeColors=t.colors,e.colors=e.activeColors.length>0?e.activeColors:[e.citationGrey],e.opacity=l?e.activeColors.length>0?.8:.4:.8,e.title=t.Title,b?(j===t.doi&&(e.borderColor="red"),g.has(t.doi)&&(e.borderColor="brown"),O.has(t.doi)&&(e.borderColor="orange")):(e.borderOpacity=0,e.borderColor="red"),e})),$=c.map((function(t,e){return{value:t,x:X+H[e]+W[e]*w/2,y:.8*E}})),Q=o.map((function(t,e){return{value:t,x:.35*X,y:E+(A+_+D)*e}})),tt=function(t,e){t.stopPropagation(),p(e)};return Object(r.jsx)("div",{className:"unit-view",children:Object(r.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",onClick:function(){v()},children:[Object(r.jsx)("g",{id:"units",children:w>0&&Z.map((function(t,e){return Object(r.jsx)(Y,{cx:t.cx,cy:t.cy,r:w/2.4,doi:t.doi,colors:t.colors,opacity:t.opacity,handleClick:tt,borderOpacity:t.borderOpacity,borderColor:t.borderColor,title:t.title},e)}))}),Object(r.jsx)("g",{id:"x-label",children:w>0&&$.map((function(t){return Object(r.jsx)("text",{x:t.x,y:t.y,textAnchor:"middle",fontSize:1.6*w,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))}),Object(r.jsx)("g",{id:"y-label",children:w>0&&Q.map((function(t){return Object(r.jsx)("text",{transform:"translate(".concat(t.x,", ").concat(t.y,") rotate(90)"),fontSize:1.6*w,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))})]})})})),J=(n(182),n(195)),W=n(127),V=n(68),H=n(189),K=n(193),q=n(194),G=Object(N.a)((function(){var t=I(),e=t.currentSelectedPaper,n=t.setPaper,i=e;if(console.log("currentSelectedPaper",Object(f.e)(e)),!e)return Object(r.jsx)("div",{});var a=Object(U.get)(i,"doi",""),c=[{title:"Private Tags",value:"privateTags",initTags:Object(U.get)(i,"privateTags",[])},{title:"Public Tags",value:"publicTags",initTags:Object(U.get)(i,"publicTags",[])}];return Object(r.jsx)("div",{className:"detail-view",children:i&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"detail-title",children:i.title}),Object(r.jsxs)("div",{className:"detail-authors",children:[Object(U.get)(i,"authors",[]).join("; ")," (",i.year,")"]}),Object(r.jsxs)("div",{className:"detail-edit-tags",children:[Object(r.jsxs)("div",{className:"detail-edit-read",children:[Object(r.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(r.jsx)(J.a,{size:"small",checkedChildren:Object(r.jsx)(W.a,{}),unCheckedChildren:Object(r.jsx)(V.a,{}),defaultChecked:Object(U.get)(i,"read",!1),onChange:function(t){n(a,"read",t)}})]}),c.map((function(t){return Object(r.jsx)($,{title:t.title,initTags:t.initTags,handleChangeTags:function(e){return function(t,e){a&&n(a,t,e)}(t.value,e)}},t.value)}))]}),Object(r.jsxs)("div",{className:"detail-attrs",children:[Object(r.jsx)(Z,{paper:i,label:"keywords"}),Object(r.jsx)(Z,{paper:i,label:"doi"}),Object(r.jsx)(Z,{paper:i,label:"affiliation"}),Object(r.jsx)(Z,{paper:i,label:"abstract"})]})]})},a)})),Z=function(t){var e=t.paper,n=t.label;return Object(r.jsxs)("div",{className:"detail-attr",children:[Object(r.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(r.jsx)("div",{className:"detail-content",children:Object(U.get)(e,n,"")})]})},$=function(t){var e=t.title,n=t.initTags,a=t.handleChangeTags,c=Object(i.useState)(n),o=Object(P.a)(c,2),s=o[0],u=o[1],l=function(t){a(t),u(t)},h=Object(i.useState)(-1),f=Object(P.a)(h,2),j=f[0],p=f[1],b=Object(i.useRef)(),v=Object(i.useState)(""),g=Object(P.a)(v,2),O=g[0],m=g[1],x=function(){var t=Object(d.a)(s);t[j]=O,l(t),p(-1),m("")},C=Object(i.useState)(""),T=Object(P.a)(C,2),S=T[0],y=T[1],k=function(){S&&s.indexOf(S)<0&&(l([].concat(Object(d.a)(s),[S])),L(!1),y(""))},I=Object(i.useState)(!1),N=Object(P.a)(I,2),w=N[0],L=N[1];return Object(r.jsxs)("div",{className:"detail-edit-tag",children:[Object(r.jsxs)("div",{className:"detail-edit-title",children:[e,":"]}),Object(r.jsx)("div",{className:"detail-edit-tags",children:Object(r.jsxs)(r.Fragment,{children:[s.map((function(t,e){return j===e?Object(r.jsx)(H.a,{size:"small",className:"tag-input",value:O,onchange:function(t){return m(t.target.value)},onBlur:x,onPressEnter:x},t):Object(r.jsx)(K.a,{className:"edit-tag",closable:!0,onClose:function(){return e=t,void l(s.filter((function(t){return t!==e})));var e},children:Object(r.jsx)("span",{children:t})},t)})),w&&Object(r.jsx)(H.a,{ref:b,type:"text",size:"small",className:"tag-input",value:S,onChange:function(t){return y(t.target.value)},onBlur:k,onPressEnter:k}),!w&&Object(r.jsxs)(K.a,{className:"site-tag-plus",onClick:function(){L(!0)},children:[Object(r.jsx)(q.a,{})," New Tag"]})]})})]})},Q=(n(184),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu","KaiChen Nie"]),tt=n(191),et=tt.a.Option,nt=Object(N.a)((function(){var t=I();return Object(r.jsxs)("div",{className:"header",children:[Object(r.jsx)("div",{className:"title",children:"Paper Management System"}),Object(r.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(r.jsx)(tt.a,{value:t.userId,size:"small",onChange:function(e){t.setUserId(e)},style:{width:130},placeholder:"Set User",children:Q.map((function(t){return Object(r.jsx)(et,{value:t,children:t},t)}))})]})]})}));var rt=function(){return Object(r.jsx)(k,{children:Object(r.jsx)(it,{})})},it=function(){var t=I();return Object(i.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a("all_papers_data_0206.csv");case 2:return n=e.sent,e.next=5,t.setPapers(n);case 5:t.initUserId();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(r.jsxs)("div",{className:"view-container",children:[Object(r.jsx)("div",{className:"header-container",children:Object(r.jsx)(nt,{})}),Object(r.jsxs)("div",{className:"main-container",children:[Object(r.jsxs)("div",{className:"control-main-container",children:[Object(r.jsx)("div",{className:"control-view-container",children:Object(r.jsx)(w,{})}),Object(r.jsx)("div",{className:"unit-view-container",children:Object(r.jsx)(F,{})})]}),Object(r.jsx)("div",{className:"detail-view-container",children:Object(r.jsx)(G,{})})]})]})},at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,196)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),r(t),i(t),a(t),c(t)}))};n(185);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(rt,{})}),document.getElementById("root")),at()}},[[186,1,2]]]);
//# sourceMappingURL=main.fbb98d4e.chunk.js.map