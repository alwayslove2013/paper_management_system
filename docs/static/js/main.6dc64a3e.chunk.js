(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{231:function(e,t,n){},232:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),r=n.n(i),c=n(29),s=n.n(c),o=(n(231),n(232),n(21)),l=n(28),u=n(19),h=n.n(u),d=n(41),g=n(15),j=n(25),f=n(130),p=n.n(f),b="http://vis.pku.edu.cn/vis4vis/",v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b+e+(e.includes("?")?"&":"?")+p.a.stringify(t);return new Promise((function(e,t){fetch(n).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},m=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("get_papers");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("get_public_tags");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,e.next=3,v("get_private_tags",{uid:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=e.uid,n=e.pid,a=e.paper,i=a.privateTags,r=a.read;return t&&v("set_private_tags",{uid:t,pid:n,tags:[].concat(Object(l.a)(i),[r&&"read"]).filter((function(e){return e})).join(",")}),"OK"},y=n(26),T=15,N=35,w=8,P=25,S=function(e,t,n){return e=e.slice(0,n),t.forEach((function(n){if(!e.includes(n)){for(var a=e.length-1;t.includes(e[a]);)a-=1;e[a]=n}})),e},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};e.forEach((function(e){e.forEach((function(e){e&&(e in n?n[e]+=1:n[e]=1)}))}));var a=[];for(var i in n)a.push({item:i,count:n[i]});return a.sort((function(e,t){return t.count-e.count})),a.slice(0,t).map((function(e){return e.item}))},A={publicTags:function(e){var t=e.pid,n=e.paper.publicTags;return v("set_public_tags",{pid:t,tags:n.join(",")}),"OK"},privateTags:C,read:C},I=function(){return{currentPage:"Management",setCurrentPage:function(){this.currentPage=window.location.hash.includes("/analysis")?"Analysis":"Management"},tooltipX:500,tooltipY:500,setTooltipPos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.tooltipX=e,this.tooltipY=t},titleSearch:"",setTitleSearch:function(e){this.titleSearch=e.toLocaleLowerCase()},get searchPaperDoiSet(){var e=this,t=this.titleSearch?this.papers.filter((function(t){return t.title.toLocaleLowerCase().indexOf(e.titleSearch)>-1})).map((function(e){return e.doi})):[];return new Set(t)},papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],initPapers:function(){var e=this;return Object(d.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.papers.length){t.next=5;break}return t.next=3,m();case 3:n=t.sent,e.setPapers(n);case 5:case"end":return t.stop()}}),t)})))()},setPapers:function(e){var t=arguments,n=this;return Object(d.a)(h.a.mark((function a(){var i,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:"citationCount",console.log("==> \u521d\u59cb\u5316Papers"),r={},e.forEach((function(e){e.privateTags=[],e.read=!1,e.publicTags=[],e.colors=[],e.innerColors=[],e.outerColors=[],e.internalRefList=[],e.internalCitedList=[],e.refList=e.refList.toLowerCase().split(/[,;]/).map((function(e){return e.trim()})),r[e.doi]=e,e.authors=e.authors.split(";").map((function(e){return e.trim().replace(/\{(.*)\}/,"$1")})),e.countries=e.countries.split(";").map((function(e){var t=e.trim().split(" ").map((function(e){return e.trim()})).filter((function(e){return e}));return 0===t.length?"":t[t.length-1].toLowerCase().replace(/^\w/,(function(e){return e.toUpperCase()}))})).filter((function(e){return e})),e.keywords=e.keywords.split(/[;,]/).map((function(e){return e.trim().toLowerCase()}))})),e.forEach((function(e){e.refList.forEach((function(t){t in r&&(r[t].internalCitedList.push(e.doi),e.internalRefList.push(t))}))})),n.commonAuthors=k(e.map((function(e){return e.authors})),30),n.commonCountries=k(e.map((function(e){return e.countries})),30),e.sort((function(e,t){return t[i]-e[i]})),n.computedPosition(e),a.next=11,n.initPublicTags(e);case 11:Object(j.d)((function(){n.papers=e,n.initPrivateTags()}));case 12:case"end":return a.stop()}}),a)})))()},setPaper:function(e,t,n){var a=this.papers.find((function(t){return t.doi===e}));a[t]=n,console.log("==> \u66f4\u65b0paper\u6570\u636e by doi:",e,t,n),A[t]({uid:this.userId,pid:e,paper:Object(j.e)(a)}),this.doiUpdateColors(e)},unitXAttr:"year",get unitXAttrList(){var e=this,t=new Set;this.papers.forEach((function(n){t.add(n[e.unitXAttr])}));var n=Array.from(t);return n.sort((function(e,t){return t-e})),n},unitYAttr:"conferenceName",get unitYAttrList(){return["SciVis","InfoVis","EuroVis","VAST","PacificVis"]},maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(e){var t=this,n={};e.forEach((function(e){var a=e[t.unitXAttr],i=e[t.unitYAttr];a in n||(n[a]={}),i in n[a]||(n[a][i]=0),e.unitIndex=n[a][i],n[a][i]+=1})),this.maxUnitBlockPaperCount=.6*Math.max.apply(Math,Object(l.a)(e.map((function(e){return e.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(e){var t=this;return Object(d.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O();case 2:a=n.sent,e.forEach((function(e){e.doi in a&&(e.publicTags=a[e.doi].filter((function(e){return e})))})),Object(j.d)((function(){t.commonPublicTags=k(Object.values(a),30)}));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var e=this;return Object(d.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x({uid:e.userId});case 2:n=t.sent,Object(j.d)((function(){e.papers.forEach((function(e){if(e.doi in n){var t=n[e.doi].indexOf("read");t>-1&&(e.read=!0,n[e.doi].splice(t,1)),e.privateTags=n[e.doi].filter((function(e){return e}))}})),e.commonPrivateTags=k(Object.values(n),30)})),e.batchUpdateColors();case 5:case"end":return t.stop()}}),t)})))()},userId:"",setUserId:function(e){e!==this.userId&&(this.userId=e,console.log("==> change userId:",this.userId),localStorage.setItem("paper-management-system-userId",e),e&&this.initPrivateTags())},initUserId:function(){if(0===this.userId.length){var e=localStorage.getItem("paper-management-system-userId");e&&this.setUserId(e)}},get controlTagNameList(){return this.generateCategory(10)},get anaCategories(){return this.generateCategory(18,!0)},get commonKeywords(){return k(this.papers.map((function(e){return e.keywords})),30)},generateCategory:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=S(this.commonCountries,["Japan","Korea"],e),a=S(this.commonAuthors,["Xiaoru Yuan"],e),i=S(this.commonPrivateTags,t?["read"]:[],e),r=S(this.commonPublicTags,[],e),c=S(this.commonKeywords,[],e);return[{label:"Country",value:"countries",list:n,highlightType:"outer"},{label:"Author",value:"authors",list:a,highlightType:"inner"},{label:"Keywords",value:"keywords",list:c,highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:i,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:r,highlightType:"inner"}]},get category2highlightType(){var e={};return this.controlTagNameList.forEach((function(t){e[t.value]=t.highlightType})),e},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[],keywords:[]},get controlIsActive(){var e=!1;for(var t in this.activeTags)this.activeTags[t].length>0&&(e=!0);return e},get isUnitOuterHighlight(){var e=this,t=this.controlTagNameList.filter((function(e){return"outer"===e.highlightType})).map((function(e){return e.value})),n=!1;return t.forEach((function(t){e.activeTags[t].length>0&&(n=!0)})),n},tag2color:{},colorUse:{},setTagColor:function(e,t){console.log("==> \u8bbe\u7f6etag\u989c\u8272:",t,e);var n="".concat(t,"---").concat(e);if(n in this.tag2color)this.colorUse[this.tag2color[n]]=!1,delete this.tag2color[n],this.activeTags[t]=Object(l.a)(this.activeTags[t]).filter((function(t){return t!==e}));else{this.activeTags[t].push(e);for(var a=0,i=g.k[a];this.colorUse[i];){if(10===(a+=1)){i="black";break}i=g.k[a]}this.tag2color[n]=i,this.colorUse[i]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var e=this;this.papers.forEach((function(t){t.colors=[],t.innerColors=[],t.outerColors=[],e.updateColor(t)}))},doiUpdateColors:function(e){var t=this.papers.find((function(t){return t.doi===e}));t.colors=[],t.innerColors=[],t.outerColors=[],this.updateColor(t)},updateColor:function(e){var t=this;this.activeTags.privateTags.indexOf("read")>-1&&e.read&&(e.colors.push(this.tag2color["privateTags---read"]),e.innerColors.push(this.tag2color["privateTags---read"]));var n=function(n){var a=t.activeTags[n];"inner"===t.category2highlightType[n]?a.forEach((function(a){if(e[n].indexOf(a)>-1){var i="".concat(n,"---").concat(a);e.innerColors.push(t.tag2color[i])}})):a.forEach((function(a){if(e[n].indexOf(a)>-1){var i="".concat(n,"---").concat(a);e.outerColors.push(t.tag2color[i])}})),a.forEach((function(a){if(e[n].indexOf(a)>-1){var i="".concat(n,"---").concat(a);e.colors.push(t.tag2color[i])}}))};for(var a in this.activeTags)n(a)},maxCitationCount:200,currentSelected:"",currentSelectedRefSet:new Set,currentSelectedCitedSet:new Set,isSelected:!1,setCurrentSelected:function(e){console.log("==> \u9009\u4e2d\u6587\u7ae0:",e),this.currentSelected=e,this.isSelected=!!e;var t=this.papers.find((function(t){return t.doi===e}));this.currentSelectedRefSet=new Set(t.internalRefList),this.currentSelectedCitedSet=new Set(t.internalCitedList)},cancelSelect:function(){console.log("==> \u70b9\u51fb\u80cc\u666f\uff0c\u53d6\u6d88\u8bba\u6587\u9009\u4e2d\u72b6\u6001"),this.isSelected=!1},get currentSelectedPaper(){var e=this;return this.papers.find((function(t){return t.doi===e.currentSelected}))},get analysisPapers(){return this.controlIsActive?this.papers.filter((function(e){return e.innerColors.length>0||e.outerColors.length>0})):this.papers},get anaTimeData(){var e=this;return this.unitXAttrList.map((function(e){return+e})).sort().map((function(t){return{x:t,all:e.analysisPapers.filter((function(e){return+e.year===t})).length,highlight:e.anaHighPapers.filter((function(e){return+e.year===t})).length}}))},get anaTagViewData(){var e=this;return this.anaCategories.map((function(t){return{label:t.label,value:t.value,data:t.list.map((function(n){return"read"===n?{label:"read",all:e.analysisPapers.filter((function(e){return e.read})).length,highlight:e.anaHighPapers.filter((function(e){return e.read})).length}:{label:n,all:e.analysisPapers.filter((function(e){return e[t.value].includes(n)})).length,highlight:e.anaHighPapers.filter((function(e){return e[t.value].includes(n)})).length}}))}}))},anaFilterType:"none",setAnaFilterType:function(e){console.log("setAnaFilterType",e),this.anaFilterType=e},clearBrushTrigger:function(){},setClearBrushTrigger:function(e){this.clearBrushTrigger=e},anaHighCate:"",anaHighTag:"",anaHighPapers:[],setAnaHighPapersByTag:function(e){var t=e.anaHighCate,n=e.anaHighTag;console.log("setAnaHighPapersByTag",t,n),this.clearBrushTrigger(),this.anaHighCate===t&&this.anaHighTag===n?(this.anaHighTag="none",this.setAnaFilterType("none")):(this.anaHighCate=t,this.anaHighTag=n,this.setAnaFilterType(t),this.anaHighPapers=this.analysisPapers.filter((function(e){return Object(y.get)(e,t,[]).includes(n)})))},setAnaHighPapersByYear:function(e){console.log("setAnaHighPapersByYear",e);var t=Object(o.a)(e,2),n=t[0],a=t[1];this.anaHighTag="".concat(n,"-").concat(a),this.anaHighPapers=this.analysisPapers.filter((function(e){return+e.year>=n&&+e.year<=a}))},anaSelectHighlightPaper:{},setAnaSelectHighlightPaper:function(e){console.log("setAnaSelectHighlightPaper",Object(j.e)(e)),this.anaSelectHighlightPaper=e}}},H=n(257),L=r.a.createContext(null),B=function(e){var t=e.children,n=Object(H.a)(I);return Object(a.jsx)(L.Provider,{value:n,children:t})},Y=function(){var e=r.a.useContext(L);if(!e)throw new Error("no Provider");return e},X=n(76),E=n(20),U=(n(236),n(262)),M=(n(237),n(78)),F=function(){var e=Y(),t=Object(y.debounce)((function(t){e.setTitleSearch(t.target.value)}),200);return Object(a.jsxs)("div",{className:"search-view",children:[Object(a.jsx)("div",{className:"search-view-input",children:Object(a.jsx)("input",{onInput:t})}),Object(a.jsx)("div",{className:"search-view-icon",children:Object(a.jsx)(M.a,{})})]})},_=Object(U.a)((function(){var e=Y().controlTagNameList;return Object(a.jsxs)("div",{className:"control-view",children:[Object(a.jsxs)("div",{className:"control-item",children:[Object(a.jsx)("div",{className:"control-item-title",children:"Title Search"}),Object(a.jsx)("div",{className:"control-item-options",children:Object(a.jsx)(F,{searchAttr:"title"})})]}),e.map((function(e){return Object(a.jsx)(D,{tagData:e},e.label)}))]})})),D=Object(U.a)((function(e){var t=e.tagData,n=Y(),r=n.tag2color,c=Object(i.useState)([]),s=Object(o.a)(c,2),u=s[0],h=s[1];Object(i.useEffect)((function(){var e=Object.keys(r).filter((function(e){return e.split("---")[0]===t.value})).map((function(e){return e.split("---")[1]})).filter((function(e){return t.list.indexOf(e)>-1}));h(e)}),[]);var d=function(e){var a=Object(l.a)(u),i=a.indexOf(e);i>-1?(a.splice(i,1),h(a)):(a.push(e),h(a)),n.setTagColor(e,t.value)};return Object(a.jsxs)("div",{className:"control-item",children:[Object(a.jsx)("div",{className:"control-item-title",children:t.label}),Object(a.jsx)("div",{className:"control-item-options",children:t.list.map((function(e){return Object(a.jsx)(V,{value:e,clickOption:d,isSelect:u.indexOf(e)>-1&&r["".concat(t.value,"---").concat(e)]},e)}))})]})})),V=function(e){var t=e.value,n=e.clickOption,i=e.isSelect,r=["control-item-option",i&&"option-active"].filter((function(e){return e})).join(" "),c=i?{background:i,border:"1px solid ".concat(i)}:{},s="Usa"===t?"USA":t;return Object(a.jsx)("div",{className:r,onClick:function(){return n(t)},style:c,children:s})},R=(n(238),r.a.memo((function(e){var t=e.cx,n=e.cy,i=e.r,r=e.opacity,c=e.doi,s=e.handleClick,o=e.title,l=e.innerColors,u=e.outerColors,h=e.isBackgroundActive,d=e.handleHover,g=e.handleHoverOut,j=function(e){return t+Math.sin(e)*i},f=function(e){return n+Math.cos(e)*i},p=2*Math.PI/l.length,b=l.map((function(e,t){return{startX:j(p*t),startY:f(p*t),endX:j(p*(t+1)),endY:f(p*(t+1))}})),v=1.5*i,m=function(e){return t+Math.sin(e)*v},O=function(e){return n+Math.cos(e)*v},x=2*Math.PI/u.length,C=u.map((function(e,t){return{startX:m(x*t),startY:O(x*t),endX:m(x*(t+1)),endY:O(x*(t+1))}}));return Object(a.jsxs)("g",{id:"unit-g",onClick:function(e){return s(e,c)},cursor:"pointer",onMouseEnter:function(){return d(c)},onMouseLeave:function(){return g()},children:[Object(a.jsx)("title",{children:o}),h&&Object(a.jsxs)("g",{id:"unit-background-g",children:[Object(a.jsx)("rect",{x:t-1.6*i,y:n-1.6*i,width:3.2*i,height:3.2*i,fill:"#fc8d62",rx:.4*i,ry:.4*i}),Object(a.jsx)("circle",{cx:t,cy:n,r:1.3*i,fill:"#eee"})]}),Object(a.jsxs)("g",{id:"unit-border-g",children:[C.length>1?C.map((function(e,i){return Object(a.jsx)("path",{d:"M ".concat(t," ").concat(n,"\n              L ").concat(e.startX," ").concat(e.startY,"\n              A ").concat(v," ").concat(v," 0 0 0 ").concat(e.endX," ").concat(e.endY,"\n              Z\n              "),fill:u[i]},i)})):Object(a.jsx)("circle",{cx:t,cy:n,r:v,fill:u.length>0?u[0]:"none"}),Object(a.jsx)("circle",{cx:t,cy:n,r:1.1*i,fill:"white",opacity:C.length>0?1:0})]}),Object(a.jsx)("g",{id:"unit-sector-g",opacity:r,children:b.length>1?b.map((function(e,r){return Object(a.jsx)("path",{d:"M ".concat(t," ").concat(n,"\n              L ").concat(e.startX," ").concat(e.startY,"\n              A ").concat(i," ").concat(i," 0 0 0 ").concat(e.endX," ").concat(e.endY,"\n              Z\n              "),stroke:"white",fill:l[r],strokeWidth:.1*i},r)})):Object(a.jsx)("circle",{cx:t,cy:n,r:i,fill:l[0]})})]})}))),z=function(e){var t=e.isShow,n=e.paper,i=e.paperCircle,r=e.containerWidth,c=e.containerHeight,s=i.cx/r,o=.25*r,l=i.cx-o*s,u=i.cy+15,h=i.cy+200>c?"translateY(-150%)":"",d={transform:"translate(".concat(l,"px,").concat(u,"px) ").concat(h),opacity:t?1:0};return Object(a.jsxs)("div",{className:"unit-tooltip",style:d,children:[Object(a.jsx)("div",{className:"unit-tooltip-title",children:Object(y.get)(n,"title","")}),Object(a.jsxs)("div",{className:"unit-tooltip-authors",children:[Object(y.get)(n,"authors",[]).join("; ")," (",n.year,")"]})]})},K=30,W=40,J=15,Z=1,q=2,G=3,$=3,Q=1,ee=Object(U.a)((function(){var e=Y(),t=e.papers,n=e.unitXAttr,r=e.unitYAttr,c=e.unitXAttrList,s=e.unitYAttrList,u=e.unitBlockCount,h=e.maxUnitBlockPaperCount,d=e.controlIsActive,f=e.isUnitOuterHighlight,p=e.currentSelected,b=e.setCurrentSelected,v=e.isSelected,m=e.cancelSelect,O=e.currentSelectedRefSet,x=e.currentSelectedCitedSet,C=e.searchPaperDoiSet,T=Object(i.useState)(0),N=Object(o.a)(T,2),w=N[0],P=N[1],S=Object(i.useState)(0),k=Object(o.a)(S,2),A=k[0],I=k[1];Object(i.useEffect)((function(){var e=document.querySelector("#unit-svg");P(e.clientWidth-W-J),I(e.clientHeight-K-Z)}),[]);for(var H,L=c.length>0?w/c.length-G-$:0,B=s.length>0?A/s.length-q-Q:0,X=Math.floor(L>0?B/L:1),E=Math.ceil(Math.sqrt(h/X)),U=c.map((function(e,t){var n=Math.max.apply(Math,Object(l.a)(s.map((function(t,n){return Object(y.get)(u,[e,t],0)})))),a=Math.ceil(Math.sqrt(h/X));return n>h&&(a+=1),a})),M=[0],F=[0],_=1;_<c.length;_++)M.push(M[_-1]+U[_-1]);H=(w-(G+$)*c.length)/(M[M.length-1]+U[U.length-1]);for(var D=1;D<c.length;D++)F.push(M[D]*H+(G+$)*D);var V=g.j().domain([0,100]).range([.25,.8]),ee=t.map((function(e){var t={};t.oriData=Object(j.e)(e),t.BlockIndexX=c.indexOf(e[n]),t.BlockIndexY=s.indexOf(e[r]);var a,i=e.doi;return t.doi=i,t.circleIndexX=e.unitIndex%U[t.BlockIndexX],t.circleIndexY=Math.floor(e.unitIndex/U[t.BlockIndexX]),t.cx=W+t.BlockIndexX*(L+G+$)+(t.circleIndexX+.5)*H,t.cy=K+t.BlockIndexY*(B+q+Q)+(t.circleIndexY+.5)*H,"2004"===e.year&&t.BlockIndexY>0&&(t.cy+=50-10*t.BlockIndexY),t.cx=W+F[t.BlockIndexX]+(t.circleIndexX+.5)*H,t.citationGrey=(a=e.citationCount,g.e(V(a))),t.activeColors=e.innerColors,t.innerColors=t.activeColors.length>0?t.activeColors:[t.citationGrey],t.outerColors=["none"],f?t.outerColors=e.outerColors:v?(p===e.doi&&(t.outerColors=["#d95f02"]),O.has(e.doi)&&(t.outerColors=["#1b9e77"]),x.has(e.doi)&&(t.outerColors=["#7570b3"])):t.outerColors=["none"],t.opacity=d?e.innerColors.length+e.outerColors.length>0?.8:.4:.8,t.title=e.Title,v?(p===e.doi&&(t.borderColor="#d95f02"),O.has(e.doi)&&(t.borderColor="#1b9e77"),x.has(e.doi)&&(t.borderColor="#7570b3")):t.borderColor="none",t.isBackgroundActive=C.has(e.doi),t})),te=c.map((function(e,t){return{value:e,x:W+F[t]+U[t]*H/2,y:.8*K}})),ne=s.map((function(e,t){return{value:e,x:.35*W,y:K+(B+q+Q)*t}})),ae=function(e,t){e.stopPropagation(),b(t)},ie=Object(i.useState)(""),re=Object(o.a)(ie,2),ce=re[0],se=re[1],oe=ce.length>0?t.find((function(e){return e.doi===ce})):{},le=ce.length>0?ee.find((function(e){return e.doi===ce})):{},ue=function(e){console.log("===> hover",e),se(e)},he=function(){console.log("===> mouse leave"),se("")};return Object(a.jsxs)("div",{className:"unit-view",children:[Object(a.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",onClick:function(){m()},children:[Object(a.jsx)("g",{id:"units",children:H>0&&ee.map((function(e,t){return Object(a.jsx)(R,{cx:e.cx,cy:e.cy,r:H/2.4,doi:e.doi,colors:e.colors,opacity:e.opacity,innerColors:e.innerColors,outerColors:e.outerColors,handleClick:ae,borderOpacity:e.borderOpacity,borderColor:e.borderColor,title:e.title,isBackgroundActive:e.isBackgroundActive,handleHover:ue,handleHoverOut:he},t)}))}),Object(a.jsx)("g",{id:"x-label",children:H>0&&te.map((function(e){return Object(a.jsx)("text",{x:e.x,y:e.y,textAnchor:"middle",fontSize:1.6*H,fill:"rgb(78, 78, 78)",children:e.value},e.value)}))}),Object(a.jsx)("g",{id:"y-label",children:H>0&&ne.map((function(e){return Object(a.jsx)("text",{transform:"translate(".concat(e.x,", ").concat(e.y,") rotate(90)"),fontSize:1.6*H,fill:"rgb(78, 78, 78)",children:e.value},e.value)}))})]}),Object(a.jsx)(z,{isShow:ce.length>0,paper:oe,containerWidth:w,containerHeight:A,paperCircle:le})]})})),te=(n(239),n(264)),ne=n(143),ae=n(59),ie=n(259),re=n(263),ce=n(142),se=Object(U.a)((function(){var e=Y(),t=e.currentSelectedPaper,n=e.setPaper,i=t;if(console.log("currentSelectedPaper",Object(j.e)(t)),!t)return Object(a.jsx)("div",{});var r=Object(y.get)(i,"doi",""),c=[{title:"Private Tags",value:"privateTags",initTags:Object(y.get)(i,"privateTags",[])},{title:"Public Tags",value:"publicTags",initTags:Object(y.get)(i,"publicTags",[])}];return Object(a.jsx)("div",{className:"detail-view",children:i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"detail-title",children:i.title}),Object(a.jsxs)("div",{className:"detail-authors",children:[Object(y.get)(i,"authors",[]).join("; ")," (",i.year,")"]}),Object(a.jsxs)("div",{className:"detail-edit-tags",children:[Object(a.jsxs)("div",{className:"detail-edit-read",children:[Object(a.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(a.jsx)(te.a,{size:"small",checkedChildren:Object(a.jsx)(ne.a,{}),unCheckedChildren:Object(a.jsx)(ae.a,{}),defaultChecked:Object(y.get)(i,"read",!1),onChange:function(e){n(r,"read",e)}})]}),c.map((function(e){return Object(a.jsx)(le,{title:e.title,initTags:e.initTags,handleChangeTags:function(t){return function(e,t){r&&n(r,e,t)}(e.value,t)}},e.value)}))]}),Object(a.jsxs)("div",{className:"detail-attrs",children:[Object(a.jsxs)("div",{className:"detail-attr",children:[Object(a.jsx)("div",{className:"detail-key",children:"keywords:"}),Object(a.jsx)("div",{className:"detail-content",children:Object(y.get)(i,"keywords",[]).join("; ")})]}),Object(a.jsx)(oe,{paper:i,label:"doi"}),Object(a.jsx)(oe,{paper:i,label:"affiliation"}),Object(a.jsx)(oe,{paper:i,label:"abstract"})]})]})},r)})),oe=function(e){var t=e.paper,n=e.label;return Object(a.jsxs)("div",{className:"detail-attr",children:[Object(a.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(a.jsx)("div",{className:"detail-content",children:Object(y.get)(t,n,"")})]})},le=function(e){var t=e.title,n=e.initTags,r=e.handleChangeTags,c=Object(i.useState)(n),s=Object(o.a)(c,2),u=s[0],h=s[1],d=function(e){r(e),h(e)},g=Object(i.useState)(-1),j=Object(o.a)(g,2),f=j[0],p=j[1],b=Object(i.useRef)(),v=Object(i.useState)(""),m=Object(o.a)(v,2),O=m[0],x=m[1],C=function(){var e=Object(l.a)(u);e[f]=O,d(e),p(-1),x("")},y=Object(i.useState)(""),T=Object(o.a)(y,2),N=T[0],w=T[1],P=function(){N&&u.indexOf(N)<0&&(d([].concat(Object(l.a)(u),[N])),I(!1),w(""))},S=Object(i.useState)(!1),k=Object(o.a)(S,2),A=k[0],I=k[1];return Object(a.jsxs)("div",{className:"detail-edit-tag",children:[Object(a.jsxs)("div",{className:"detail-edit-title",children:[t,":"]}),Object(a.jsx)("div",{className:"detail-edit-tags",children:Object(a.jsxs)(a.Fragment,{children:[u.map((function(e,t){return f===t?Object(a.jsx)(ie.a,{size:"small",className:"tag-input",value:O,onchange:function(e){return x(e.target.value)},onBlur:C,onPressEnter:C},e):Object(a.jsx)(re.a,{className:"edit-tag",closable:!0,onClose:function(){return t=e,void d(u.filter((function(e){return e!==t})));var t},children:Object(a.jsx)("span",{children:e})},e)})),A&&Object(a.jsx)(ie.a,{ref:b,type:"text",size:"small",className:"tag-input",value:N,onChange:function(e){return w(e.target.value)},onBlur:P,onPressEnter:P}),!A&&Object(a.jsxs)(re.a,{className:"site-tag-plus",onClick:function(){I(!0)},children:[Object(a.jsx)(ce.a,{})," New Tag"]})]})})]})},ue=function(){var e=Y();return Object(i.useEffect)((function(){e.setCurrentPage(),e.initPapers(),e.initUserId()}),[]),Object(a.jsxs)("div",{className:"main-container",children:[Object(a.jsxs)("div",{className:"control-main-container",children:[Object(a.jsx)("div",{className:"control-view-container",children:Object(a.jsx)(_,{})}),Object(a.jsx)("div",{className:"unit-view-container",children:Object(a.jsx)(ee,{})})]}),Object(a.jsx)("div",{className:"detail-view-container",children:Object(a.jsx)(se,{})})]})},he=(n(241),n(242),n(243),function(e){var t=e.svgId,n=Object(i.useState)({width:0,height:0}),a=Object(o.a)(n,2),r=a[0],c=a[1];return Object(i.useEffect)((function(){var e=g.l("#".concat(t)).node().getClientRects()[0];c(e)}),[t]),r}),de=r.a.memo((function(e){var t=e.data,n=e.onInput,r=void 0===n?function(){}:n,c=e.onChange,s=void 0===c?function(){}:c,o=e.setClearBrushTrigger,l=void 0===o?function(){}:o,u=e.anaFilterType,h=void 0===u?"none":u,d=e.setAnaFilterType,j=void 0===d?function(){}:d,f=he({svgId:"ana-time-line-svg"}),p=f.width,b=f.height,v=[g.g(t,(function(e){return e.x})),g.f(t,(function(e){return e.x}))];return Object(i.useEffect)((function(){r(v)}),[]),Object(i.useEffect)((function(){if(0!==t.length&&0!==p&&0!==b){var e=g.i().domain(t.map((function(e){return e.x}))).range([T,p-N]).padding(.2),n=g.j().domain([0,g.f(t,(function(e){return e.all}))]).nice().range([b-P,w]),a=g.l("#ana-time-line-svg"),i=a.append("g").classed("non-active-bars",!0).selectAll("rect").data(t).join("rect").attr("x",(function(t){return t.rectX=e(t.x)})).attr("y",(function(e){return n(e.all)})).attr("height",(function(e){return n(0)-n(e.all)})).attr("width",e.bandwidth());a.append("g").classed("active-bars",!0).classed("highlight-bars",!0);a.append("g").attr("class","x-axis").call((function(t){return t.attr("transform","translate(0, "+(b-P)+")").call(g.a(e).tickValues(g.h(v[0],v[1],5)).tickSizeOuter(0))})),a.append("g").attr("class","y-axis").call((function(e){return e.attr("transform","translate(".concat(p-N,",0)")).call(g.b(n).ticks(6)).call((function(e){return e.select(".domain").remove()}))}));var c=g.d().extent([[T,.3*w],[p-N,b-P]]).on("start",(function(){j("year")})).on("brush",(function(n){var a=n.selection;i.classed("active-bars",(function(t){return t.rectX+e.bandwidth()>a[0]&&t.rectX<a[1]}));var c=t.filter((function(t){return t.rectX+e.bandwidth()>a[0]&&t.rectX<a[1]})).map((function(e){return e.x}));c.length>=1?r([c[0],c[c.length-1]]):r(v)})).on("end",(function(n){var a=n.selection;if(a){var c=t.filter((function(t){return t.rectX+e.bandwidth()>a[0]&&t.rectX<a[1]})).map((function(e){return e.x}));c.length>=1?s([c[0],c[c.length-1]]):s(v)}else i.classed("active-bars",!1),r(v),j("none"),s(v)}));a.call(c),l((function(){g.c().move(a),i.classed("active-bars",!1),r(v)}))}}),[f]),Object(i.useEffect)((function(){if(0!==p&&0!==b){var e=g.l("#ana-time-line-svg").select(".highlight-bars");if("year"===h||"none"===h)e.selectAll("rect").attr("height",0);else{var n=g.i().domain(t.map((function(e){return e.x}))).range([T,p-N]).padding(.2),a=g.j().domain([0,g.f(t,(function(e){return e.all}))]).nice().range([b-P,w]);e.selectAll("rect").data(t).join("rect").attr("x",(function(e){return n(e.x)})).attr("y",(function(e){return a(e.highlight)})).attr("height",(function(e){return a(0)-a(e.highlight)})).attr("width",n.bandwidth())}}}),[t,h]),Object(a.jsx)("svg",{id:"ana-time-line-svg",width:"100%",height:"100%"})})),ge=n(87),je=(n(244),n(258)),fe=je.a.TabPane,pe=Object(i.memo)((function(e){var t=e.dataSource,n=e.anaFilterType,i=e.onChange;return Object(a.jsx)(je.a,{children:t.map((function(e){return Object(a.jsx)(fe,{tab:e.label,children:Object(a.jsx)(be,Object(ge.a)(Object(ge.a)({},e),{},{isHighlight:"none"!==n,onChange:i}))},e.label)}))})})),be=function(e){var t=e.value,n=e.data,i=e.isHighlight,r=e.onChange,c="tag-filter-".concat(t);n=n.filter((function(e){return e.all>0})).sort((function(e,t){return t.all-e.all}));var s=g.j().domain([0,g.f(n,(function(e){return e.all}))]).nice().range([0,90]);return Object(a.jsx)("div",{id:c,children:n.map((function(e){return Object(a.jsxs)("div",{className:"tag-bar-row",onClick:function(){return r({anaHighCate:t,anaHighTag:e.label})},children:[Object(a.jsx)("div",{className:"tag-label single-row",children:"Usa"===e.label?"USA":e.label}),Object(a.jsxs)("div",{className:"tag-bar-container",children:[Object(a.jsx)("div",{className:"tag-bar bar",style:{width:"".concat(s(e.all),"%"),height:16}}),i&&Object(a.jsx)("div",{className:"active-tag-bar highlight-bar-blue bar",style:{width:"".concat(s(e.highlight),"%"),height:16}})]}),Object(a.jsxs)("div",{className:"tag-count",children:[i&&Object(a.jsxs)("div",{className:"tag-count-highlight highlight-blue",children:[e.highlight,"\xa0/\xa0"]}),Object(a.jsx)("div",{children:e.all})]})]},e.label)}))})},ve=pe,me=Object(U.a)((function(){var e=Y(),t=e.analysisPapers,n=e.anaHighPapers,r=e.setClearBrushTrigger,c=e.anaTimeData,s=e.anaTagViewData,l=e.setAnaHighPapersByYear,u=e.setAnaHighPapersByTag,h=e.anaFilterType,d=e.setAnaFilterType,g=e.anaHighTag,j=Object(i.useState)([0,0]),f=Object(o.a)(j,2),p=f[0],b=f[1];return Object(a.jsxs)("div",{className:"tag-view-container",children:[Object(a.jsxs)("div",{className:"tag-header",children:[Object(a.jsx)("div",{className:"analysis-paper-count",children:Object(a.jsx)(Oe,{isAll:"none"===h,allCount:t.length,highlightCount:n.length})}),"none"===h||Object(a.jsx)("div",{className:"selected-highlight-attr highlight-bar-blue",children:"".concat("Usa"===g?"USA":g)})]}),Object(a.jsx)("div",{className:"tag-highlight-tabs-container",children:Object(a.jsx)(ve,{dataSource:s,onChange:u,anaFilterType:h})}),Object(a.jsxs)("div",{className:"tag-time-line",children:[Object(a.jsx)("div",{className:"year-seleted-text",children:p.join("-")}),Object(a.jsx)("div",{className:"time-line-div",children:c.length>0&&Object(a.jsx)(de,{data:c,onInput:b,onChange:l,setClearBrushTrigger:r,setAnaFilterType:d,anaFilterType:h})})]})]})})),Oe=Object(i.memo)((function(e){var t=e.isAll,n=e.allCount,i=e.highlightCount,r=void 0===i?0:i;return t?Object(a.jsxs)("span",{className:"paper-all-count",children:["Papers: ",n]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"paper-all-count",children:"Papers: "}),Object(a.jsx)("span",{className:"paper-highlight-count highlight-blue",children:r}),Object(a.jsxs)("span",{className:"paper-all-count",children:["\xa0/\xa0",n]})]})})),xe=me,Ce=(n(245),function(){return Object(a.jsx)("div",{children:"ProjectView"})}),ye=(n(246),function(){return Object(a.jsx)("div",{children:"NetworkView"})}),Te=(n(247),function(){return Object(a.jsx)("div",{children:"TopicView"})}),Ne=(n(248),Object(U.a)((function(){var e=Y(),t=e.analysisPapers,n=e.anaHighPapers,i=e.setAnaSelectHighlightPaper;return Object(a.jsxs)("div",{className:"highlight-list-view",children:[Object(a.jsxs)("div",{className:"highlight-list-header",children:[n.length," / ",t.length]}),Object(a.jsx)("div",{className:"highlight-list-content",children:n.map((function(e,t){return Object(a.jsx)(we,{paper:e,index:t,handleClick:i},e.doi)}))})]})}))),we=function(e){var t=e.paper,n=e.index,i=e.handleClick,r=void 0===i?function(){}:i;return Object(a.jsxs)("div",{className:"paper-item",onClick:function(){return r(t)},children:[Object(a.jsxs)("div",{className:"paper-index",children:[n+1,"."]}),Object(a.jsxs)("div",{className:"paper-content",children:[Object(a.jsxs)("div",{className:"paper-header",children:[Object(a.jsx)("div",{className:"paper-header-conferenceName",children:t.conferenceName}),Object(a.jsx)("div",{className:"paper-header-title",children:t.title})]}),Object(a.jsxs)("div",{className:"paper-details",children:[t.authors.join("; ")," (",t.year,")"]}),Object(a.jsx)("div",{className:"paper-tags",children:[].concat(Object(l.a)(t.keywords),Object(l.a)(t.publicTags),Object(l.a)(t.privateTags)).join("; ")})]})]})},Pe=Ne,Se=(n(249),Object(U.a)((function(){var e=Y().anaSelectHighlightPaper,t=e.conferenceName,n=void 0===t?"":t,i=e.year,r=void 0===i?"":i,c=e.title,s=void 0===c?"":c,o=e.authors,l=void 0===o?[]:o,u=e.keywords,h=void 0===u?[]:u,d=e.abstract,g=void 0===d?"":d;return e.title?Object(a.jsxs)("div",{className:"detail-paper-view",children:[Object(a.jsx)("div",{className:"paper-title",children:s}),Object(a.jsxs)("div",{className:"paper-details",children:[l.join("; "),Object(a.jsx)("span",{className:"paper-header",children:r&&"(".concat(n," ").concat(r,")")})]}),Object(a.jsxs)("div",{className:"paper-info",children:[Object(a.jsx)("span",{className:"paper-info-title",children:"Keywords:"}),Object(a.jsx)("span",{className:"paper-info-content",children:h.join("; ")})]}),Object(a.jsxs)("div",{className:"paper-info",children:[Object(a.jsx)("span",{className:"paper-info-title",children:"Abstract:"}),Object(a.jsx)("span",{className:"paper-info-content",children:g})]})]}):Object(a.jsx)("div",{})}))),ke=function(){var e=Y();return Object(i.useEffect)((function(){e.setCurrentPage(),e.initPapers(),e.initUserId()}),[]),Object(a.jsxs)("div",{className:"analysis-container",children:[Object(a.jsx)("div",{className:"left-container",children:Object(a.jsx)(xe,{})}),Object(a.jsxs)("div",{className:"middle-container",children:[Object(a.jsx)("div",{className:"middle-top-container",children:Object(a.jsx)(Ce,{})}),Object(a.jsx)("div",{className:"middle-bottom-container",children:Object(a.jsx)(ye,{})})]}),Object(a.jsxs)("div",{className:"right-container",children:[Object(a.jsx)("div",{className:"right-top-container",children:Object(a.jsx)(Te,{})}),Object(a.jsx)("div",{className:"right-middle-container",children:Object(a.jsx)(Pe,{})}),Object(a.jsx)("div",{className:"right-bottom-container",children:Object(a.jsx)(Se,{})})]})]})},Ae=(n(250),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu","KaiChen Nie"]),Ie=n(261),He=Ie.a.Option,Le=Object(U.a)((function(){var e=Y(),t=e.currentPage,n="Literature ".concat(t," System"),i="Analysis"===t?"management":"analysis",r="Analysis"===t?"Manage":"Analyze",c=function(){return Object(a.jsx)(X.b,{to:i,className:"switch-button",children:r})};return Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{className:"title",children:n}),Object(a.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(a.jsx)(Ie.a,{value:e.userId,size:"small",onChange:function(t){e.setUserId(t)},style:{width:130},placeholder:"Set User",children:Ae.map((function(e){return Object(a.jsx)(He,{value:e,children:e},e)}))}),Object(a.jsx)(c,{})]})]})})),Be=function(){return Object(a.jsx)(B,{children:Object(a.jsx)(X.a,{children:Object(a.jsxs)("div",{className:"view-container",children:[Object(a.jsx)("div",{className:"header-container",children:Object(a.jsx)(Le,{})}),Object(a.jsxs)(E.c,{children:[Object(a.jsx)(E.a,{exact:!0,path:"/management",component:ue}),Object(a.jsx)(E.a,{exact:!0,path:"/analysis",component:ke}),Object(a.jsx)(E.a,{path:"/",component:ue})]})]})})})},Ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,265)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};n(254);s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Be,{})}),document.getElementById("root")),Ye()}},[[255,1,2]]]);
//# sourceMappingURL=main.6dc64a3e.chunk.js.map