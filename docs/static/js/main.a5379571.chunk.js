(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{175:function(t,e,n){},176:function(t,e,n){},179:function(t,e,n){},180:function(t,e,n){},182:function(t,e,n){},184:function(t,e,n){},186:function(t,e,n){"use strict";n.r(e);var i=n(3),c=n(0),a=n.n(c),r=n(28),s=n.n(r),o=(n(175),n(14)),u=n.n(o),l=n(30),d=(n(176),n(26)),h=n(38),j=n(24),f=n(113),p=n.n(f),v="http://vis.pku.edu.cn/vis4vis/",g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=v+t+(t.includes("?")?"&":"?")+p.a.stringify(e);return new Promise((function(t,e){fetch(n).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},b=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g("get_public_tags");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,t.next=3,g("get_public_tags",{uid:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(t){var e=t.uid,n=t.pid,i=t.paper,c=i.privateTags,a=i.read;return e&&g("set_private_tags",{uid:e,pid:n,tags:[].concat(Object(d.a)(c),[a&&"read"]).filter((function(t){return t})).join(",")}),"OK"},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};t.forEach((function(t){t.forEach((function(t){t&&(t in n?n[t]+=1:n[t]=1)}))}));var i=[];for(var c in n)i.push({item:c,count:n[c]});return i.sort((function(t,e){return e.count-t.count})),i.slice(0,e).map((function(t){return t.item}))},C={publicTags:function(t){var e=t.pid,n=t.paper.publicTags;return g("set_public_tags",{pid:e,tags:n.join(",")}),"OK"},privateTags:x,read:x},T=function(){return{papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],setPapers:function(t){var e=arguments,n=this;return Object(l.a)(u.a.mark((function i(){var c;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=e.length>1&&void 0!==e[1]?e[1]:"CitationCount",console.log("==> init Papers"),t.forEach((function(t,e){"#"===t.DOI&&(t.DOI="tmp-".concat(e)),""===t.CitationCount&&(t.CitationCount=0),"#"!==t.Countries&&"###"!==t.Countries||(t.Countries=""),t.privateTags=[],t.publicTags=[],t.colors=[],t.authors=t.AuthorNames.split(";").map((function(t){return t.trim()})),t.countries=t.Countries.split(";").map((function(t){var e=t.trim().split(" ");return 0===e.length?"":e[e.length-1].trim()})).filter((function(t){return t}))})),n.commonAuthors=m(t.map((function(t){return t.authors}))),n.commonCountries=m(t.map((function(t){return t.countries}))),t.sort((function(t,e){return e[c]-t[c]})),n.computedPosition(t),i.next=9,n.initPublicTags(t);case 9:n.papers=t;case 10:case"end":return i.stop()}}),i)})))()},setPaper:function(t,e,n){var i=this.papers.find((function(e){return e.DOI===t}));i[e]=n,console.log("==> update paper",t,e,n),C[e]({uid:this.userId,pid:t,paper:Object(j.d)(i)}),this.doiUpdateColors(t)},unitXAttr:"Year",get unitXAttrList(){var t=this,e=new Set;this.papers.forEach((function(n){e.add(n[t.unitXAttr])}));var n=Array.from(e);return n.sort((function(t,e){return e-t})),n},unitYAttr:"Conference",get unitYAttrList(){return["SciVis","InfoVis","VAST","PacificVis"]},maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(t){var e=this,n={};t.forEach((function(t){var i=t[e.unitXAttr],c=t[e.unitYAttr];i in n||(n[i]={}),c in n[i]||(n[i][c]=0),t.unitIndex=n[i][c],n[i][c]+=1})),this.maxUnitBlockPaperCount=.6*Math.max.apply(Math,Object(d.a)(t.map((function(t){return t.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(t){var e=this;return Object(l.a)(u.a.mark((function n(){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b();case 2:i=n.sent,t.forEach((function(t){t.DOI in i&&(t.publicTags=i[t.DOI].filter((function(t){return t})))})),e.commonPublicTags=m(Object.values(i));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var t=this;return Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({uid:t.userId});case 2:n=e.sent,t.papers.forEach((function(t){t.DOI in n&&(t.privateTags=n[t.DOI].filter((function(t){return t})))})),t.commonPrivateTags=m(Object.values(n));case 5:case"end":return e.stop()}}),e)})))()},userId:"",setUserId:function(t){this.userId=t,console.log("change userId",this.userId),t&&this.initPrivateTags()},get controlTagNameList(){return[{label:"Country",value:"countries",list:this.commonCountries.slice(0,8).concat(["Japan","Korea"])},{label:"Author",value:"authors",list:this.commonAuthors},{label:"Private Tag",value:"privateTags",list:this.commonPrivateTags},{label:"Public Tag",value:"publicTags",list:this.commonPublicTags}]},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[]},get controlIsActive(){var t=!1;for(var e in this.activeTags)this.activeTags[e].length>0&&(t=!0);return t},tag2color:{},colorUse:{},setTagColor:function(t,e){if(console.log("==> setTagColor",t,e),t in this.tag2color)this.colorUse[this.tag2color[t]]=!1,delete this.tag2color[t],this.activeTags[e]=Object(d.a)(this.activeTags[e]).filter((function(e){return e!==t}));else{this.activeTags[e].push(t);for(var n=0,i=h.d[n];this.colorUse[i];){if(10===(n+=1)){i="black";break}i=h.d[n]}this.tag2color[t]=i,this.colorUse[i]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var t=this;this.papers.forEach((function(e){e.colors=[];var n=function(n){t.activeTags[n].forEach((function(i){e[n].indexOf(i)>-1&&e.colors.push(t.tag2color[i])}))};for(var i in t.activeTags)n(i)}))},doiUpdateColors:function(t){var e=this,n=this.papers.find((function(e){return e.DOI===t}));n.colors=[];var i=function(t){e.activeTags[t].forEach((function(i){n[t].indexOf(i)>-1&&n.colors.push(e.tag2color[i])}))};for(var c in this.activeTags)i(c)},maxCitationCount:200,currentSelected:"",setCurrentSelected:function(t){console.log("==> setCurrentSelected",t),this.currentSelected=t},get currentSelectedPaper(){var t=this;return this.papers.find((function(e){return e.DOI===t.currentSelected}))}}},k=n(188),I=a.a.createContext(null),y=function(t){var e=t.children,n=Object(k.a)(T);return Object(i.jsx)(I.Provider,{value:n,children:e})},P=function(){var t=a.a.useContext(I);if(!t)throw new Error("no Provider");return t},N=n(29),S=(n(179),n(192)),w=Object(S.a)((function(){var t=P().controlTagNameList;return Object(i.jsx)("div",{className:"control-view",children:t.map((function(t){return Object(i.jsx)(A,{tagData:t},t.label)}))})})),A=Object(S.a)((function(t){var e=t.tagData,n=P(),a=n.tag2color,r=Object(c.useState)([]),s=Object(N.a)(r,2),o=s[0],u=s[1],l=function(t){var i=Object(d.a)(o),c=i.indexOf(t);c>-1?(i.splice(c,1),n.setTagColor(t,e.value),u(i)):(i.push(t),n.setTagColor(t,e.value),u(i))};return Object(i.jsxs)("div",{className:"control-item",children:[Object(i.jsx)("div",{className:"control-item-title",children:e.label}),Object(i.jsx)("div",{className:"control-item-options",children:e.list.map((function(t){return Object(i.jsx)(Y,{value:t,clickOption:l,isSelect:o.indexOf(t)>-1&&a[t]},t)}))})]})})),Y=function(t){var e=t.value,n=t.clickOption,c=t.isSelect,a=["control-item-option",c&&"option-active"].filter((function(t){return t})).join(" "),r=c?{background:c,border:"1px solid ".concat(c)}:{};return Object(i.jsx)("div",{className:a,onClick:function(){return n(e)},style:r,children:e})},B=(n(180),a.a.memo((function(t){var e=t.cx,n=t.cy,c=t.r,a=t.colors,r=t.opacity,s=t.doi,o=t.handleClick,u=t.isSelect,l=t.title,d=2*Math.PI/a.length,h=function(t){return e+Math.sin(t)*c},j=function(t){return n+Math.cos(t)*c},f=a.map((function(t,e){return{startX:h(d*e),startY:j(d*e),endX:h(d*(e+1)),endY:j(d*(e+1))}})),p=u?1:0;return Object(i.jsxs)("g",{id:"unit-g",onClick:function(){return o(s)},cursor:"pointer",children:[Object(i.jsx)("title",{children:l}),Object(i.jsx)("g",{id:"unit-border-g",children:Object(i.jsx)("circle",{cx:e,cy:n,r:1.4*c,fill:"none",stroke:"red",strokeWidth:.6*c,opacity:p})}),Object(i.jsx)("g",{id:"unit-sector-g",opacity:r,children:f.length>1?f.map((function(t,r){return Object(i.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(c," ").concat(c," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),stroke:"white",fill:a[r],strokeWidth:.1*c},r)})):Object(i.jsx)("circle",{cx:e,cy:n,r:c,fill:a[0]})})]})}))),D=n(32),L=30,X=40,M=15,E=1,U=2,_=3,z=3,F=1,J=Object(S.a)((function(){var t=P(),e=t.papers,n=t.unitXAttr,a=t.unitYAttr,r=t.unitXAttrList,s=t.unitYAttrList,o=t.unitBlockCount,u=t.maxUnitBlockPaperCount,l=(t.doi2paperBlockPos,t.controlIsActive),f=t.currentSelected,p=t.setCurrentSelected,v=Object(c.useState)(0),g=Object(N.a)(v,2),b=g[0],O=g[1],x=Object(c.useState)(0),m=Object(N.a)(x,2),C=m[0],T=m[1];Object(c.useEffect)((function(){var t=document.querySelector("#unit-svg");O(t.clientWidth-X-M),T(t.clientHeight-L-E)}),[]);for(var k,I=r.length>0?b/r.length-_-z:0,y=s.length>0?C/s.length-U-F:0,S=Math.floor(I>0?y/I:1),w=Math.ceil(Math.sqrt(u/S)),A=r.map((function(t,e){var n=Math.max.apply(Math,Object(d.a)(s.map((function(e,n){return Object(D.get)(o,[t,e],0)})))),i=Math.ceil(Math.sqrt(u/S));return n>u&&(i+=1),i})),Y=[0],J=[0],W=1;W<r.length;W++)Y.push(Y[W-1]+A[W-1]);k=(b-(_+z)*r.length)/(Y[Y.length-1]+A[A.length-1]);for(var H=1;H<r.length;H++)J.push(Y[H]*k+(_+z)*H);var K=h.c().domain([0,100]).range([.25,.8]),V=e.map((function(t){var e={};e.oriData=Object(j.d)(t),e.BlockIndexX=r.indexOf(t[n]),e.BlockIndexY=s.indexOf(t[a]);var i,c=t.DOI;return e.doi=c,e.circleIndexX=t.unitIndex%A[e.BlockIndexX],e.circleIndexY=Math.floor(t.unitIndex/A[e.BlockIndexX]),e.cx=X+e.BlockIndexX*(I+_+z)+(e.circleIndexX+.5)*k,e.cy=L+e.BlockIndexY*(y+U+F)+(e.circleIndexY+.5)*k,e.cx=X+J[e.BlockIndexX]+(e.circleIndexX+.5)*k,e.citationGrey=(i=t.CitationCount,h.b(K(i))),e.activeColors=t.colors,e.colors=e.activeColors.length>0?e.activeColors:[e.citationGrey],e.opacity=l?e.activeColors.length>0?.8:.4:.8,e.title=t.Title,e})),q=r.map((function(t,e){return{value:t,x:X+J[e]+A[e]*k/2,y:.8*L}})),G=s.map((function(t,e){return{value:t,x:.35*X,y:L+(y+U+F)*e}})),R=function(t){console.log("click",t),p(t)};return Object(i.jsx)("div",{className:"unit-view",children:Object(i.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",children:[Object(i.jsx)("g",{id:"units",children:k>0&&V.map((function(t,e){return Object(i.jsx)(B,{cx:t.cx,cy:t.cy,r:k/2.4,doi:t.doi,colors:t.colors,opacity:t.opacity,handleClick:R,isSelect:f===t.doi,title:t.title},e)}))}),Object(i.jsx)("g",{id:"x-label",children:k>0&&q.map((function(t){return Object(i.jsx)("text",{x:t.x,y:t.y,textAnchor:"middle",fontSize:1.6*k,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))}),Object(i.jsx)("g",{id:"y-label",children:k>0&&G.map((function(t){return Object(i.jsx)("text",{transform:"translate(".concat(t.x,", ").concat(t.y,") rotate(90)"),fontSize:1.6*k,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))})]})})})),W=(n(182),n(195)),H=n(127),K=n(67),V=n(189),q=n(193),G=n(194),R=Object(S.a)((function(){var t=P(),e=t.currentSelectedPaper,n=t.setPaper,c=e,a=Object(D.get)(c,"DOI",""),r=[{title:"Public Tags",value:"publicTags",initTags:Object(D.get)(c,"publicTags",[])},{title:"Private Tags",value:"privateTags",initTags:Object(D.get)(c,"privateTags",[])}];return Object(i.jsx)("div",{className:"detail-view",children:c&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"detail-title",children:c.Title}),Object(i.jsxs)("div",{className:"detail-authors",children:[Object(D.get)(c,"authors",[]).join("; ")," (",c.Year,")"]}),Object(i.jsxs)("div",{className:"detail-edit-tags",children:[Object(i.jsxs)("div",{className:"detail-edit-read",children:[Object(i.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(i.jsx)(W.a,{size:"small",checkedChildren:Object(i.jsx)(H.a,{}),unCheckedChildren:Object(i.jsx)(K.a,{}),defaultChecked:Object(D.get)(c,"read",!1),onChange:function(t){n(a,"read",t)}})]}),r.map((function(t){return Object(i.jsx)(Q,{title:t.title,initTags:t.initTags,handleChangeTags:function(e){return function(t,e){a&&n(a,t,e)}(t.value,e)}},t.value)}))]}),Object(i.jsxs)("div",{className:"detail-attrs",children:[Object(i.jsx)(Z,{paper:c,label:"AuthorKeywords"}),Object(i.jsx)(Z,{paper:c,label:"DOI"}),Object(i.jsx)(Z,{paper:c,label:"AuthorAffiliation"}),Object(i.jsx)(Z,{paper:c,label:"Abstract"})]})]})},a)})),Z=function(t){var e=t.paper,n=t.label;return Object(i.jsxs)("div",{className:"detail-attr",children:[Object(i.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(i.jsx)("div",{className:"detail-content",children:Object(D.get)(e,n,"")})]})},Q=function(t){var e=t.title,n=t.initTags,a=t.handleChangeTags,r=Object(c.useState)(n),s=Object(N.a)(r,2),o=s[0],u=s[1],l=function(t){a(t),u(t)},h=Object(c.useState)(-1),j=Object(N.a)(h,2),f=j[0],p=j[1],v=Object(c.useRef)(),g=Object(c.useState)(""),b=Object(N.a)(g,2),O=b[0],x=b[1],m=function(){var t=Object(d.a)(o);t[f]=O,l(t),p(-1),x("")},C=Object(c.useState)(""),T=Object(N.a)(C,2),k=T[0],I=T[1],y=function(){k&&o.indexOf(k)<0&&(l([].concat(Object(d.a)(o),[k])),A(!1),I(""))},P=Object(c.useState)(!1),S=Object(N.a)(P,2),w=S[0],A=S[1];return Object(i.jsxs)("div",{className:"detail-edit-tag",children:[Object(i.jsxs)("div",{className:"detail-edit-title",children:[e,":"]}),Object(i.jsx)("div",{className:"detail-edit-tags",children:Object(i.jsxs)(i.Fragment,{children:[o.map((function(t,e){return f===e?Object(i.jsx)(V.a,{size:"small",className:"tag-input",value:O,onchange:function(t){return x(t.target.value)},onBlur:m,onPressEnter:m},t):Object(i.jsx)(q.a,{className:"edit-tag",closable:!0,onClose:function(){return e=t,void l(o.filter((function(t){return t!==e})));var e},children:Object(i.jsx)("span",{children:t})},t)})),w&&Object(i.jsx)(V.a,{ref:v,type:"text",size:"small",className:"tag-input",value:k,onChange:function(t){return I(t.target.value)},onBlur:y,onPressEnter:y}),!w&&Object(i.jsxs)(q.a,{className:"site-tag-plus",onClick:function(){A(!0)},children:[Object(i.jsx)(G.a,{})," New Tag"]})]})})]})},$=(n(184),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu"]),tt=n(191),et=tt.a.Option,nt=function(){var t=P();return Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("div",{className:"title",children:"Paper Management System"}),Object(i.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(i.jsx)(tt.a,{size:"small",onChange:function(e){t.setUserId(e)},style:{width:130},placeholder:"Set User",children:$.map((function(t){return Object(i.jsx)(et,{value:t,children:t},t)}))})]})]})};var it=function(){return Object(i.jsx)(y,{children:Object(i.jsx)(ct,{})})},ct=function(){var t=P();return Object(c.useEffect)((function(){(function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a("data.csv");case 2:n=e.sent,t.setPapers(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(i.jsxs)("div",{className:"view-container",children:[Object(i.jsx)("div",{className:"header-container",children:Object(i.jsx)(nt,{})}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsxs)("div",{className:"control-main-container",children:[Object(i.jsx)("div",{className:"control-view-container",children:Object(i.jsx)(w,{})}),Object(i.jsx)("div",{className:"unit-view-container",children:Object(i.jsx)(J,{})})]}),Object(i.jsx)("div",{className:"detail-view-container",children:Object(i.jsx)(R,{})})]})]})},at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,196)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),i(t),c(t),a(t),r(t)}))};n(185);s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(it,{})}),document.getElementById("root")),at()}},[[186,1,2]]]);
//# sourceMappingURL=main.a5379571.chunk.js.map