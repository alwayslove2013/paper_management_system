(this.webpackJsonppaper_management_system=this.webpackJsonppaper_management_system||[]).push([[0],{106:function(t,e,n){},107:function(t,e,n){},111:function(t,e,n){},112:function(t,e,n){},113:function(t,e,n){},114:function(t,e,n){},116:function(t,e,n){},117:function(t,e,n){},118:function(t,e,n){},119:function(t,e,n){},120:function(t,e,n){},121:function(t,e,n){},122:function(t,e,n){},123:function(t,e,n){},124:function(t,e,n){},125:function(t,e,n){},130:function(t,e,n){"use strict";n.r(e);var i=n(1),a=n(0),r=n.n(a),c=n(30),o=n.n(c),s=(n(106),n(107),n(14)),l=n(21),u=n(15),h=n.n(u),d=n(45),p=n(7),g=n(27),f=n(87),j=n.n(f),b="http://vis.pku.edu.cn/vis4vis/",v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=b+t+(t.includes("?")?"&":"?")+j.a.stringify(e);return new Promise((function(t,e){fetch(n).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},m=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("get_papers");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v("get_public_tags");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,t.next=3,v("get_private_tags",{uid:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(t){var e=t.uid,n=t.pid,i=t.paper,a=i.privateTags,r=i.read;return e&&v("set_private_tags",{uid:e,pid:n,tags:[].concat(Object(l.a)(a),[r&&"read"]).filter((function(t){return t})).join(",")}),"OK"};var C=function(t){var e,n=t.dois,i=t.uid,a=t.num_topics;return e={dois:n,num_topics:void 0===a?3:a,uid:i},fetch(b+"get_lda_results",{body:JSON.stringify(e),headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},method:"POST"}).then((function(t){return t.json()}))},P=n(28),T=15,N=35,S=8,k=25,w=function(t,e,n){return t=t.slice(0,n),e.forEach((function(n){if(!t.includes(n)){for(var i=t.length-1;e.includes(t[i]);)i-=1;t[i]=n}})),t},H=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={};t.forEach((function(t){t.forEach((function(t){t&&(t in n?n[t]+=1:n[t]=1)}))}));var i=[];for(var a in n)i.push({item:a,count:n[a]});return i.sort((function(t,e){return e.count-t.count})),i.slice(0,e).map((function(t){return t.item}))};var L={publicTags:function(t){var e=t.pid,n=t.paper.publicTags;return v("set_public_tags",{pid:e,tags:n.join(",")}),"OK"},privateTags:y,read:y},A=function(){return{currentPage:"Management",setCurrentPage:function(){this.currentPage=window.location.hash.includes("/analysis")?"Analysis":"Management"},tooltipX:500,tooltipY:500,setTooltipPos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.tooltipX=t,this.tooltipY=e},titleSearch:"",setTitleSearch:function(t){this.titleSearch=t.toLocaleLowerCase()},get searchPaperDoiSet(){var t=this,e=this.titleSearch?this.papers.filter((function(e){return e.title.toLocaleLowerCase().indexOf(t.titleSearch)>-1})).map((function(t){return t.doi})):[];return new Set(e)},papers:[],commonAuthors:[],commonCountries:[],commonPublicTags:[],commonPrivateTags:[],initPapers:function(){var t=this;return Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.papers.length){e.next=5;break}return e.next=3,m();case 3:n=e.sent,t.setPapers(n);case 5:case"end":return e.stop()}}),e)})))()},setPapers:function(t){var e=arguments,n=this;return Object(d.a)(h.a.mark((function i(){var a,r;return h.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:"citationCount",console.log("==> \u521d\u59cb\u5316Papers"),r={},t.forEach((function(t){t.privateTags=[],t.projection=[5,5],t.topics=[],t.read=!1,t.publicTags=[],t.colors=[],t.innerColors=[],t.outerColors=[],t.internalRefList=[],t.internalCitedList=[],t.topics=[[0,1]],t.isHighlight=!1,t.indexByYear=0,t.refList=t.refList.toLowerCase().split(/[,;]/).map((function(t){return t.trim()})),t.doi=t.doi.toLowerCase(),r[t.doi]=t,t.authors=t.authors.split(";").map((function(t){return t.trim().replace(/\{(.*)\}/,"$1")})),t.countries=t.countries.split(";").map((function(t){var e=t.trim().split(" ").map((function(t){return t.trim()})).filter((function(t){return t}));return 0===e.length?"":e[e.length-1].toLowerCase().replace(/^\w/,(function(t){return t.toUpperCase()}))})).filter((function(t){return t})),t.keywords=t.keywords.split(/[;,]/).map((function(t){return t.trim().toLowerCase()}))})),t.forEach((function(t){t.refList.forEach((function(e){e in r&&(r[e].internalCitedList.push(t.doi),t.internalRefList.push(e))}))})),n.commonAuthors=H(t.map((function(t){return t.authors})),30),n.commonCountries=H(t.map((function(t){return t.countries})),30),t.sort((function(t,e){return e[a]-t[a]})),n.computedPosition(t),i.next=11,n.initPublicTags(t);case 11:Object(g.d)((function(){n.papers=t,n.initPrivateTags()}));case 12:case"end":return i.stop()}}),i)})))()},setPaper:function(t,e,n){var i=this.papers.find((function(e){return e.doi===t}));i[e]=n,console.log("==> \u66f4\u65b0paper\u6570\u636e by doi:",t,e,n),L[e]({uid:this.userId,pid:t,paper:Object(g.e)(i)}),this.doiUpdateColors(t)},unitXAttr:"year",get unitXAttrList(){var t=this,e=new Set;this.papers.forEach((function(n){e.add(n[t.unitXAttr])}));var n=Array.from(e);return n.sort((function(t,e){return e-t})),n},unitYAttr:"conferenceName",unitYAttrList:["SciVis","InfoVis","EuroVis","VAST","PacificVis","Others"],maxUnitBlockPaperCount:0,unitBlockCount:{},computedPosition:function(t){var e=this,n={};t.forEach((function(t){var i=t[e.unitXAttr],a=e.unitYAttrList.includes(t[e.unitYAttr])?t[e.unitYAttr]:e.unitYAttrList[e.unitYAttrList.length-1];i in n||(n[i]={}),a in n[i]||(n[i][a]=0),t.unitIndex=n[i][a],n[i][a]+=1})),this.maxUnitBlockPaperCount=.6*Math.max.apply(Math,Object(l.a)(t.map((function(t){return t.unitIndex})))),this.unitBlockCount=n},initPublicTags:function(t){var e=this;return Object(d.a)(h.a.mark((function n(){var i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x();case 2:i=n.sent,t.forEach((function(t){t.doi in i&&(t.publicTags=i[t.doi].filter((function(t){return t})))})),Object(g.d)((function(){e.commonPublicTags=H(Object.values(i),30)}));case 5:case"end":return n.stop()}}),n)})))()},initPrivateTags:function(){var t=this;return Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({uid:t.userId});case 2:n=e.sent,Object(g.d)((function(){t.papers.forEach((function(t){if(t.doi in n){var e=n[t.doi].indexOf("read");e>-1&&(t.read=!0,n[t.doi].splice(e,1)),t.privateTags=n[t.doi].filter((function(t){return t}))}})),t.commonPrivateTags=H(Object.values(n),30)})),t.batchUpdateColors();case 5:case"end":return e.stop()}}),e)})))()},userId:"",setUserId:function(t){t!==this.userId&&(this.userId=t,console.log("==> change userId:",this.userId),localStorage.setItem("paper-management-system-userId",t),t&&this.initPrivateTags())},initUserId:function(){if(0===this.userId.length){var t=localStorage.getItem("paper-management-system-userId");t&&this.setUserId(t)}},get controlTagNameList(){return this.generateCategory(10)},get anaCategories(){var t=w(H(this.analysisPapers.map((function(t){return t.countries})),30),["Japan","Korea"],50),e=H(this.analysisPapers.map((function(t){return t.authors})),30),n=w(this.commonPrivateTags,[],50),i=w(this.commonPublicTags,[],50);return[{label:"Country",value:"countries",list:t,highlightType:"outer"},{label:"Author",value:"authors",list:e,highlightType:"inner"},{label:"Keywords",value:"keywords",list:w(H(this.analysisPapers.map((function(t){return t.keywords})),30),[],50),highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:n,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:i,highlightType:"inner"}]},get commonKeywords(){return H(this.papers.map((function(t){return t.keywords})),30)},generateCategory:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=w(this.commonCountries,["Japan","Korea"],t),i=w(this.commonAuthors,["Xiaoru Yuan"],t),a=w(this.commonPrivateTags,e?["read"]:[],t),r=w(this.commonPublicTags,[],t),c=w(this.commonKeywords,[],t);return[{label:"Country",value:"countries",list:n,highlightType:"outer"},{label:"Author",value:"authors",list:i,highlightType:"inner"},{label:"Keywords",value:"keywords",list:c,highlightType:"inner"},{label:"Private Tag",value:"privateTags",list:a,highlightType:"inner"},{label:"Public Tag",value:"publicTags",list:r,highlightType:"inner"}]},get category2highlightType(){var t={};return this.controlTagNameList.forEach((function(e){t[e.value]=e.highlightType})),t},activeTags:{countries:[],authors:[],privateTags:[],publicTags:[],keywords:[]},get controlIsActive(){var t=!1;for(var e in this.activeTags)this.activeTags[e].length>0&&(t=!0);return t},get isUnitOuterHighlight(){var t=this,e=this.controlTagNameList.filter((function(t){return"outer"===t.highlightType})).map((function(t){return t.value})),n=!1;return e.forEach((function(e){t.activeTags[e].length>0&&(n=!0)})),n},tag2color:{},colorUse:{},setTagColor:function(t,e){console.log("==> \u8bbe\u7f6etag\u989c\u8272:",e,t);var n="".concat(e,"---").concat(t);if(n in this.tag2color)this.colorUse[this.tag2color[n]]=!1,delete this.tag2color[n],this.activeTags[e]=Object(l.a)(this.activeTags[e]).filter((function(e){return e!==t}));else{this.activeTags[e].push(t);for(var i=0,a=p.schemeTableau10[i];this.colorUse[a];){if(10===(i+=1)){a="black";break}a=p.schemeTableau10[i]}this.tag2color[n]=a,this.colorUse[a]=!0}this.batchUpdateColors()},batchUpdateColors:function(){var t=this;this.papers.forEach((function(e){e.colors=[],e.innerColors=[],e.outerColors=[],t.updateColor(e)}))},doiUpdateColors:function(t){var e=this.papers.find((function(e){return e.doi===t}));e.colors=[],e.innerColors=[],e.outerColors=[],this.updateColor(e)},updateColor:function(t){var e=this;this.activeTags.privateTags.indexOf("read")>-1&&t.read&&(t.colors.push(this.tag2color["privateTags---read"]),t.innerColors.push(this.tag2color["privateTags---read"]));var n=function(n){var i=e.activeTags[n];"inner"===e.category2highlightType[n]?i.forEach((function(i){if(t[n].indexOf(i)>-1){var a="".concat(n,"---").concat(i);t.innerColors.push(e.tag2color[a])}})):i.forEach((function(i){if(t[n].indexOf(i)>-1){var a="".concat(n,"---").concat(i);t.outerColors.push(e.tag2color[a])}})),i.forEach((function(i){if(t[n].indexOf(i)>-1){var a="".concat(n,"---").concat(i);t.colors.push(e.tag2color[a])}}))};for(var i in this.activeTags)n(i)},maxCitationCount:200,currentSelected:"",currentSelectedRefSet:new Set,currentSelectedCitedSet:new Set,isSelected:!1,setCurrentSelected:function(t){console.log("==> \u9009\u4e2d\u6587\u7ae0:",t),this.currentSelected=t,this.isSelected=!!t;var e=this.papers.find((function(e){return e.doi===t}));this.currentSelectedRefSet=new Set(e.internalRefList),this.currentSelectedCitedSet=new Set(e.internalCitedList)},cancelSelect:function(){console.log("==> \u70b9\u51fb\u80cc\u666f\uff0c\u53d6\u6d88\u8bba\u6587\u9009\u4e2d\u72b6\u6001"),this.isSelected=!1},get currentSelectedPaper(){var t=this;return this.papers.find((function(e){return e.doi===t.currentSelected}))},get analysisPapers(){return this.controlIsActive?this.papers.filter((function(t){return t.innerColors.length>0||t.outerColors.length>0})):this.papers},get anaTimeData(){var t=this;return this.unitXAttrList.map((function(t){return+t})).sort().map((function(e){return{x:e,all:t.analysisPapers.filter((function(t){return+t.year===e})).length,highlight:t.anaHighPapers.filter((function(t){return+t.year===e})).length}}))},get anaTagViewData(){var t=this;return this.anaCategories.map((function(e){return{label:e.label,value:e.value,data:e.list.map((function(n){return"read"===n?{label:"read",all:t.analysisPapers.filter((function(t){return t.read})).length,highlight:t.anaHighPapers.filter((function(t){return t.read})).length}:{label:n,all:t.analysisPapers.filter((function(t){return t[e.value].includes(n)})).length,highlight:t.anaHighPapers.filter((function(t){return t[e.value].includes(n)})).length}}))}}))},anaFilterType:"none",setAnaFilterType:function(t){console.log("setAnaFilterType",t),this.anaFilterType=t},clearBrushTrigger:function(){},setClearBrushTrigger:function(t){this.clearBrushTrigger=t},anaHighCate:"",anaHighTag:"",anaHighTopic:"",anaHighPapers:[],setAnaHighPapersByTag:function(t){var e=t.anaHighCate,n=t.anaHighTag;console.log("setAnaHighPapersByTag",e,n),this.clearBrushTrigger(),this.anaHighCate===e&&this.anaHighTag===n?(this.anaHighTag="none",this.setAnaFilterType("none"),this.anaHighPapers=this.analysisPapers):(this.anaHighCate=e,this.anaHighTag=n,this.setAnaFilterType(e),this.anaHighPapers=this.analysisPapers.filter((function(t){return Object(P.get)(t,e,[]).includes(n)})))},setAnaHighPapersByTopic:function(t){console.log("setAnaHighPapersByTopic",t),this.clearBrushTrigger(),"topic"===this.anaFilterType&&this.anaHighTopic===t?(this.anaHighTopic="none",this.anaHighEntityTopic=-1,this.setAnaFilterType("none"),this.anaHighPapers=this.analysisPapers):(this.anaHighTopic=t,this.anaHighEntityTopic=-1,this.anaHighTag="topic ".concat(t+1),this.setAnaFilterType("topic"),this.anaHighPapers=this.analysisPapers.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})))},setAnaHighPapersByYear:function(t){console.log("setAnaHighPapersByYear",t);var e=Object(s.a)(t,2),n=e[0],i=e[1];this.anaHighTag="".concat(n,"-").concat(i),this.anaHighPapers=this.analysisPapers.filter((function(t){return+t.year>=n&&+t.year<=i}))},anaSelectHighlightPaperDoi:"",setAnaSelectHighlightPaperDoi:function(t){console.log("setAnaSelectHighlightPaper",t),this.anaSelectHighlightPaperDoi===t?(console.log("reset anaSelectHighlightPaperDoi"),this.anaSelectHighlightPaperDoi=""):this.anaSelectHighlightPaperDoi=t},get anaSelectHighlightPaper(){var t=this;return this.analysisPapers.find((function(e){return e.doi===t.anaSelectHighlightPaperDoi}))||{}},topicColorScale:p.schemeTableau10.slice(1),defaultHighColor:p.schemeTableau10[0],drawProjectionFlag:!1,resetProjectionFlag:function(){console.log("reset drawProjectionFlag"),this.drawProjectionFlag=!1},num_topics:5,setNumTopics:function(t){this.num_topics=t,this.tryLda()},topics_detail:[],tryLda:function(){var t=this,e=this.analysisPapers.map((function(t){return t.doi})),n=this.userId,i=this.num_topics;console.log("try lda Start!",i),C({dois:e,uid:n,num_topics:i}).then((function(e){console.log("try lda OK!",e),Object(g.d)((function(){var n=e.paper_lda_res,i=e.topics_detail,a=e.code;"success"===(void 0===a?"success":a)&&(t.analysisPapers.forEach((function(t){t.doi in n?(t.projection=n[t.doi].projection,t.topics=n[t.doi].topics.sort((function(t,e){return e[1]-t[1]}))):(t.projection=[5,5],t.topics=[])})),t.drawProjectionFlag=!0,t.topics_detail=i,t.anaHighPapers=t.analysisPapers)}))}))},anaHighEntityTopic:-1,setAnaHighEntityTopic:function(t){this.anaHighEntityTopic===t?(console.log("setAnaHighEntityTopic",!1),this.anaHighEntityTopic=-1):(console.log("setAnaHighEntityTopic",t),this.anaHighEntityTopic=t)},anaHighEntityCitePaperDois:[],anaHighEntityCitedPaperDois:[],anaHighTopicIndenpentPaperDois:[],setHighEntityLinkData:function(t,e,n){console.log("citePaperDois",t),console.log("citedPaperDois",e),this.anaHighEntityCitePaperDois=t,this.anaHighEntityCitedPaperDois=e,this.anaHighTopicIndenpentPaperDois=n}}},_=n(132),I=r.a.createContext(null),E=function(t){var e=t.children,n=Object(_.a)(A);return Object(i.jsx)(I.Provider,{value:n,children:e})},D=function(){var t=r.a.useContext(I);if(!t)throw new Error("no Provider");return t},Y=n(72),B=n(22),X=(n(111),n(138)),F=(n(112),n(74)),M=function(){var t=D(),e=Object(P.debounce)((function(e){t.setTitleSearch(e.target.value)}),200);return Object(i.jsxs)("div",{className:"search-view",children:[Object(i.jsx)("div",{className:"search-view-input",children:Object(i.jsx)("input",{onInput:e})}),Object(i.jsx)("div",{className:"search-view-icon",children:Object(i.jsx)(F.a,{})})]})},U=Object(X.a)((function(){var t=D().controlTagNameList;return Object(i.jsxs)("div",{className:"control-view",children:[Object(i.jsxs)("div",{className:"control-item",children:[Object(i.jsx)("div",{className:"control-item-title",children:"Title Search"}),Object(i.jsx)("div",{className:"control-item-search-input",children:Object(i.jsx)(M,{searchAttr:"title"})})]}),t.map((function(t){return Object(i.jsx)(W,{tagData:t},t.label)}))]})})),W=Object(X.a)((function(t){var e=t.tagData,n=D(),r=n.tag2color,c=n.papers,o=Object(a.useState)([]),u=Object(s.a)(o,2),h=u[0],d=u[1];Object(a.useEffect)((function(){var t=Object.keys(r).filter((function(t){return t.split("---")[0]===e.value})).map((function(t){return t.split("---")[1]})).filter((function(t){return e.list.indexOf(t)>-1}));d(t)}),[]);var p=function(t){var i=Object(l.a)(h),a=i.indexOf(t);a>-1?(i.splice(a,1),d(i)):(i.push(t),d(i)),n.setTagColor(t,e.value)};return Object(i.jsxs)("div",{className:"control-item",children:[Object(i.jsx)("div",{className:"control-item-title",children:e.label}),Object(i.jsx)("div",{className:"control-item-options",children:e.list.map((function(t){return Object(i.jsx)(z,{value:t,clickOption:p,isSelect:h.indexOf(t)>-1&&r["".concat(e.value,"---").concat(t)],count:h.indexOf(t)>-1?c.filter((function(n){return n[e.value].includes(t)})).length:0},t)}))})]})})),z=function(t){var e=t.value,n=t.clickOption,a=t.isSelect,r=t.count,c=void 0===r?0:r,o=["control-item-option",a&&"option-active"].filter((function(t){return t})).join(" "),s=a?{background:a,border:"1px solid ".concat(a)}:{},l="Usa"===e?"USA":e;return Object(i.jsxs)("div",{className:o,onClick:function(){return n(e)},style:s,children:[l," ",a&&"(".concat(c,")")]})},K=(n(113),r.a.memo((function(t){var e=t.cx,n=t.cy,a=t.r,r=t.opacity,c=t.doi,o=t.handleClick,s=t.title,l=t.innerColors,u=t.outerColors,h=t.isBackgroundActive,d=t.handleHover,p=t.handleHoverOut,g=function(t){return e+Math.sin(t)*a},f=function(t){return n+Math.cos(t)*a},j=2*Math.PI/l.length,b=l.map((function(t,e){return{startX:g(j*e),startY:f(j*e),endX:g(j*(e+1)),endY:f(j*(e+1))}})),v=1.5*a,m=function(t){return e+Math.sin(t)*v},x=function(t){return n+Math.cos(t)*v},O=2*Math.PI/u.length,y=u.map((function(t,e){return{startX:m(O*e),startY:x(O*e),endX:m(O*(e+1)),endY:x(O*(e+1))}}));return Object(i.jsxs)("g",{id:"unit-g",onClick:function(t){return o(t,c)},cursor:"pointer",onMouseEnter:function(){return d(c)},onMouseLeave:function(){return p()},children:[Object(i.jsx)("title",{children:s}),h&&Object(i.jsxs)("g",{id:"unit-background-g",children:[Object(i.jsx)("rect",{x:e-1.6*a,y:n-1.6*a,width:3.2*a,height:3.2*a,fill:"#fc8d62",rx:.4*a,ry:.4*a}),Object(i.jsx)("circle",{cx:e,cy:n,r:1.3*a,fill:"#eee"})]}),Object(i.jsxs)("g",{id:"unit-border-g",children:[y.length>1?y.map((function(t,a){return Object(i.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(v," ").concat(v," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),fill:u[a]},a)})):Object(i.jsx)("circle",{cx:e,cy:n,r:v,fill:u.length>0?u[0]:"none"}),Object(i.jsx)("circle",{cx:e,cy:n,r:1.1*a,fill:"white",opacity:y.length>0?1:0})]}),Object(i.jsx)("g",{id:"unit-sector-g",opacity:r,children:b.length>1?b.map((function(t,r){return Object(i.jsx)("path",{d:"M ".concat(e," ").concat(n,"\n              L ").concat(t.startX," ").concat(t.startY,"\n              A ").concat(a," ").concat(a," 0 0 0 ").concat(t.endX," ").concat(t.endY,"\n              Z\n              "),stroke:"white",fill:l[r],strokeWidth:.1*a},r)})):Object(i.jsx)("circle",{cx:e,cy:n,r:a,fill:l[0]})})]})}))),R=function(t){var e=t.isShow,n=t.paper,a=t.paperCircle,r=t.containerWidth,c=t.containerHeight,o=a.cx/r,s=.25*r,l=a.cx-s*o,u=a.cy+15,h=a.cy+200>c?"translateY(-150%)":"",d={transform:"translate(".concat(l,"px,").concat(u,"px) ").concat(h),opacity:e?1:0};return Object(i.jsxs)("div",{className:"unit-tooltip",style:d,children:[Object(i.jsx)("div",{className:"unit-tooltip-title",children:Object(P.get)(n,"title","")}),Object(i.jsxs)("div",{className:"unit-tooltip-authors",children:[Object(P.get)(n,"authors",[]).join("; ")," (",n.year,")"]})]})},J=30,V=40,Z=15,q=1,G=2,$=3,Q=3,tt=1,et=Object(X.a)((function(){var t=D(),e=t.papers,n=t.unitXAttr,r=t.unitYAttr,c=t.unitXAttrList,o=t.unitYAttrList,u=t.unitBlockCount,h=t.maxUnitBlockPaperCount,d=t.controlIsActive,f=t.isUnitOuterHighlight,j=t.currentSelected,b=t.setCurrentSelected,v=t.isSelected,m=t.cancelSelect,x=t.currentSelectedRefSet,O=t.currentSelectedCitedSet,y=t.searchPaperDoiSet,C=Object(a.useState)(0),T=Object(s.a)(C,2),N=T[0],S=T[1],k=Object(a.useState)(0),w=Object(s.a)(k,2),H=w[0],L=w[1];Object(a.useEffect)((function(){var t=document.querySelector("#unit-svg");S(t.clientWidth-V-Z),L(t.clientHeight-J-q)}),[]);for(var A,_=c.length>0?N/c.length-$-Q:0,I=o.length>0?H/o.length-G-tt:0,E=Math.floor(_>0?I/_:1),Y=Math.ceil(Math.sqrt(h/E)),B=c.map((function(t,e){var n=Math.max.apply(Math,Object(l.a)(o.map((function(e,n){return Object(P.get)(u,[t,e],0)})))),i=Math.ceil(Math.sqrt(h/E));return n>h&&(i+=1),i})),X=[0],F=[0],M=1;M<c.length;M++)X.push(X[M-1]+B[M-1]);A=(N-($+Q)*c.length)/(X[X.length-1]+B[B.length-1]);for(var U=1;U<c.length;U++)F.push(X[U]*A+($+Q)*U);var W=p.scaleLinear().domain([0,100]).range([.25,.8]),z=e.map((function(t){var e={};e.oriData=Object(g.e)(t),e.BlockIndexX=c.indexOf(t[n]),e.BlockIndexY=o.includes(t[r])?o.indexOf(t[r]):o.length-1;var i,a=t.doi;return e.doi=a,e.circleIndexX=t.unitIndex%B[e.BlockIndexX],e.circleIndexY=Math.floor(t.unitIndex/B[e.BlockIndexX]),e.cx=V+e.BlockIndexX*(_+$+Q)+(e.circleIndexX+.5)*A,e.cy=J+e.BlockIndexY*(I+G+tt)+(e.circleIndexY+.5)*A,"2004"===t.year&&e.BlockIndexY>0&&(e.cy+=50-10*e.BlockIndexY),e.cx=V+F[e.BlockIndexX]+(e.circleIndexX+.5)*A,e.citationGrey=(i=t.citationCount,p.interpolateGreys(W(i))),e.activeColors=t.innerColors,e.innerColors=e.activeColors.length>0?e.activeColors:[e.citationGrey],e.outerColors=["none"],f?e.outerColors=t.outerColors:v?(j===t.doi&&(e.outerColors=["#d95f02"]),x.has(t.doi)&&(e.outerColors=["#1b9e77"]),O.has(t.doi)&&(e.outerColors=["#7570b3"])):e.outerColors=["none"],e.opacity=d?t.innerColors.length+t.outerColors.length>0?.8:.4:.8,e.title=t.Title,v?(j===t.doi&&(e.borderColor="#d95f02"),x.has(t.doi)&&(e.borderColor="#1b9e77"),O.has(t.doi)&&(e.borderColor="#7570b3")):e.borderColor="none",e.isBackgroundActive=y.has(t.doi),e})),et=c.map((function(t,e){return{value:t,x:V+F[e]+B[e]*A/2,y:.8*J}})),nt=o.map((function(t,e){return{value:t,x:.35*V,y:J+(I+G+tt)*e}})),it=function(t,e){t.stopPropagation(),b(e)},at=Object(a.useState)(""),rt=Object(s.a)(at,2),ct=rt[0],ot=rt[1],st=ct.length>0?e.find((function(t){return t.doi===ct})):{},lt=ct.length>0?z.find((function(t){return t.doi===ct})):{},ut=function(t){console.log("===> hover",t),ot(t)},ht=function(){console.log("===> mouse leave"),ot("")};return Object(i.jsxs)("div",{className:"unit-view",children:[Object(i.jsxs)("svg",{id:"unit-svg",width:"100%",height:"100%",onClick:function(){m()},children:[Object(i.jsx)("g",{id:"units",children:A>0&&z.map((function(t,e){return Object(i.jsx)(K,{cx:t.cx,cy:t.cy,r:A/2.4,doi:t.doi,colors:t.colors,opacity:t.opacity,innerColors:t.innerColors,outerColors:t.outerColors,handleClick:it,borderOpacity:t.borderOpacity,borderColor:t.borderColor,title:t.title,isBackgroundActive:t.isBackgroundActive,handleHover:ut,handleHoverOut:ht},e)}))}),Object(i.jsx)("g",{id:"x-label",children:A>0&&et.map((function(t){return Object(i.jsx)("text",{x:t.x,y:t.y,textAnchor:"middle",fontSize:1.6*A,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))}),Object(i.jsx)("g",{id:"y-label",children:A>0&&nt.map((function(t){return Object(i.jsx)("text",{transform:"translate(".concat(t.x,", ").concat(t.y,") rotate(90)"),fontSize:1.6*A,fill:"rgb(78, 78, 78)",children:t.value},t.value)}))})]}),Object(i.jsx)(R,{isShow:ct.length>0,paper:st,containerWidth:N,containerHeight:H,paperCircle:lt})]})})),nt=(n(114),n(139)),it=n(99),at=n(58),rt=n(135),ct=n(140),ot=n(100),st=Object(X.a)((function(){var t=D(),e=t.currentSelectedPaper,n=t.setPaper,a=e;if(console.log("currentSelectedPaper",Object(g.e)(e)),!e)return Object(i.jsx)("div",{});var r=Object(P.get)(a,"doi",""),c=[{title:"Private Tags",value:"privateTags",initTags:Object(P.get)(a,"privateTags",[])},{title:"Public Tags",value:"publicTags",initTags:Object(P.get)(a,"publicTags",[])}];return Object(i.jsx)("div",{className:"detail-view",children:a&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"detail-title",children:a.title}),Object(i.jsxs)("div",{className:"detail-authors",children:[Object(P.get)(a,"authors",[]).join("; ")," (",a.year,")"]}),Object(i.jsxs)("div",{className:"detail-edit-tags",children:[Object(i.jsxs)("div",{className:"detail-edit-read",children:[Object(i.jsx)("div",{className:"detail-edit-title",children:"Read"}),Object(i.jsx)(nt.a,{size:"small",checkedChildren:Object(i.jsx)(it.a,{}),unCheckedChildren:Object(i.jsx)(at.a,{}),defaultChecked:Object(P.get)(a,"read",!1),onChange:function(t){n(r,"read",t)}})]}),c.map((function(t){return Object(i.jsx)(ut,{title:t.title,initTags:t.initTags,handleChangeTags:function(e){return function(t,e){r&&n(r,t,e)}(t.value,e)}},t.value)}))]}),Object(i.jsxs)("div",{className:"detail-attrs",children:[Object(i.jsxs)("div",{className:"detail-attr",children:[Object(i.jsx)("div",{className:"detail-key",children:"keywords:"}),Object(i.jsx)("div",{className:"detail-content",children:Object(P.get)(a,"keywords",[]).join("; ")})]}),Object(i.jsx)(lt,{paper:a,label:"doi"}),Object(i.jsx)(lt,{paper:a,label:"affiliation"}),Object(i.jsx)(lt,{paper:a,label:"abstract"})]})]})},r)})),lt=function(t){var e=t.paper,n=t.label;return Object(i.jsxs)("div",{className:"detail-attr",children:[Object(i.jsxs)("div",{className:"detail-key",children:[n,":"]}),Object(i.jsx)("div",{className:"detail-content",children:Object(P.get)(e,n,"")})]})},ut=function(t){var e=t.title,n=t.initTags,r=t.handleChangeTags,c=Object(a.useState)(n),o=Object(s.a)(c,2),u=o[0],h=o[1],d=function(t){r(t),h(t)},p=Object(a.useState)(-1),g=Object(s.a)(p,2),f=g[0],j=g[1],b=Object(a.useRef)(),v=Object(a.useState)(""),m=Object(s.a)(v,2),x=m[0],O=m[1],y=function(){var t=Object(l.a)(u);t[f]=x,d(t),j(-1),O("")},C=Object(a.useState)(""),P=Object(s.a)(C,2),T=P[0],N=P[1],S=function(){T&&u.indexOf(T)<0&&(d([].concat(Object(l.a)(u),[T])),L(!1),N(""))},k=Object(a.useState)(!1),w=Object(s.a)(k,2),H=w[0],L=w[1];return Object(i.jsxs)("div",{className:"detail-edit-tag",children:[Object(i.jsxs)("div",{className:"detail-edit-title",children:[e,":"]}),Object(i.jsx)("div",{className:"detail-edit-tags",children:Object(i.jsxs)(i.Fragment,{children:[u.map((function(t,e){return f===e?Object(i.jsx)(rt.a,{size:"small",className:"tag-input",value:x,onchange:function(t){return O(t.target.value)},onBlur:y,onPressEnter:y},t):Object(i.jsx)(ct.a,{className:"edit-tag",closable:!0,onClose:function(){return e=t,void d(u.filter((function(t){return t!==e})));var e},children:Object(i.jsx)("span",{children:t})},t)})),H&&Object(i.jsx)(rt.a,{ref:b,type:"text",size:"small",className:"tag-input",value:T,onChange:function(t){return N(t.target.value)},onBlur:S,onPressEnter:S}),!H&&Object(i.jsxs)(ct.a,{className:"site-tag-plus",onClick:function(){L(!0)},children:[Object(i.jsx)(ot.a,{})," New Tag"]})]})})]})},ht=function(){var t=D();return Object(a.useEffect)((function(){t.setCurrentPage(),t.initPapers(),t.initUserId()}),[]),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsxs)("div",{className:"control-main-container",children:[Object(i.jsx)("div",{className:"control-view-container",children:Object(i.jsx)(U,{})}),Object(i.jsx)("div",{className:"unit-view-container",children:Object(i.jsx)(et,{})})]}),Object(i.jsx)("div",{className:"detail-view-container",children:Object(i.jsx)(st,{})})]})},dt=(n(116),n(117),n(118),function(t){var e=t.svgId,n=Object(a.useState)({width:0,height:0}),i=Object(s.a)(n,2),r=i[0],c=i[1];return Object(a.useEffect)((function(){var t=p.select("#".concat(e)).node().getClientRects()[0];c(t)}),[e]),r}),pt=r.a.memo((function(t){var e=t.data,n=t.onInput,r=void 0===n?function(){}:n,c=t.onChange,o=void 0===c?function(){}:c,s=t.setClearBrushTrigger,l=void 0===s?function(){}:s,u=t.anaFilterType,h=void 0===u?"none":u,d=t.setAnaFilterType,g=void 0===d?function(){}:d,f=dt({svgId:"ana-time-line-svg"}),j=f.width,b=f.height,v=[p.min(e,(function(t){return t.x})),p.max(e,(function(t){return t.x}))];return Object(a.useEffect)((function(){r(v)}),[]),Object(a.useEffect)((function(){if(0!==e.length&&0!==j&&0!==b){var t=p.scaleBand().domain(e.map((function(t){return t.x}))).range([T,j-N]).padding(.2),n=p.scaleLinear().domain([0,p.max(e,(function(t){return t.all}))]).nice().range([b-k,S]),i=p.select("#ana-time-line-svg"),a=i.append("g").classed("non-active-bars",!0).selectAll("rect").data(e).join("rect").attr("x",(function(e){return e.rectX=t(e.x)})).attr("y",(function(t){return n(t.all)})).attr("height",(function(t){return n(0)-n(t.all)})).attr("width",t.bandwidth());i.append("g").classed("active-bars",!0).classed("highlight-bars",!0);i.append("g").attr("class","x-axis").call((function(e){return e.attr("transform","translate(0, "+(b-k)+")").call(p.axisBottom(t).tickValues(p.range(v[0],v[1],5)).tickSizeOuter(0))})),i.append("g").attr("class","y-axis").call((function(t){return t.attr("transform","translate(".concat(j-N,",0)")).call(p.axisRight(n).ticks(6))}));var c=p.brushX().extent([[T,.3*S],[j-N,b-k]]).on("start",(function(){g("year")})).on("brush",(function(n){var i=n.selection;a.classed("active-bars",(function(e){return e.rectX+t.bandwidth()>i[0]&&e.rectX<i[1]}));var c=e.filter((function(e){return e.rectX+t.bandwidth()>i[0]&&e.rectX<i[1]})).map((function(t){return t.x}));c.length>=1?r([c[0],c[c.length-1]]):r(v)})).on("end",(function(n){var i=n.selection;if(i){var c=e.filter((function(e){return e.rectX+t.bandwidth()>i[0]&&e.rectX<i[1]})).map((function(t){return t.x}));c.length>=1?o([c[0],c[c.length-1]]):o(v)}else a.classed("active-bars",!1),r(v),g("none"),o(v)}));i.call(c),l((function(){p.brush().move(i),a.classed("active-bars",!1),r(v)}))}}),[f]),Object(a.useEffect)((function(){if(0!==j&&0!==b){var t=p.select("#ana-time-line-svg").select(".highlight-bars");if("year"===h||"none"===h)t.selectAll("rect").attr("height",0);else{var n=p.scaleBand().domain(e.map((function(t){return t.x}))).range([T,j-N]).padding(.2),i=p.scaleLinear().domain([0,p.max(e,(function(t){return t.all}))]).nice().range([b-k,S]);t.selectAll("rect").data(e).join("rect").attr("x",(function(t){return n(t.x)})).attr("y",(function(t){return i(t.highlight)})).attr("height",(function(t){return i(0)-i(t.highlight)})).attr("width",n.bandwidth())}}}),[e,h]),Object(i.jsx)("svg",{id:"ana-time-line-svg",width:"100%",height:"100%"})})),gt=n(78),ft=(n(119),n(133)),jt=ft.a.TabPane,bt=Object(a.memo)((function(t){var e=t.dataSource,n=t.anaFilterType,a=t.onChange;return Object(i.jsx)(ft.a,{children:e.map((function(t){return Object(i.jsx)(jt,{tab:t.label,children:Object(i.jsx)(vt,Object(gt.a)(Object(gt.a)({},t),{},{isHighlight:"none"!==n,onChange:a}))},t.label)}))})})),vt=function(t){var e=t.value,n=t.data,a=t.isHighlight,r=t.onChange,c="tag-filter-".concat(e);n=n.filter((function(t){return t.all>0})).sort((function(t,e){return e.all-t.all}));var o=p.scaleLinear().domain([0,p.max(n,(function(t){return t.all}))]).nice().range([0,90]);return Object(i.jsx)("div",{id:c,style:{paddingBottom:20},children:n.map((function(t){return Object(i.jsxs)("div",{className:"tag-bar-row",onClick:function(){return r({anaHighCate:e,anaHighTag:t.label})},children:[Object(i.jsx)("div",{className:"tag-label single-row",children:"Usa"===t.label?"USA":t.label}),Object(i.jsxs)("div",{className:"tag-bar-container",children:[Object(i.jsx)("div",{className:"tag-bar bar",style:{width:"".concat(o(t.all),"%"),height:16}}),a&&Object(i.jsx)("div",{className:"active-tag-bar highlight-bar-blue bar",style:{width:"".concat(o(t.highlight),"%"),height:16}})]}),Object(i.jsxs)("div",{className:"tag-count",children:[a&&Object(i.jsxs)("div",{className:"tag-count-highlight highlight-blue",children:[t.highlight,"\xa0/\xa0"]}),Object(i.jsx)("div",{children:t.all})]})]},t.label)}))})},mt=bt,xt=Object(X.a)((function(){var t=D(),e=t.analysisPapers,n=t.anaHighPapers,r=t.setClearBrushTrigger,c=t.anaTimeData,o=t.anaTagViewData,l=t.setAnaHighPapersByYear,u=t.setAnaHighPapersByTag,h=t.anaFilterType,d=t.setAnaFilterType,p=t.anaHighTag,g=Object(a.useState)([0,0]),f=Object(s.a)(g,2),j=f[0],b=f[1];return Object(i.jsxs)("div",{className:"tag-view-container",children:[Object(i.jsxs)("div",{className:"tag-header",children:[Object(i.jsx)("div",{className:"analysis-paper-count",children:Object(i.jsx)(Ot,{isAll:"none"===h,allCount:e.length,highlightCount:n.length})}),"none"===h||Object(i.jsx)("div",{className:"selected-highlight-attr highlight-bar-blue",children:"".concat("Usa"===p?"USA":p)})]}),Object(i.jsx)("div",{className:"tag-highlight-tabs-container",children:Object(i.jsx)(mt,{dataSource:o,onChange:u,anaFilterType:h})}),Object(i.jsxs)("div",{className:"tag-time-line",children:[Object(i.jsx)("div",{className:"year-seleted-text",children:j.join("-")}),Object(i.jsx)("div",{className:"time-line-div",children:c.length>0&&Object(i.jsx)(pt,{data:c,onInput:b,onChange:l,setClearBrushTrigger:r,setAnaFilterType:d,anaFilterType:h})})]})]})})),Ot=Object(a.memo)((function(t){var e=t.isAll,n=t.allCount,a=t.highlightCount,r=void 0===a?0:a;return e?Object(i.jsxs)("span",{className:"paper-all-count",children:["Papers: ",n]}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("span",{className:"paper-all-count",children:"Papers: "}),Object(i.jsx)("span",{className:"paper-highlight-count highlight-blue",children:r}),Object(i.jsxs)("span",{className:"paper-all-count",children:["\xa0/\xa0",n]})]})})),yt=xt,Ct=(n(120),n(134)),Pt=Object(X.a)((function(){var t="ana-projection-map-svg",e=D(),n=(e.drawProjectionFlag,e.analysisPapers),r=e.anaHighPapers,c=e.num_topics,o=(e.resetProjectionFlag,e.setNumTopics),u=(e.defaultHighColor,e.topicColorScale),h=e.anaFilterType,d=e.anaHighTopic,g=e.setAnaSelectHighlightPaperDoi,f=e.anaSelectHighlightPaperDoi,j=e.setHighEntityLinkData,b=e.anaHighEntityTopic,v=e.setAnaHighEntityTopic,m=Object(a.useState)(c),x=Object(s.a)(m,2),O=x[0],y=x[1],C=dt({svgId:t}),P=C.width,T=C.height;Object(a.useEffect)((function(){e.tryLda()}),[]);var N=30,S=30,k=30,w=30,H=p.scaleLinear().domain([p.min(n,(function(t){return t.projection[0]})),p.max(n,(function(t){return t.projection[0]}))]).nice().range([N,P-S]),L=p.scaleLinear().domain([p.min(n,(function(t){return t.projection[1]})),p.max(n,(function(t){return t.projection[1]}))]).nice().range([T-w,k]),A=p.range(c).map((function(t){return p.contourDensity().x((function(t){return H(t.projection[0])})).y((function(t){return L(t.projection[1])})).size([P,T]).bandwidth(30).thresholds(5)(n.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})))[0]})),_=function(t){return"none"===h?.25:"topic"!==h?.1:t===d?.36:.1},I=p.scaleLinear().domain([0,p.max(n,(function(t){return+t.citationCount}))]).range([3,15]),E=function(t){if(0===t.topics.length)return"#ccc";var e=t.topics[0];return t.topics.forEach((function(t){t[1]>e[1]&&(e=t)})),u[e[0]]},Y=function(t){return f===t.doi||"none"===h?1:r.map((function(t){return t.doi})).includes(t.doi)?.8:.2},B=function(t){return f===t.doi?6:"none"===h||"topic"===h?1:r.map((function(t){return t.doi})).includes(t.doi)?3:1},X=function(t){return f===t.doi?[4,8]:"none"===h||"topic"===h?"none":r.map((function(t){return t.doi})).includes(t.doi)?[5,5]:"none"},F=function(t){return f===t.doi?"red":"none"===h||"topic"===h?"#fff":r.map((function(t){return t.doi})).includes(t.doi)?"#333":"none"},M=function(t){var e=n.filter((function(e){return e.topics.map((function(t){return t[0]})).includes(t)})),i=n.filter((function(e){return e.topics[0][0]===t})),a=H(i.reduce((function(t,e){return t+e.projection[0]}),0)/i.length),r=L(i.reduce((function(t,e){return t+e.projection[1]}),0)/i.length);return{allPapers:e,topicIndex:t,mainPapers:i,positionX:a,positionY:r,color:u[t]}},U=M(d),W=new Set(U.allPapers.map((function(t){return t.doi}))),z=p.range(c).filter((function(t){return t!==d})).map((function(t){return M(t)}));z.forEach((function(t){t.intersectionPapers=t.allPapers.filter((function(t){return W.has(t.doi)}))}));var K=p.scaleLinear().domain(p.extent([].concat(Object(l.a)(z),[U]),(function(t){return t.allPapers.length}))).range([30,45]),R=function(t){var e=2*Math.PI*t.intersectionPapers.length/t.allPapers.length,n=K(t.allPapers.length),i={x:t.positionX,y:t.positionY-n},a={x:t.positionX+Math.sin(e)*n,y:t.positionY-Math.cos(e)*n};return"M ".concat(t.positionX," ").concat(t.positionY,"\n          L ").concat(i.x," ").concat(i.y,"\n          A ").concat(n," ").concat(n," 0 0 1 ").concat(a.x," ").concat(a.y,"\n          Z\n          ")},J=function(t){return b<0?.8:t.topicIndex===b?1:.6},V=z.map((function(t){var e=t.topicIndex,n={x:t.positionX,y:t.positionY},i={x:U.positionX,y:U.positionY},a=function(t,e,n,i,a){var r,c,o,s,l=Math.sqrt((t-n)*(t-n)+(e-i)*(e-i)),u=(i-e)*a/l,h=(n-t)*a/l;return{x_1_3_positive:(r=t-u)+(n-t)/3,y_1_3_positive:(c=e+h)+(i-e)/3,x_2_3_positive:r+2*(n-t)/3,y_2_3_positive:c+2*(i-e)/3,x_1_3_negative:(o=t+u)+(n-t)/3,y_1_3_negative:(s=e-h)+(i-e)/3,x_2_3_negative:o+2*(n-t)/3,y_2_3_negative:s+2*(i-e)/3}}(n.x,n.y,i.x,i.y,25),r=[{x:a.x_1_3_negative,y:a.y_1_3_negative},{x:a.x_2_3_negative,y:a.y_2_3_negative}],c=[{x:a.x_1_3_positive,y:a.y_1_3_positive},{x:a.x_2_3_positive,y:a.y_2_3_positive}],o=t.allPapers.filter((function(t){return W.has(t.doi)})),s=o.length,l=new Set(o.map((function(t){return t.doi}))),u=t.allPapers.filter((function(t){return!l.has(t.doi)})),h=U.allPapers.filter((function(t){return!l.has(t.doi)})),d=new Set(u.reduce((function(t,e){return t.concat(e.refList)}),[])),p=h.filter((function(t){return d.has(t.doi)})),g=new Set(p.map((function(t){return t.doi}))),f=u.reduce((function(t,e){return t+e.refList.filter((function(t){return g.has(t)})).length}),0),j=p.length,b=u.filter((function(t){return t.refList.filter((function(t){return g.has(t)})).length>0})),v=new Set(h.reduce((function(t,e){return t.concat(e.refList)}),[])),m=u.filter((function(t){return v.has(t.doi)})),x=new Set(m.map((function(t){return t.doi}))),O=h.reduce((function(t,e){return t+e.refList.filter((function(t){return x.has(t)})).length}),0),y=m.length;return{topicIndex:e,source:n,target:i,citeControlPoints:r,citedControlPoints:c,independentPapers:u,interPapers:o,centralEntityIndependentPapers:h,citeDoiSet:d,citedDoiSet:v,interCount:s,citePapers:p,citePaperCount:j,citeLinkCount:f,citedPapers:m,citedPaperCount:y,citedLinkCount:O,citeSourcePapers:b,citePapersDoiSet:g}})),Z=p.scaleLinear().domain([0,p.max(V,(function(t){return p.max([t.interCount,t.citeLinkCount,t.citedLinkCount])}))]).range([5,20]),q=function(t){return 0===t?0:Z(t)},G=function(t){return b<0?.7:t.topicIndex===b?1:.3};return Object(i.jsxs)("div",{className:"projection-view",children:[Object(i.jsxs)("svg",{id:t,width:"100%",height:"100%",children:[Object(i.jsx)("g",{id:"topic-contours-g",strokeLinejoin:"round",strokeWidth:"1.5",children:A.map((function(t,e){return Object(i.jsx)("path",{d:p.geoPath()(t),fill:u[e],opacity:_(e),stroke:e===d?"#111":"none",strokeDasharray:e===d?5:"none"},e)}))}),Object(i.jsx)("g",{id:"paper-circles-g",stroke:"#fff",children:n.map((function(t){return Object(i.jsx)("circle",{cx:H(t.projection[0]),cy:L(t.projection[1]),r:I(+t.citationCount)+B(t),fill:E(t),strokeLinecap:"round",strokeWidth:B(t),opacity:Y(t),strokeDasharray:X(t),stroke:F(t),cursor:"pointer",onClick:function(){return g(t.doi)}},t.doi)}))}),"topic"===h&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("g",{id:"topic-links-g",strokeLinecap:"round",children:V.map((function(t){return Object(i.jsxs)("g",{fill:"none",opacity:G(t),cursor:"pointer",onClick:function(){return v((e=t).topicIndex),void j(e.citeSourcePapers.map((function(t){return t.doi})),e.citedPapers.map((function(t){return t.doi})),e.centralEntityIndependentPapers.map((function(t){return t.doi})));var e},children:[Object(i.jsx)("path",{className:"cited",stroke:u[t.topicIndex],strokeWidth:q(t.citedLinkCount),d:"M".concat(t.source.x,",").concat(t.source.y," \n                    C").concat(t.citedControlPoints[0].x,",").concat(t.citedControlPoints[0].y,", \n                    ").concat(t.citedControlPoints[1].x,",").concat(t.citedControlPoints[1].y,", \n                    ").concat(t.target.x,",").concat(t.target.y)}),Object(i.jsx)("path",{className:"cite",stroke:u[d],strokeWidth:q(t.citeLinkCount),d:"M".concat(t.target.x,",").concat(t.target.y,"\n                    C").concat(t.citeControlPoints[1].x,",").concat(t.citeControlPoints[1].y,", \n                    ").concat(t.citeControlPoints[0].x,",").concat(t.citeControlPoints[0].y,", \n                    ").concat(t.source.x,",").concat(t.source.y)})]},t.topicIndex)}))}),Object(i.jsxs)("g",{id:"topic-entities-g",children:[Object(i.jsx)("g",{id:"selected-topic-entity-g"}),Object(i.jsx)("g",{id:"others-topic-entities-g",stroke:"#fff",strokeWidth:"3",children:z.map((function(t){return Object(i.jsxs)("g",{opacity:J(t),children:[Object(i.jsx)("circle",{cx:t.positionX,cy:t.positionY,r:K(t.allPapers.length),fill:t.color}),Object(i.jsx)("path",{fill:u[d],d:R(t)})]},t.topicIndex)}))})]})]})]}),Object(i.jsxs)("div",{className:"topics-number-input",children:[Object(i.jsxs)("div",{className:"topics-number-input-text",children:["Topics Num: ",O]}),Object(i.jsx)(Ct.a,{min:2,max:10,onAfterChange:o,onChange:y,value:O})]})]})})),Tt=n(36),Nt=(n(121),Object(X.a)((function(){var t="ana-network-svg",e=50,n=50,a=40,r=40,c=dt({svgId:t}),o=c.width,s=c.height,u=D(),h=u.analysisPapers,d=u.topicColorScale,g=u.anaFilterType,f=u.anaHighTopic,j=u.anaHighPapers,b=u.setAnaSelectHighlightPaperDoi,v=u.anaSelectHighlightPaperDoi,m=u.anaHighEntityTopic,x=u.anaHighEntityCitePaperDois,O=u.anaHighEntityCitedPaperDois,y=u.anaHighTopicIndenpentPaperDois,C=new Set(j.map((function(t){return t.doi}))),P=p.extent(h,(function(t){return+t.year})),T=p.range.apply(p,Object(l.a)(P.map((function(t,e){return t+e})))).map((function(t){return h.filter((function(e){return+e.year===+t})).length})),N=p.max([(o-e-n)/(P[1]-P[0]+1)*.68,0]),S=p.max([p.min([.4*N,(s-r-a)/p.max(T)*.8]),0]),k=p.scaleLinear().domain(P).range([e,o-n]),w=p.scaleLinear().domain([0,p.max(T)-1]).range([a,s-r]),H={},L=h.slice();L.sort((function(t,e){return t.topics[0][0]===e.topics[0][0]?t.topics[0][1]-e.topics[0][1]:t.topics[0][0]-e.topics[0][0]}));var A={};L.forEach((function(t){t.year in H||(H[t.year]=0),A[t.doi]=H[t.year],H[t.year]+=1}));var _=function(t){if(t.doi===v)return 1;if(C.has(t.doi))return 1;if(m>=0){if(x.includes(t.doi))return.9;if(O.includes(t.doi))return.9}return.3},I=function(t){if(t.doi===v)return"red";if(m>=0){if(x.includes(t.doi))return"#666";if(O.includes(t.doi))return"#666"}return"none"===g?"#fff":C.has(t.doi)?"#666":"#fff"},E=function(t){return t.doi===v?3:2},Y=function(t){if(t.doi===v)return[4,7];if(m>=0){if(x.includes(t.doi))return"none";if(O.includes(t.doi))return"none"}return"none"===g?"none":C.has(t.doi)?[5,4]:"none"},B=p.contourDensity().x((function(t){return k(+t.year)})).y((function(t){return w(A[t.doi])})).size([o,s]).bandwidth(30).thresholds(5)(j)[0],X="none"===g?"none":"topic"===g?d[f]:"#aaa",F="none"===g?0:.25,M={};h.forEach((function(t){return M[t.doi]=t}));var U=[];h.forEach((function(t){t.refList.forEach((function(e){if(e in M){var n={source:e,target:t.doi,weight:1};U.push(n)}}))}));var W=p.linkHorizontal().x((function(t){return k(M[t].year)})).y((function(t){return w(A[t])})),z=function(t){if(w(A[t.source])===w(A[t.target])){var e=k(M[t.source].year),n=w(A[t.source]),i=k(M[t.target].year),c=n,o=e+.3*(i-e),l=e+.7*(i-e),u=n+(s-r-a)/p.max(T)*.8,h=u;return"M".concat(e,",").concat(n," C ").concat(o,",").concat(u,",").concat(l,",").concat(h,",").concat(i,",").concat(c)}return W(t)},K=function(t){if(t.source===v||t.target===v)return"#333";if(m>=0){if(x.includes(t.target)&&y.includes(t.source))return d[f];if(O.includes(t.source)&&y.includes(t.target))return d[m]}return C.has(t.source)&&C.has(t.target)?"#555":"#aaa"},R=function(t){if(t.source===v||t.target===v)return.7;if("none"===g)return.1;if(m>=0){if(x.includes(t.target)&&y.includes(t.source))return.9;if(O.includes(t.source)&&y.includes(t.target))return.9}return m<0&&C.has(t.source)&&C.has(t.target)?.35:0},J=function(t){if(t.source===v||t.target===v)return 5;if(m>=0){if(x.includes(t.target)&&y.includes(t.source))return 5;if(O.includes(t.source)&&y.includes(t.target))return 5}return C.has(t.source)&&C.has(t.target)?4:0};return Object(i.jsx)("div",{className:"ana-network-view",children:Object(i.jsxs)("svg",{id:t,width:"100%",height:"100%",children:[Object(i.jsx)("g",{id:"network-contour-g",children:Object(i.jsx)("path",{d:p.geoPath()(B),fill:X,opacity:F})}),Object(i.jsx)("g",{id:"network-links-g",fill:"none",children:U.map((function(t){return Object(i.jsx)("path",{d:z(t),strokeLinecap:"round",stroke:K(t),strokeWidth:J(t),opacity:R(t)},"".concat(t.source,"-").concat(t.target))}))}),Object(i.jsx)("g",{id:"network-rects-g",children:h.map((function(t){var e;return Object(i.jsx)("g",(e={transform:"translate(".concat(k(+t.year),", ").concat(w(A[t.doi]),")"),cursor:"pointer",onClick:function(){console.log("click",t)},opacity:_(t)},Object(Tt.a)(e,"onClick",(function(){return b(t.doi)})),Object(Tt.a)(e,"children",Object(i.jsxs)(i.Fragment,{children:[t.topics.map((function(t,e,n){return Object(i.jsx)("rect",{fill:d[t[0]],x:-N/2+N/n.length*e,y:-S/2,width:N/n.length,height:S,stroke:"#fff",strokeWidth:"1"},t[0])})),Object(i.jsx)("rect",{x:-N/2-E(t)/2,y:-S/2-E(t)/2,fill:"none",width:N+E(t),height:S+E(t),stroke:I(t),strokeWidth:E(t),strokeLinecap:"round",strokeDasharray:Y(t)})]})),e),t.doi)}))})]})})}))),St=(n(122),Object(X.a)((function(){var t=D(),e=t.topics_detail,n=t.topicColorScale,a=t.analysisPapers,r=t.anaHighPapers,c=t.anaFilterType,o=t.setAnaHighPapersByTopic,s=t.anaHighTopic;return Object(i.jsxs)("div",{className:"topic-list-view",children:[Object(i.jsx)("div",{className:"topic-list-header",children:"Topics List"}),Object(i.jsx)("div",{className:"topic-list-content",children:e.map((function(t,e){return Object(i.jsx)(kt,{topic:t,index:e+1,color:n[e],isHighlight:"none"!==c,all:a.filter((function(t){return t.topics.map((function(t){return t[0]})).includes(e)})).length,highlight:r.filter((function(t){return t.topics.map((function(t){return t[0]})).includes(e)})).length,onChange:function(){return o(e)},isSelected:"topic"===c&&s===e},e)}))})]})}))),kt=function(t){var e=t.topic,n=t.index,a=t.color,r=t.isHighlight,c=t.all,o=t.highlight,s=t.onChange,l={background:a},u=["topic-item",t.isSelected&&"topic-item-selected"].filter((function(t){return t})).join(" ");return Object(i.jsxs)("div",{className:u,style:l,onClick:s,children:[Object(i.jsxs)("div",{className:"topic-header",children:[Object(i.jsxs)("div",{className:"topic-index",children:["Topic ",n]}),Object(i.jsx)("div",{className:"topic-number",children:r?"".concat(o," / ").concat(c):c})]}),Object(i.jsx)("div",{className:"topic-detail",children:e.join(", ")})]})},wt=St,Ht=(n(123),Object(X.a)((function(){var t=D(),e=t.anaSelectHighlightPaperDoi,n=t.anaHighPapers,a=t.setAnaSelectHighlightPaperDoi;return Object(i.jsxs)("div",{className:"highlight-list-view",children:[Object(i.jsx)("div",{className:"highlight-list-header",children:"Highlight Papers"}),Object(i.jsx)("div",{className:"highlight-list-content",children:n.map((function(t,n){return Object(i.jsx)(Lt,{paper:t,index:n,handleClick:function(){return a(t.doi)},isSelected:t.doi===e},t.doi)}))})]})}))),Lt=function(t){var e=t.paper,n=t.index,a=t.handleClick,r=void 0===a?function(){}:a,c=t.isSelected,o=void 0!==c&&c;return Object(i.jsxs)("div",{className:"paper-item ".concat(o?"paper-item-selected":""),onClick:function(){return r(e.doi)},children:[Object(i.jsxs)("div",{className:"paper-index",children:[n+1,"."]}),Object(i.jsxs)("div",{className:"paper-content",children:[Object(i.jsxs)("div",{className:"paper-header",children:[Object(i.jsx)("div",{className:"paper-header-conferenceName",children:e.conferenceName}),Object(i.jsx)("div",{className:"paper-header-title",children:e.title})]}),Object(i.jsxs)("div",{className:"paper-details",children:[e.authors.join("; ")," (",e.year,")"]}),Object(i.jsx)("div",{className:"paper-tags",children:[].concat(Object(l.a)(e.keywords),Object(l.a)(e.publicTags),Object(l.a)(e.privateTags)).join("; ")})]})]})},At=Ht,_t=(n(124),Object(X.a)((function(){var t=D().anaSelectHighlightPaper,e=t.conferenceName,n=void 0===e?"":e,a=t.year,r=void 0===a?"":a,c=t.title,o=void 0===c?"":c,s=t.authors,l=void 0===s?[]:s,u=t.keywords,h=void 0===u?[]:u,d=t.abstract,p=void 0===d?"":d;return t.title?Object(i.jsxs)("div",{className:"detail-paper-view",children:[Object(i.jsx)("div",{className:"paper-title",children:o}),Object(i.jsxs)("div",{className:"paper-details",children:[l.join("; "),Object(i.jsx)("span",{className:"paper-header",children:r&&"(".concat(n," ").concat(r,")")})]}),Object(i.jsxs)("div",{className:"paper-info",children:[Object(i.jsx)("span",{className:"paper-info-title",children:"Keywords:"}),Object(i.jsx)("span",{className:"paper-info-content",children:h.join("; ")})]}),Object(i.jsxs)("div",{className:"paper-info",children:[Object(i.jsx)("span",{className:"paper-info-title",children:"Abstract:"}),Object(i.jsx)("span",{className:"paper-info-content",children:p})]})]}):Object(i.jsx)("div",{})}))),It=function(){var t=D();return Object(a.useEffect)((function(){t.setCurrentPage(),t.initPapers(),t.initUserId()}),[]),Object(i.jsxs)("div",{className:"analysis-container",children:[Object(i.jsx)("div",{className:"left-container",children:Object(i.jsx)(yt,{})}),Object(i.jsxs)("div",{className:"middle-container",children:[Object(i.jsx)("div",{className:"middle-top-container",children:Object(i.jsx)(Pt,{})}),Object(i.jsx)("div",{className:"middle-bottom-container",children:Object(i.jsx)(Nt,{})})]}),Object(i.jsxs)("div",{className:"right-container",children:[Object(i.jsx)("div",{className:"right-top-container",children:Object(i.jsx)(wt,{})}),Object(i.jsx)("div",{className:"right-middle-container",children:Object(i.jsx)(At,{})}),Object(i.jsx)("div",{className:"right-bottom-container",children:Object(i.jsx)(_t,{})})]})]})},Et=(n(125),["Prof. Yuan","Guozheng Li","Shuai Chen","Chenglei Yue","Ruike Jiang","Can Liu","Jincheng Li","Chaofan Yang","Hanning Shao","Yuchu Luo","Zhixian Lin","Min Tian","Dingyi Yang","Changhe Yang","Yanda Li","Datong Wei","Cong Wu","Hao Wu","Shaocong Tan","Jiacheng Yu","Sihang Li","Zhen Li","Haohua Liu","KaiChen Nie"]),Dt=n(137),Yt=Dt.a.Option,Bt=Object(X.a)((function(){var t=D(),e=t.currentPage,n="Literature ".concat(e," System"),a="Analysis"===e?"management":"analysis",r="Analysis"===e?"Manage":"Analyze",c=function(){return Object(i.jsx)(Y.b,{to:a,className:"switch-button",children:r})};return Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("div",{className:"title",children:n}),Object(i.jsxs)("div",{className:"user-selector title",children:["User: \xa0",Object(i.jsx)(Dt.a,{value:t.userId,size:"small",onChange:function(e){t.setUserId(e)},style:{width:130},placeholder:"Set User",children:Et.map((function(t){return Object(i.jsx)(Yt,{value:t,children:t},t)}))}),Object(i.jsx)(c,{})]})]})})),Xt=function(){return Object(i.jsx)(E,{children:Object(i.jsx)(Y.a,{children:Object(i.jsxs)("div",{className:"view-container",children:[Object(i.jsx)("div",{className:"header-container",children:Object(i.jsx)(Bt,{})}),Object(i.jsxs)(B.c,{children:[Object(i.jsx)(B.a,{exact:!0,path:"/management",component:ht}),Object(i.jsx)(B.a,{exact:!0,path:"/analysis",component:It}),Object(i.jsx)(B.a,{path:"/",component:ht})]})]})})})},Ft=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,141)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),i(t),a(t),r(t),c(t)}))};n(129);o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(Xt,{})}),document.getElementById("root")),Ft()}},[[130,1,2]]]);
//# sourceMappingURL=main.e01e5011.chunk.js.map